# Bug Hunt Team (Hierarchical Formation)
# ======================================
# Manager-coordinated bug investigation and resolution team.
#
# Formation: HIERARCHICAL
# - Manager coordinates investigation strategy
# - Workers investigate different aspects
# - Manager synthesizes findings and directs fixes
#
# Use Cases:
# - Bug triage and investigation
# - Root cause analysis
# - Multi-system bug diagnosis
# - Production incident response
#
# Complexity: complex
# Members: 4 (1 manager + 3 workers)
# Tool Budget: 150 total
# Timeout: 15 minutes

name: bug_hunt_hierarchical
display_name: "Bug Hunt Team (Hierarchical)"
description: "Manager-coordinated bug investigation and resolution team"
long_description: |
  A hierarchical team for systematic bug investigation and resolution.
  The manager agent coordinates investigation strategy, delegates specific
  investigation tasks to specialist workers, and synthesizes findings to
  direct the fix implementation.

  Ideal for complex bugs requiring multi-faceted investigation across
  different system components.
version: "0.5.0"
author: "Victor AI"
vertical: "coding"
formation: "hierarchical"

tags:
  - "debugging"
  - "bug-fixing"
  - "root-cause-analysis"
  - "incident-response"
  - "hierarchical"

use_cases:
  - "Bug triage and prioritization"
  - "Root cause analysis"
  - "Multi-system bug diagnosis"
  - "Production incident investigation"
  - "Intermittent bug reproduction"

complexity: "complex"
max_iterations: 100
total_tool_budget: 150
timeout_seconds: 900

members:
  # Bug Investigation Manager
  - id: "investigation_manager"
    role: "planner"
    name: "Investigation Manager"
    goal: |
      Coordinate bug investigation strategy, delegate investigation tasks,
      analyze findings from team members, and direct fix implementation.
      Maintain focus on root cause identification and efficient resolution.
    backstory: |
      Senior engineering leader with 20 years of debugging experience.
      Former principal engineer at major tech companies.
      Expert in systematic debugging methodology and incident management.
      Known for coordinating complex multi-team investigations.
    expertise:
      - "debugging-strategy"
      - "root-cause-analysis"
      - "incident-coordination"
      - "system-architecture"
      - "delegation"
      - "synthesis"
      - "prioritization"
    personality: |
      Systematic and decisive; coordinates investigations efficiently.
      Delegates strategically based on team member expertise.
      Synthesizes complex information into clear action plans.
    tool_budget: 40
    can_delegate: true
    max_delegation_depth: 2
    delegation_targets:
      - "reproduction_specialist"
      - "log_analyzer"
      - "code_trace_expert"
    memory: true
    cache: true

  # Reproduction Specialist
  - id: "reproduction_specialist"
    role: "researcher"
    name: "Reproduction Specialist"
    goal: |
      Reproduce the bug with minimal steps. Identify reproduction conditions,
      edge cases, and environmental factors. Create reproducible test cases.
    backstory: |
      QA engineer with 10 years of experience in bug reproduction.
      Specializes in finding minimal reproduction steps for complex bugs.
      Expert in test case design and edge case identification.
    expertise:
      - "bug-reproduction"
      - "test-design"
      - "edge-cases"
      - "environmental-factors"
      - "test-isolation"
    personality: |
      Methodical and thorough; explores all reproduction paths.
      Documents clear step-by-step reproduction instructions.
    tool_budget: 35
    allowed_tools:
      - "read"
      - "shell"
      - "run_tests"
      - "grep"
    can_delegate: false
    memory: true
    cache: true

  # Log and Trace Analyzer
  - id: "log_analyzer"
    role: "researcher"
    name: "Log Analyzer"
    goal: |
      Analyze logs, stack traces, and error messages to identify failure patterns,
      error chains, and system state at time of failure. Extract relevant context.
    backstory: |
      DevOps engineer with 12 years of log analysis experience.
      Expert in distributed tracing and log aggregation systems.
      Known for finding subtle patterns in large log datasets.
    expertise:
      - "log-analysis"
      - "stack-traces"
      - "error-patterns"
      - "distributed-tracing"
      - "metrics-analysis"
    personality: |
      Analytical and detail-oriented; spots patterns others miss.
      Extracts actionable insights from noisy log data.
    tool_budget: 35
    allowed_tools:
      - "read"
      - "grep"
      - "shell"
      - "find"
    can_delegate: false
    memory: true
    cache: true

  # Code Trace Expert
  - id: "code_trace_expert"
    role: "researcher"
    name: "Code Trace Expert"
    goal: |
      Trace code execution paths to identify logic errors, race conditions,
      and incorrect assumptions. Analyze control flow and data flow.
    backstory: |
      Software engineer with 15 years of experience in code analysis.
      Expert in static analysis and dynamic debugging techniques.
      Specializes in finding subtle logic bugs and concurrency issues.
    expertise:
      - "code-tracing"
      - "logic-analysis"
      - "race-conditions"
      - "concurrency"
      - "static-analysis"
    personality: |
      Persistent and thorough; follows execution paths exhaustively.
      Identifies root causes through systematic code examination.
    tool_budget: 40
    allowed_tools:
      - "read"
      - "grep"
      - "code_search"
      - "find"
    can_delegate: false
    memory: true
    cache: true

config:
  delegation_strategy: "expertise_based"
  synthesis_threshold: 3  # Synthesize after 3 workers report
  fix_validation: true

metadata:
  category: "debugging"
  best_for: ["complex-bugs", "production-incidents", "multi-system-issues"]
  alternatives:
    - "quick_fix_sequential"  # For simple bugs
    - "code_review_parallel"  # For preventive review

examples:
  - name: "Investigate Production Bug"
    description: "Investigate a production incident"
    input:
      goal: "Investigate payment processing failure in production"
      context:
        incident_id: "INC-12345"
        severity: "critical"
  - name: "Root Cause Analysis"
    description: "Perform root cause analysis"
    input:
      goal: "Determine root cause of intermittent authentication failures"
      context:
        reproducibility: "intermittent"
        affected_users: 100
