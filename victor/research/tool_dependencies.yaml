# Research Vertical Tool Dependencies
# Migrated from hand-coded Python to YAML-based configuration
# See victor/core/tool_dependency_schema.py for schema documentation
#
# This file defines tool relationships for research workflows including:
# - Fact-checking
# - Literature review
# - Technical lookup
# - Report writing

version: "1.0"
vertical: research

# Tool transition probabilities
# Maps current tool to (next_tool, probability) pairs
transitions:
  # Search tools lead to fetch/read
  web_search:
    - tool: web_fetch
      weight: 0.7  # Usually fetch after finding results
    - tool: web_search
      weight: 0.2  # Sometimes refine search
    - tool: read
      weight: 0.1  # Check local context

  # Fetch leads to more fetch or synthesis
  web_fetch:
    - tool: web_fetch
      weight: 0.4  # Fetch more pages
    - tool: web_search
      weight: 0.3  # Search for related info
    - tool: write
      weight: 0.2  # Write findings
    - tool: read
      weight: 0.1  # Check local notes

  # Reading local files
  read:
    - tool: web_search
      weight: 0.4  # Research based on file content
    - tool: write
      weight: 0.3  # Update notes
    - tool: edit
      weight: 0.2  # Modify content
    - tool: ls
      weight: 0.1  # Find more files

  # Writing outputs
  write:
    - tool: read
      weight: 0.4  # Review what was written
    - tool: edit
      weight: 0.3  # Refine content
    - tool: web_search
      weight: 0.2  # Verify/expand
    - tool: web_fetch
      weight: 0.1  # Get more sources

  # Code search for technical research (keyword-based)
  grep:
    - tool: read
      weight: 0.5  # Read found code
    - tool: code_search
      weight: 0.3  # Semantic follow-up
    - tool: grep
      weight: 0.2  # Refine search

  # Semantic code search
  code_search:
    - tool: read
      weight: 0.5  # Read found code
    - tool: grep
      weight: 0.3  # Keyword follow-up
    - tool: overview
      weight: 0.2  # Get context

# Tool clusters - groups of tools commonly used together
clusters:
  web_research:
    - web_search
    - web_fetch

  file_operations:
    - read
    - write
    - edit
    - ls

  code_research:
    - grep
    - code_search
    - overview

# Recommended tool sequences for common research patterns
sequences:
  # Verify claims from multiple sources
  fact_check:
    - web_search
    - web_fetch
    - web_search
    - web_fetch

  # Academic-style multi-source review
  literature_review:
    - web_search
    - web_fetch
    - web_fetch
    - web_fetch
    - write

  # Quick technical documentation lookup
  technical_lookup:
    - web_search
    - web_fetch
    - grep
    - read

  # Full research report writing
  report_writing:
    - read
    - web_search
    - web_fetch
    - write
    - edit

# Tool dependencies - what each tool depends on and enables
dependencies:
  - tool: web_fetch
    depends_on:
      - web_search
    enables:
      - write
      - web_fetch
    weight: 0.7

  - tool: write
    depends_on:
      - web_fetch
      - read
    enables:
      - read
      - edit
    weight: 0.5

  - tool: grep
    depends_on: []
    enables:
      - read
      - code_search
    weight: 0.5

# Required tools - essential for research tasks
required_tools:
  - web_search
  - web_fetch
  - read
  - write

# Optional tools - enhance research but not required
optional_tools:
  - grep
  - code_search
  - overview
  - ls
  - edit

# Default sequence when task type is unknown
default_sequence:
  - web_search
  - web_fetch
