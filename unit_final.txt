============================= test session starts ==============================
platform darwin -- Python 3.12.6, pytest-9.0.2, pluggy-1.6.0 -- /Users/vijaysingh/code/.venv/bin/python3.12
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
metadata: {'Python': '3.12.6', 'Platform': 'macOS-26.2-arm64-arm-64bit', 'Packages': {'pytest': '9.0.2', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.12.1', 'benchmark': '5.2.3', 'respx': '0.22.0', 'mock': '3.15.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'asyncio': '1.3.0', 'locust': '2.43.1', 'cov': '7.0.0'}, 'JAVA_HOME': '/Library/Java/JavaVirtualMachines/jdk-19.jdk/Contents/Home'}
rootdir: /Users/vijaysingh/code/codingagent
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.1, benchmark-5.2.3, respx-0.22.0, mock-3.15.1, json-report-1.5.0, metadata-3.1.1, asyncio-1.3.0, locust-2.43.1, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 25432 items / 5 deselected / 2 skipped / 25427 selected

tests/unit/agent/cache/backends/test_factory.py::TestMemoryBackendCreation::test_create_memory_backend_default_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestMemoryBackendCreation::test_create_memory_backend_with_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestMemoryBackendCreation::test_create_memory_backend_with_empty_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestRedisBackendCreation::test_create_redis_backend_with_required_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestRedisBackendCreation::test_create_redis_backend_missing_required_option PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestRedisBackendCreation::test_create_redis_backend_with_all_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestSQLiteBackendCreation::test_create_sqlite_backend_default_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestSQLiteBackendCreation::test_create_sqlite_backend_with_file_path PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestSQLiteBackendCreation::test_create_sqlite_backend_with_all_options PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestDefaultBackend::test_create_default_backend PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_valid_memory_config PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_valid_sqlite_config PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_valid_redis_config PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_missing_type PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_unknown_backend_type PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_redis_missing_required_option PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestConfigurationValidation::test_validate_config_not_dict PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestErrorHandling::test_create_backend_with_invalid_type PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestErrorHandling::test_create_backend_without_type PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestErrorHandling::test_create_backend_config_not_dict PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestErrorHandling::test_create_redis_backend_without_url PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestFactoryIntegration::test_memory_backend_integration PASSED [  0%]
tests/unit/agent/cache/backends/test_factory.py::TestFactoryIntegration::test_sqlite_backend_integration PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_connect_establishes_connection PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_connect_creates_pubsub PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_disconnect_closes_pubsub PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_disconnect_closes_redis PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_multiple_connect_calls_idempotent PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestConnectionLifecycle::test_multiple_disconnect_calls_safe PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_get_returns_cached_value PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_get_returns_none_for_missing_key PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_set_stores_value PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_set_with_custom_ttl PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_delete_removes_key PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestBasicCacheOperations::test_delete_returns_false_for_missing_key PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestNamespaceManagement::test_clear_namespace_deletes_all_keys PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestNamespaceManagement::test_clear_namespace_returns_zero_for_empty_namespace PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestNamespaceManagement::test_namespace_isolation PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestStatistics::test_get_stats_returns_backend_type PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestStatistics::test_get_stats_returns_key_count PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestStatistics::test_get_stats_returns_memory_usage PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestDistributedInvalidation::test_invalidate_publish_sends_message PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestDistributedInvalidation::test_listen_for_invalidation_calls_callback PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestDistributedInvalidation::test_listen_for_invalidation_ignores_non_message_types PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestKeyPrefix::test_key_prefix_applied_to_all_operations PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestKeyPrefix::test_default_key_prefix PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestErrorHandling::test_get_before_connect_raises_error PASSED [  0%]
tests/unit/agent/cache/backends/test_redis_backend.py::TestErrorHandling::test_set_before_connect_raises_error PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_connect_creates_database PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_connect_creates_cache_table PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_connect_creates_indexes PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_disconnect_closes_connection PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_multiple_connect_calls_idempotent PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestConnectionLifecycle::test_multiple_disconnect_calls_safe PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_get_returns_cached_value PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_get_returns_none_for_missing_key PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_set_stores_value PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_set_with_custom_ttl PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_set_without_ttl_uses_default PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_delete_removes_key PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestBasicCacheOperations::test_delete_returns_false_for_missing_key PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestNamespaceManagement::test_namespace_isolation PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestNamespaceManagement::test_clear_namespace_deletes_all_keys PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestNamespaceManagement::test_clear_namespace_returns_zero_for_empty_namespace PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestTTLAndExpiration::test_expired_entries_not_returned PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestTTLAndExpiration::test_cleanup_expired_removes_old_entries PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestTTLAndExpiration::test_cleanup_expired_returns_zero_when_no_expired PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestStatistics::test_get_stats_returns_backend_type PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestStatistics::test_get_stats_returns_key_count PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestStatistics::test_get_stats_returns_db_size PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestPersistence::test_cache_persists_across_reconnects PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestPersistence::test_expired_entries_cleanup_on_reconnect PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestThreadSafety::test_concurrent_get_operations PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestThreadSafety::test_concurrent_set_operations PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestErrorHandling::test_get_before_connect_raises_error PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestErrorHandling::test_set_before_connect_raises_error PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestErrorHandling::test_unpickleable_value_raises_error PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestDistributedInvalidation::test_invalidate_publish_raises_not_implemented PASSED [  0%]
tests/unit/agent/cache/backends/test_sqlite_backend.py::TestDistributedInvalidation::test_listen_for_invalidation_raises_not_implemented PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_get_set_delete PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_get_nonexistent_key PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_delete_nonexistent_key PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_set_with_ttl PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_set_without_ttl PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_namespace_isolation PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_clear_namespace PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_get_stats PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_overwrite_existing_key PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_complex_values PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestMemoryCacheBackend::test_cache_namespace_hierarchy PASSED [  0%]
tests/unit/agent/cache/test_cache_backends.py::TestCacheBackendProtocol::test_memory_backend_implements_protocol PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_single_file_path PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_from_file_argument PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_from_files_list PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_from_directory_argument PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_from_dir_argument PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestCommonArgumentPatterns::test_extract_from_dirs_list PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestMixedArguments::test_extract_path_and_files PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestMixedArguments::test_extract_from_all_patterns PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestEdgeCases::test_empty_arguments PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestEdgeCases::test_no_file_arguments PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestEdgeCases::test_empty_files_list PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestEdgeCases::test_none_values PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestEdgeCases::test_non_string_values PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestToolSpecificExtraction::test_read_file_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestToolSpecificExtraction::test_write_file_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestToolSpecificExtraction::test_grep_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestToolSpecificExtraction::test_code_search_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestToolSpecificExtraction::test_glob_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestAdvancedScenarios::test_relative_paths PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestAdvancedScenarios::test_nested_paths_in_lists PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestAdvancedScenarios::test_duplicate_paths PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestAdvancedScenarios::test_mixed_valid_invalid_paths PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestPerformance::test_large_file_list PASSED [  0%]
tests/unit/agent/cache/test_dependency_extractor.py::TestPerformance::test_many_arguments PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_init_empty PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_add_tool_dependency PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_add_file_dependency PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_dependents PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_dependents_empty PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_file_dependents PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_file_dependents_empty PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_transitive_dependents PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_transitive_dependents_empty PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_dependencies PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_file_dependencies PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_remove_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_remove_file_dependency PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_clear PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_get_stats PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_multiple_dependencies_same_tool PASSED [  0%]
tests/unit/agent/cache/test_dependency_graph.py::TestToolDependencyGraph::test_complex_dependency_chain PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestStartupShutdown::test_initial_state PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestStartupShutdown::test_start_watcher PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestStartupShutdown::test_stop_watcher PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestStartupShutdown::test_multiple_starts PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestStartupShutdown::test_multiple_stops PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestSingleFileWatching::test_watch_file PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestSingleFileWatching::test_detect_file_modification PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestSingleFileWatching::test_watch_nonexistent_file PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestSingleFileWatching::test_unwatch_file PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestDirectoryWatching::test_watch_directory PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestDirectoryWatching::test_watch_directory_recursive PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestDirectoryWatching::test_detect_file_in_directory PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestDirectoryWatching::test_detect_file_in_subdirectory_recursive PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestDirectoryWatching::test_unwatch_directory PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestFileChangeEvents::test_file_created_event PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestFileChangeEvents::test_file_deleted_event PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestFileChangeEvents::test_file_moved_event PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestEventRetrieval::test_get_changes_returns_empty_initially PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestEventRetrieval::test_get_changes_consumes_events PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestEventRetrieval::test_multiple_changes_accumulate PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestThreadSafety::test_concurrent_watch_operations PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestThreadSafety::test_concurrent_get_changes PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestErrorHandling::test_watch_nonexistent_directory PASSED [  0%]
tests/unit/agent/cache/test_file_watcher.py::TestErrorHandling::test_operations_when_not_running PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_init PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_init_without_dependency_tracking PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_get_tool_result_miss PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_set_and_get_tool_result PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_set_with_file_dependencies PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_set_with_dependent_tools PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_tool PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_tool_with_cascade PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_file_dependencies PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_clear_all PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_get_stats PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_custom_ttl PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_different_namespaces_isolated PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_tool_specific_namespace PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_make_cache_key PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_hash_args_stable PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_recursive PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_recursive_session PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_recursive_tool PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_empty PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_recursive_empty PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_get_child_namespaces PASSED [  0%]
tests/unit/agent/cache/test_tool_cache_manager.py::TestToolCacheManager::test_invalidate_namespace_non_recursive_does_not_clear_children PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_create_valid_spec PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_spec_defaults PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_spec_frozen PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_empty_name_raises_error PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_empty_method_name_raises_error PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_invalid_version_format_raises_error PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_version_missing_minor_raises_error PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_version_negative_numbers_raises_error PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilitySpec::test_valid_version_formats PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilityBase::test_cannot_instantiate_base_class PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilityBase::test_subclass_must_implement_get_spec PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilityBase::test_valid_subclass PASSED [  0%]
tests/unit/agent/capabilities/test_base.py::TestCapabilityBase::test_multiple_subclasses PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_enabled_tools_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_tool_dependencies_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_tool_sequences_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_tiered_tool_config_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_vertical_middleware_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_vertical_safety_patterns_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_vertical_context_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_rl_hooks_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_team_specs_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_mode_configs_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_default_budget_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_custom_prompt_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_prompt_section_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_task_type_hints_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_safety_patterns_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilities::test_enrichment_strategy_capability PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilityNames::test_all_capabilities_have_names PASSED [  0%]
tests/unit/agent/capabilities/test_builtin.py::TestBuiltinCapabilityNames::test_all_capabilities_have_valid_versions PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_get_capability_registry PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_get_method_for_capability_integration PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_get_method_for_unknown_capability PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_backward_compatibility_with_legacy_dict PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_registry_has_all_legacy_capabilities PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityRegistryIntegration::test_dynamic_capability_registration_affects_global_registry PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestCapabilityMethodMappings::test_all_capability_mappings_match_registry PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestErrorHandling::test_registry_survives_invalid_entry_point PASSED [  0%]
tests/unit/agent/capabilities/test_integration.py::TestErrorHandling::test_method_resolution_with_mixed_sources PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_registry_initialization PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_get_method_for_builtin_capability PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_get_method_for_unknown_capability_fallback PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_has_capability_for_builtin PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_has_capability_for_unknown PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_get_capability PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_get_capability_unknown PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_list_capabilities PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_register_capability_at_runtime PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_register_capability_override PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_unregister_capability PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_unregister_unknown_capability PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistry::test_get_registry_stats PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistryWithEntryPoints::test_entry_points_loaded_flag PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestDynamicCapabilityRegistryWithEntryPoints::test_builtin_capabilities_always_available PASSED [  0%]
tests/unit/agent/capabilities/test_registry.py::TestCustomCapabilityClass::test_custom_capability_class PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestBaseAnalyticsExporter::test_exporter_type PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestBaseAnalyticsExporter::test_export_raises_not_implemented PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestConsoleAnalyticsExporter::test_init_default PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestConsoleAnalyticsExporter::test_init_verbose PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestConsoleAnalyticsExporter::test_export PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestConsoleAnalyticsExporter::test_export_verbose PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_init_json_format PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_init_csv_format PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_init_invalid_format PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_init_no_append PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_json_new_file PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_json_append PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_csv_new_file PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_csv_append PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_creates_directory PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestFileAnalyticsExporter::test_export_with_nested_data PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_init_empty PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_init_with_exporters PASSED [  0%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_track_event PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_track_multiple_events PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_analytics_no_session PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_analytics_no_exporters PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_analytics_success PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_analytics_specific_exporters PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_analytics_handles_errors PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_query_analytics_all PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_query_analytics_by_session PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_query_analytics_by_event_type PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_query_analytics_with_limit PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_get_session_stats_not_found PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_get_session_stats PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_add_exporter PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_add_duplicate_exporter PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_remove_exporter PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_remove_nonexistent_exporter PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_clear_session PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_clear_all_sessions PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_track_event_updates_timestamp PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_export_to_multiple_exporters PASSED [  1%]
tests/unit/agent/coordinators/test_analytics_coordinator.py::TestAnalyticsCoordinator::test_query_analytics_filters_by_time PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorInitialization::test_initialization PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_simple_response FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_token_usage_tracking FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_tool_calls FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_empty_response_uses_completer FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_max_iterations_exceeded FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_thinking_enabled FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_context_compaction FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_tool_failure_uses_completer FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorStreamChat::test_stream_chat_yields_chunks PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorStreamChat::test_stream_chat_updates_cumulative_token_usage PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorStreamChat::test_stream_chat_cancellation_handling PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_classify_task_keywords_analysis PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_classify_task_keywords_action PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_classify_task_keywords_execution PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_classify_task_keywords_default PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_extract_required_files_from_prompt PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_extract_required_outputs_from_prompt PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_get_max_context_chars PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorHelperMethods::test_parse_and_validate_tool_calls PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRateLimitRetry::test_get_rate_limit_wait_time PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRateLimitRetry::test_get_rate_limit_wait_time_capped PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_create_recovery_context PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_apply_recovery_action_force_summary PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_apply_recovery_action_retry PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_apply_recovery_action_finalize PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_apply_recovery_action_continue PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_handle_empty_response_recovery_success PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorRecoveryMethods::test_handle_empty_response_recovery_failure PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_handle_cancellation_detected PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_handle_cancellation_not_detected PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_check_progress_making_progress PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_check_progress_not_making_progress PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_handle_force_completion_with_handler_analysis_task PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_handle_force_completion_with_handler_action_task PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorDelegationMethods::test_handle_force_completion_not_triggered PASSED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_completer_fails_uses_fallback FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_with_tool_failures_uses_format_message FAILED [  1%]
tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_provider_exception_propagates FAILED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_checkpoint_manager_property PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_checkpoint_manager_property_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_is_enabled_when_manager_exists PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_is_enabled_when_manager_is_none PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_with_description PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_with_tags PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_without_description PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_with_serialization_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_with_value_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_uses_session_id PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_save_checkpoint_with_empty_tags PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_success PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_with_os_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_with_io_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_with_key_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_with_value_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_restore_checkpoint_applies_state_correctly PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_creates_checkpoint PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_returns_none_when_not_needed PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_with_serialization_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_with_value_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_maybe_auto_checkpoint_uses_session_id PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_update_session_id PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_update_session_id_to_none PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_update_session_id_affects_subsequent_saves PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_checkpoint_workflow_save_and_restore PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_multiple_checkpoints_same_session PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinator::test_auto_checkpoint_after_tool_execution PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_save_checkpoint_propagates_get_state_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_restore_checkpoint_propagates_apply_state_error PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_save_checkpoint_with_complex_state PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_save_checkpoint_with_special_characters_in_description PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_restore_checkpoint_with_empty_checkpoint_id PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_restore_checkpoint_with_special_characters_in_id PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_rapid_auto_checkpoint_calls PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_session_update_between_operations PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_multiple_restores_in_sequence PASSED [  1%]
tests/unit/agent/coordinators/test_checkpoint_coordinator.py::TestCheckpointCoordinatorEdgeCases::test_save_and_restore_cycle PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestSettingsConfigProvider::test_get_config PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestSettingsConfigProvider::test_priority PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestEnvironmentConfigProvider::test_get_config_from_env PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestEnvironmentConfigProvider::test_get_config_empty_env PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_init_empty PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_init_with_providers PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_init_sorts_providers_by_priority PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_load_config_no_providers PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_load_config_merges_providers PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_load_config_with_override PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_load_config_caching PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_invalidate_cache PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_invalidate_all_cache PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_load_orchestrator_config PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_config_valid PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_config_missing_required_fields PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_config_invalid_temperature PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_config_invalid_max_tokens PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_config_warnings PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_validate_orchestrator_config PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_add_provider PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_add_provider_resorts PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_remove_provider PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_remove_nonexistent_provider PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinator::test_deep_merge PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestValidationResult::test_validation_result_success PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestValidationResult::test_validation_result_with_errors PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestValidationResult::test_validation_result_with_warnings PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestValidationResult::test_validation_result_with_metadata PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestOrchestratorConfig::test_orchestrator_config_defaults PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestOrchestratorConfig::test_orchestrator_config_custom_values PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestProfileConfigProvider::test_get_config_from_profile PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestProfileConfigProvider::test_get_config_profile_not_found PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestProfileConfigProvider::test_get_config_profile_not_found_with_suggestions PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestProfileConfigProvider::test_priority PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorErrorHandling::test_load_config_provider_error PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorErrorHandling::test_load_config_no_providers_returns_empty PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorErrorHandling::test_load_config_with_failing_and_working_providers PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorCreateProvider::test_create_provider_missing_provider_field PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorCreateProvider::test_create_provider_with_mock_registry PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestConfigCoordinatorCreateProvider::test_create_provider_with_profile_overrides PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_init PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_init_with_none_components PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_build_tool_access_context PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_build_tool_access_context_defaults PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_get_enabled_tools_with_controller PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_get_enabled_tools_without_controller PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_is_tool_enabled_with_controller PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_is_tool_enabled_without_controller PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_set_enabled_tools PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_set_enabled_tools_with_vertical_context PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_get_available_tools PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_get_available_tools_no_registry PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_detect_config_changes PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_detect_config_changes_no_changes PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_validate_mode_transition_safe PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_validate_mode_transition_restrictive_with_warnings PASSED [  1%]
tests/unit/agent/coordinators/test_config_coordinator.py::TestToolAccessConfigCoordinator::test_validate_mode_transition_restrictive_no_write_tools PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestBaseCompactionStrategy::test_can_apply_within_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestBaseCompactionStrategy::test_can_apply_exceeds_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestBaseCompactionStrategy::test_compact_raises_not_implemented PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestBaseCompactionStrategy::test_estimated_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_init_default PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_init_custom_reserve PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_compact_removes_oldest_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_compact_preserves_reserved_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_compact_calculates_tokens_saved PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestTruncationCompactionStrategy::test_estimated_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_init_empty PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_init_with_strategies PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_within_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_exceeds_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_uses_first_applicable_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_no_applicable_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_handles_strategy_errors PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_rebuild_context PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_estimate_token_count_from_context PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_estimate_token_count_from_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_is_within_budget_true PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_is_within_budget_false PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_is_within_budget_default_max_tokens PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_add_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_remove_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_remove_nonexistent_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_get_compaction_history PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_clear_compaction_history PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinator::test_compact_context_records_history PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_init_default PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_init_custom_params PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_can_apply_within_threshold PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_can_apply_exceeds_threshold PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_compact_summarizes_old_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_compact_preserves_recent_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_compact_not_enough_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSummarizationCompactionStrategy::test_estimated_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_init_default PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_init_custom_params PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_can_apply_exceeds_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_compact_removes_similar_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_compact_preserves_recent_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_compact_not_enough_messages PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestSemanticCompactionStrategy::test_estimated_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_init_default PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_init_custom_params PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_init_creates_sub_strategies PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_can_apply_exceeds_budget PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_compact_uses_semantic_first PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_compact_falls_back_to_truncation PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_compact_stops_early_if_successful PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_compact_calculates_total_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestHybridCompactionStrategy::test_estimated_savings PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinatorWithNewStrategies::test_coordinator_uses_summarization_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinatorWithNewStrategies::test_coordinator_uses_semantic_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinatorWithNewStrategies::test_coordinator_uses_hybrid_strategy PASSED [  1%]
tests/unit/agent/coordinators/test_context_coordinator.py::TestContextCoordinatorWithNewStrategies::test_coordinator_strategy_priority_order PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_messages_property_returns_conversation_messages PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_messages_property_returns_empty_list_when_no_messages PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_delegates_to_conversation PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_user_role PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_assistant_role PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_system_role PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_empty_content PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_long_content PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_special_characters PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_persists_to_memory_manager_when_enabled PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_does_not_persist_to_memory_manager_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_memory_manager_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_logs_user_prompt_to_usage_analytics PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_logs_assistant_response_to_usage_analytics PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_does_not_log_system_messages PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_without_usage_logger PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_add_message_with_memory_and_logging PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_reset_conversation_delegates_to_lifecycle_manager PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_reset_conversation_clears_all_state PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_reset_conversation_multiple_calls PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_conversation_flow_add_and_reset PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_multiple_messages_same_role PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinator::test_message_order_preserved PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_add_message_with_none_conversation_raises_error PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_add_message_with_unicode_content PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_add_message_with_newlines_and_tabs PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_messages_property_with_conversation_that_raises PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_add_message_when_conversation_raises PASSED [  1%]
tests/unit/agent/coordinators/test_conversation_coordinator.py::TestConversationCoordinatorEdgeCases::test_reset_conversation_when_lifecycle_manager_raises PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorInit::test_init_with_all_dependencies PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorInit::test_init_with_minimal_dependencies PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorInit::test_init_event_publishing_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_get_event_bus_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_get_event_bus_lazy_loading PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_get_event_bus_import_error_disables_publishing PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_publish_event_when_disabled PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_publish_event_with_no_event_bus PASSED [  1%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_publish_event_success PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEventBus::test_publish_event_handles_exceptions PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorUsageAnalytics::test_usage_analytics_property_returns_analytics PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorUsageAnalytics::test_usage_analytics_property_returns_none PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_success PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_with_no_integration PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_with_default_parameters PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_handles_exception PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_publishes_event PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorRecordIntelligentOutcome::test_record_intelligent_outcome_with_stuck_loop_detected PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_success PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_with_error PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_with_cancelled_session PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_with_no_rl_coordinator PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_quality_score_fast_response PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_quality_score_slow_response PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_with_vertical_context PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_publishes_event PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_handles_import_error PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorSendRLRewardSignal::test_send_rl_reward_signal_handles_attribute_error PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_with_all_components PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_with_no_components PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_with_usage_analytics_failure PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_with_sequence_tracker_failure PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_publishes_event PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_records_duration PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorFlushAnalytics::test_flush_analytics_partial_success PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorIntegrationScenarios::test_complete_evaluation_workflow PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorIntegrationScenarios::test_workflow_with_missing_dependencies PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorIntegrationScenarios::test_workflow_with_event_publishing_disabled PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEdgeCases::test_record_outcome_with_zero_quality_score PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEdgeCases::test_record_outcome_with_max_quality_score PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEdgeCases::test_send_rl_reward_signal_with_missing_session_attributes PASSED [  2%]
tests/unit/agent/coordinators/test_evaluation_coordinator.py::TestEvaluationCoordinatorEdgeCases::test_flush_analytics_concurrent_calls PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_initialization PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_extract_requirements PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_extract_empty_requirements PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_mark_observed_single PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_mark_observed_multiple PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_set_observed_files PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_required_files_get_set PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_required_outputs_get_set PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_read_session_operations PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_nudge_sent_get_set PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_are_all_required_files_observed PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_are_all_required_files_observed_empty PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_get_missing_files PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_get_file_observation_progress PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_get_file_observation_progress_empty PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_get_state PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_set_state PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_set_state_partial PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestFileContextCoordinator::test_reset PASSED [  2%]
tests/unit/agent/coordinators/test_file_context_coordinator.py::TestCreateFileContextCoordinator::test_factory_function PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_initialization PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_initialization_disabled PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_prepare_intelligent_request PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_prepare_intelligent_request_disabled PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_prepare_intelligent_request_no_qlearning PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_prepare_intelligent_request_exception PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_validate_intelligent_response PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_validate_with_expected_outcomes PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_validate_no_evaluation_coordinator PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_validate_exception PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_record_intelligent_outcome PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_record_outcome_no_metadata PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_record_outcome_no_evaluation_coordinator PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_record_outcome_exception PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_preload_embeddings_already_loaded PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_preload_embeddings_no_project_path PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_preload_embeddings_exception SKIPPED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_get_state PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_get_state_disabled PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_reset PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_is_intelligent_enabled PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_is_intelligent_enabled_false PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_is_qlearning_enabled PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_is_qlearning_enabled_false PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestIntelligentFeatureCoordinator::test_are_embeddings_preloaded PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestCreateIntelligentFeatureCoordinator::test_factory_function PASSED [  2%]
tests/unit/agent/coordinators/test_intelligent_feature_coordinator.py::TestCreateIntelligentFeatureCoordinator::test_factory_function_with_coordinators PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_initialization PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_initialization_with_components PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_memory_context_with_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_memory_context_without_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_memory_context_with_exception PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_session_stats_with_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_session_stats_without_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_session_stats_session_not_found PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_session_stats_with_exception PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_recent_sessions_with_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_recent_sessions_without_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_recent_sessions_with_exception PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_recover_session_success PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_recover_session_failure PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_recover_session_without_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_recover_session_with_exception PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_set_session_id PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_clear_session_id PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_is_enabled_true PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_is_enabled_no_manager PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_is_enabled_no_session PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_in_memory_messages_success PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_in_memory_messages_no_store PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestMemoryCoordinator::test_get_in_memory_messages_with_exception PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestCreateMemoryCoordinator::test_factory_with_defaults PASSED [  2%]
tests/unit/agent/coordinators/test_memory_coordinator.py::TestCreateMemoryCoordinator::test_factory_with_all_components PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingState::test_initial_state PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingState::test_reset_clears_all_state PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinator::test_initialization PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinator::test_factory_function_creates_coordinator PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinator::test_factory_function_with_custom_token_usage PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_finalize_stream_metrics_with_valid_metrics PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_finalize_stream_metrics_with_usage_data PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_finalize_stream_metrics_with_none_result PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_get_last_stream_metrics PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_get_streaming_metrics_summary PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_get_streaming_metrics_history PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamMetrics::test_get_streaming_metrics_history_with_custom_limit PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestCostTracking::test_get_session_cost_summary PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestCostTracking::test_get_session_cost_formatted PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestCostTracking::test_export_session_costs_json PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestCostTracking::test_export_session_costs_csv PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestCostTracking::test_export_session_costs_default_format PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_get_token_usage PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_get_token_usage_with_zero_tokens PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_get_token_usage_with_large_counts PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_reset_token_usage PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_update_cumulative_token_usage PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_update_cumulative_token_usage_partial_data PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_update_cumulative_token_usage_with_cache_tokens PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestTokenUsage::test_token_usage_tracking_flow PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestToolUsageStats::test_get_tool_usage_stats PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestToolUsageStats::test_get_tool_usage_stats_with_conversation_summary PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_record_tool_selection PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_record_tool_execution PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_on_tool_start PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_on_tool_complete PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_on_streaming_session_complete PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_record_first_token PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_init_stream_metrics PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_update_model_info PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_reset_stats PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_metrics_collector_property PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCollectorDelegation::test_session_cost_tracker_property PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_start_streaming_initializes_state PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_start_streaming_creates_new_cancel_event PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_stop_streaming_clears_state PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_streaming_returns_false_initially PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_streaming_returns_true_when_active PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_streaming_returns_false_after_stopping PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_request_cancellation_when_streaming PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_request_cancellation_when_not_streaming PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_request_cancellation_with_no_event PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_cancellation_requested_returns_false_initially PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_cancellation_requested_returns_true_after_request PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_is_cancellation_requested_returns_false_after_stopping PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_get_session_elapsed_time_returns_zero_when_not_streaming PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_get_session_elapsed_time_returns_elapsed_seconds PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_get_session_elapsed_time_after_stopping PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_cancel_event_property_returns_none_initially PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_cancel_event_property_returns_event_when_streaming PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_cancel_event_property_returns_none_after_stopping PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestStreamingStateManagement::test_complete_streaming_lifecycle PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinatorIntegration::test_complete_streaming_session_workflow PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinatorIntegration::test_token_usage_tracking_across_session PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinatorIntegration::test_metrics_collection_with_cancellation PASSED [  2%]
tests/unit/agent/coordinators/test_metrics_coordinator.py::TestMetricsCoordinatorIntegration::test_export_and_format_cost_workflow PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_initialization PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_middleware PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_middleware_returns_copy PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_middleware_empty PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_safety_patterns PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_safety_patterns_returns_copy PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_safety_patterns_empty PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_middleware_chain_initially_none PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_middleware_chain PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_build_middleware_chain_empty PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_build_middleware_chain_with_middleware PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_code_correction_middleware PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_code_correction_middleware_initially_none PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_vertical_middleware_storage PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_middleware_chain_storage PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_set_safety_patterns_storage PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_state PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_state_empty PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_reset PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_has_middleware PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_has_safety_patterns PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_has_code_correction PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_middleware_summary PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestMiddlewareCoordinator::test_get_middleware_summary_empty PASSED [  2%]
tests/unit/agent/coordinators/test_middleware_coordinator.py::TestCreateMiddlewareCoordinator::test_factory_function PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_current_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_mode_config PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_is_tool_allowed_build_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_is_tool_allowed_plan_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_is_tool_allowed_explore_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_tool_priority PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_tool_priority_default PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_exploration_multiplier PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_exploration_multiplier_plan_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_switch_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_switch_to_same_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_mode_status PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_resolve_shell_variant_build_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_resolve_shell_variant_plan_mode PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_system_prompt_addition PASSED [  2%]
tests/unit/agent/coordinators/test_mode_coordinator.py::TestModeCoordinator::test_get_available_modes PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_contribute_returns_prompt_for_matching_vertical PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_contribute_returns_empty_for_non_matching_vertical PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_contribute_handles_empty_context PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_contribute_handles_context_without_vertical PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestVerticalPromptContributor::test_default_priority_is_100 PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_with_callable_handler PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_with_static_string_handler PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_aggregates_multiple_handlers PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_skips_missing_context_keys PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_handles_handler_exceptions PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_contribute_returns_empty_for_empty_context PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_add_handler_adds_new_handler PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_remove_handler_removes_existing_handler PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_remove_handler_handles_missing_key PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestContextPromptContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_contribute_loads_project_context PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_contribute_returns_empty_when_disabled PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_contribute_returns_empty_when_no_project_file PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_contribute_caches_content PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_invalidate_cache_clears_cached_content PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestProjectInstructionsContributor::test_contribute_handles_loading_errors PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_contribute_returns_prompt_for_matching_mode PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_contribute_returns_empty_for_non_matching_mode PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_contribute_handles_empty_context PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_contribute_handles_context_without_mode PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_set_mode_prompt_adds_new_mode PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_set_mode_prompt_updates_existing_mode PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_get_supported_modes_returns_all_modes PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestModeAwareContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_contribute_returns_prompt_for_matching_stage PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_contribute_returns_empty_for_non_matching_stage PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_contribute_handles_empty_context PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_set_stage_prompt_adds_new_stage PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_get_supported_stages_returns_all_stages PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestStageAwareContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_with_async_function PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_with_sync_function PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_returns_empty_for_non_callable PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_handles_function_returning_none PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_propagates_exceptions PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_contribute_passes_context_to_function PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestDynamicPromptContributor::test_priority_returns_correct_value PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestPromptContributorIntegration::test_multiple_contributors_with_priorities PASSED [  2%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestPromptContributorIntegration::test_contributors_with_empty_contributions PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_contributors.py::TestPromptContributorIntegration::test_dynamic_and_static_contributors PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestBasePromptContributor::test_contribute_returns_empty_string PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestBasePromptContributor::test_priority PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestSystemPromptContributor::test_contribute PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestSystemPromptContributor::test_priority PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestTaskHintContributor::test_contribute PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestTaskHintContributor::test_contribute_unknown_task PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestTaskHintContributor::test_set_hint PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_init_empty PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_init_with_contributors PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_init_sorts_contributors_by_priority PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_system_prompt_no_contributors PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_system_prompt_merges_contributions PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_system_prompt_order_by_priority PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_system_prompt_caching PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_invalidate_cache PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_task_hint PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_task_hint_empty_context PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_task_hint_caches_by_task_type PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_invalidate_all_cache PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_add_contributor PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_add_contributor_resorts PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_remove_contributor PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_make_cache_key PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_contributor_error_handling PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_cache_ttl_expiration PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_cache_disabled PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_get_cache_stats PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_reset_cache_stats PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_make_cache_key_with_unjsonifiable_context PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_task_hint_with_error PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_task_hint_all_failing PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_build_system_prompt_multiple_contributors_with_errors PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_invalidate_cache_specific_context PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_remove_nonexistent_contributor PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptCoordinator::test_empty_prompt_not_cached PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_init PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_init_with_tool_calling_caps PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_build_system_prompt_with_adapter_small_context PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_build_system_prompt_with_adapter_large_context PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_build_system_prompt_with_adapter_emits_rl_event_when_enabled PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_build_system_prompt_with_adapter_rl_hooks_unavailable PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_build_system_prompt_with_adapter_rl_event_failure PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_emit_prompt_used_event_detects_local_provider PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_emit_prompt_used_event_detects_cloud_provider PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_emit_prompt_used_event_analyzes_prompt_content PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_emit_prompt_used_event_disabled PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_get_thinking_disabled_prompt_with_prefix PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_get_thinking_disabled_prompt_without_prefix PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_get_thinking_disabled_prompt_no_attribute PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestPromptBuilderCoordinator::test_set_tool_calling_caps PASSED [  3%]
tests/unit/agent/coordinators/test_prompt_coordinator.py::TestIPromptBuilderCoordinator::test_protocol_methods_exist PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorInit::test_init_with_default_config PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorInit::test_init_with_custom_config PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorInit::test_init_post_switch_hooks_initialized_empty PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_provider_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_model_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_provider_name_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_tool_adapter_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_capabilities_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorProperties::test_switch_count_property PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_provider_success PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_provider_with_custom_kwargs PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_provider_uses_current_model_when_not_specified PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_provider_failure_returns_false PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_provider_exception_handling PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_model_success PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_model_failure_returns_false PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_switch_model_exception_handling PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderSwitching::test_get_current_provider_info PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_start_health_monitoring PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_stop_health_monitoring PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_get_provider_health_with_no_provider PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_get_provider_health_with_healthy_provider PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_get_provider_health_with_unhealthy_provider PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestHealthMonitoring::test_get_healthy_providers PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_with_retry_after_attribute PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_with_retry_after_exceeding_max PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_with_invalid_retry_after PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_error_message_try_again PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_error_message_retry_after PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_error_message_wait PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_error_message_seconds_at_end PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_error_message_just_number PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_from_response_headers PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_wait_time_fallback_to_default PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_track_rate_limit_increments_count PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_track_rate_limit_multiple_times PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimiting::test_get_rate_limit_stats PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestCapabilityDiscovery::test_discover_capabilities_success PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestCapabilityDiscovery::test_discover_capabilities_caches_result PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestCapabilityDiscovery::test_discover_capabilities_with_custom_provider_and_model PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestCapabilityDiscovery::test_discover_capabilities_falls_back_to_config_on_error PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestCapabilityDiscovery::test_discover_capabilities_returns_none_when_no_provider PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestPostSwitchHooks::test_register_post_switch_hook PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestPostSwitchHooks::test_notify_post_switch_hooks_calls_all_hooks PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestPostSwitchHooks::test_notify_post_switch_hooks_handles_exceptions PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestPostSwitchHooks::test_notify_post_switch_hooks_with_no_state PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestLifecycle::test_close_stops_health_monitoring PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestLifecycle::test_close_closes_provider_manager PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestFactoryFunction::test_create_provider_coordinator PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestFactoryFunction::test_create_provider_coordinator_with_custom_config PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimitInfo::test_rate_limit_info_creation PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestRateLimitInfo::test_rate_limit_info_defaults PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorConfig::test_config_with_defaults PASSED [  3%]
tests/unit/agent/coordinators/test_provider_coordinator.py::TestProviderCoordinatorConfig::test_config_with_custom_values PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestProcessedResponse::test_default_values PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestProcessedResponse::test_has_tool_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestProcessedResponse::test_is_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestChunkProcessResult::test_default_values PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestToolCallValidationResult::test_default_values PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorConfig::test_default_config PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorConfig::test_custom_config PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_init PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_sanitize_response PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_sanitize_response_disabled PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_is_garbage_content PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_is_valid_tool_name PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_parse_and_validate_tool_calls_no_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_parse_and_validate_tool_calls_with_filtering PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_normalize_tool_call_arguments PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_normalize_tool_call_arguments_literal_eval PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_normalize_tool_call_arguments_none PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_process_stream_chunk_valid_content PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_process_stream_chunk_garbage_content PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_process_stream_chunk_max_garbage_reached PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_process_stream_chunk_reset_on_valid PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_aggregate_chunks PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_aggregate_chunks_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_aggregate_stream_chunks PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_is_content_meaningful PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinator::test_format_response_for_display PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorIntegration::test_full_response_processing_workflow PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_aggregate_stream_chunks_default_attr PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_aggregate_stream_chunks_custom_attr PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_aggregate_stream_chunks_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_aggregate_stream_chunks_no_content_attr PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_extract_remaining_content_no_tool_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_extract_remaining_content_with_tool_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_extract_remaining_content_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_normalize_tool_call_arguments_invalid_string PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_parse_and_validate_tool_calls_no_adapter PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_parse_and_validate_tool_calls_non_dict_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_parse_and_validate_tool_calls_empty_enabled_tools PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_process_stream_chunk_no_content_attr PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_process_stream_chunk_empty_content PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_try_extract_tool_calls_disabled PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_is_garbage_content_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_sanitize_response_empty PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_format_response_for_display_no_tool_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorExtendedMethods::test_format_response_for_display_tool_calls_no_name PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_resolve_shell_variant_internal PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_resolve_shell_variant_internal_not_shell_alias PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_resolve_shell_variant_internal_no_resolver PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_is_tool_enabled_internal_with_set PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_is_tool_enabled_internal_with_checker PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_is_tool_enabled_internal_with_registry PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_is_tool_enabled_internal_registry_error PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_is_tool_enabled_internal_no_fallbacks PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_parse_and_validate_with_resolution_shell_alias PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_parse_and_validate_with_resolution_filters_disabled PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_parse_and_validate_with_resolution_no_tool_calls PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorWithResolution::test_parse_and_validate_with_resolution_normalizes_arguments PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_is_content_meaningful_whitespace_only PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_is_content_meaningful_custom_threshold PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_aggregate_chunks_all_none PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_aggregate_chunks_with_empty_strings PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_parse_and_validate_tool_calls_all_filtered PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_process_stream_chunk_already_garbage_detected PASSED [  3%]
tests/unit/agent/coordinators/test_response_coordinator.py::TestResponseCoordinatorEdgeCases::test_process_stream_chunk_exactly_max_garbage PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_returns_keyword_tool PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_returns_semantic_tool PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_returns_both_tools_for_hybrid PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_with_transformed_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_with_empty_patterns PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_with_multiple_patterns PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_with_varying_confidence PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_delegates_to_router PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_handles_special_characters PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_handles_unicode PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_route_search_query_with_long_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_returns_keyword PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_returns_semantic PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_returns_both_for_hybrid PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_convenience_method PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_calls_route_search_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_with_empty_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_search_tool_with_whitespace PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_tool_mapping_covers_all_search_types PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_coordinator_initialization_with_search_router PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_coordinator_requires_search_router PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_multiple_queries_same_coordinator PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinator::test_get_recommended_tool_multiple_calls PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_with_none_router PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_when_router_raises_exception PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_with_unmapped_search_type PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_get_recommended_tool_when_router_raises PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_preserves_all_route_fields PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_with_newlines_in_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_route_search_query_with_tabs_in_query PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorEdgeCases::test_concurrent_route_calls PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorToolMapping::test_tool_map_is_complete PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorToolMapping::test_tool_map_values PASSED [  3%]
tests/unit/agent/coordinators/test_search_coordinator.py::TestSearchCoordinatorToolMapping::test_tool_map_is_class_attribute PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionInfo::test_default_initialization PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionInfo::test_custom_initialization PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionInfo::test_to_dict PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionInfo::test_from_dict PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionInfo::test_from_dict_with_defaults PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCostSummary::test_default_initialization PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCostSummary::test_custom_initialization PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCostSummary::test_to_dict PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_initialization_with_required_dependencies PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_initialization_with_all_dependencies PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_create_session_generates_session_id PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_create_session_with_custom_session_id PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_create_session_resets_session_state PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_create_session_with_memory_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_create_session_memory_manager_failure PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_end_session_marks_inactive PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_end_session_with_memory_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_end_session_without_current_session PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_end_session_memory_manager_failure PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_reset_session PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_reset_session_preserve_token_usage PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_reset_session_without_lifecycle_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_reset_session_updates_activity_timestamp PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_recover_session_success PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_recover_session_without_memory_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_recover_session_failure PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_session_id_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_memory_session_id_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_session_state_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_is_active_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_tool_calls_used_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_remaining_budget_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_is_budget_exhausted_property PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_info PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_stats PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_stats_with_memory_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_stats_memory_manager_failure PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_summary PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_cost_summary PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_cost_summary_with_tracker PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_cost_formatted PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_session_cost_formatted_with_tracker PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_save_checkpoint_success PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_save_checkpoint_without_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_save_checkpoint_io_error PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_save_checkpoint_serialization_error PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_restore_checkpoint_success PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_restore_checkpoint_without_manager PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_restore_checkpoint_io_error PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_restore_checkpoint_invalid_data PASSED [  3%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_maybe_auto_checkpoint PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_maybe_auto_checkpoint_without_manager PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_maybe_auto_checkpoint_error_handling PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_checkpoint_state PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_apply_checkpoint_state PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_recent_sessions_success PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_recent_sessions_without_memory_manager PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_recent_sessions_with_limit PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_recent_sessions_handles_message_count PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_recent_sessions_error_handling PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_token_usage PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_update_token_usage PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_update_token_usage_with_defaults PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_reset_token_usage PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_with_memory_manager PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_without_memory_manager PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_with_fallback PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_converts_message_objects PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_without_session PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_get_memory_context_empty_fallback PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_repr PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinator::test_repr_without_session PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestCreateSessionCoordinatorFactory::test_factory_with_required_dependencies PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestCreateSessionCoordinatorFactory::test_factory_with_all_dependencies PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinatorIntegration::test_complete_session_lifecycle PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinatorIntegration::test_session_reset_flow PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinatorIntegration::test_multiple_sessions_sequential PASSED [  4%]
tests/unit/agent/coordinators/test_session_coordinator.py::TestSessionCoordinatorIntegration::test_checkpoint_restore_flow PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateScope::test_scope_values PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateChange::test_state_change_creation PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateChange::test_state_change_with_changes PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateChange::test_to_dict PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_init PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_init_without_conversation_state PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_all_scopes PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_session_only PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_without_metadata PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_set_state PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_transition_to PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_transition_to_without_conversation_state PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_transition_to_string PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_stage PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_stage_without_conversation_state PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_stage_tools PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_session_state_delegation_properties PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_tool_budget_property PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_tool_budget_setter PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_is_budget_exhausted PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_remaining_budget PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_record_tool_call PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_increment_tool_calls PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_record_file_read PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_subscribe PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_unsubscribe PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_unsubscribe_all PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_on_state_change_decorator PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_history PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_history_with_limit PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_changes_count PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_clear_state_history PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_get_state_summary PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestStateCoordinator::test_repr PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestCreateStateCoordinator::test_create_basic PASSED [  4%]
tests/unit/agent/coordinators/test_state_coordinator_new.py::TestCreateStateCoordinator::test_create_with_all_params PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_delegates_to_mw_coordinator PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_with_different_task_types PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_with_different_complexity_levels PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_with_different_modes PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_returns_coordination_suggestion PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_includes_team_recommendations PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_with_empty_recommendations PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_suggestions_passes_correct_mode_from_coordinator PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_stores_in_orchestrator PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_with_empty_dict PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_with_single_team PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_overrides_existing_specs PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_with_multiple_teams PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_set_team_specs_preserves_spec_reference PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_specs_returns_stored_specs PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_specs_returns_empty_dict_when_not_set PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_specs_returns_same_reference PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_specs_after_set_team_specs PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_get_team_specs_does_not_modify_original PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_full_workflow_set_get_suggestions PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_multiple_set_and_get_cycles PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinator::test_team_spec_isolation_between_coordinators PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_suggestions_with_none_task_type PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_suggestions_with_none_complexity PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_suggestions_with_empty_strings PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_suggestions_when_mw_coordinator_raises PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_set_team_specs_with_none PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_specs_when_specs_is_none PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_specs_with_special_characters_in_team_names PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_get_team_suggestions_with_unicode_task_type PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_set_team_specs_with_large_number_of_teams PASSED [  4%]
tests/unit/agent/coordinators/test_team_coordinator.py::TestTeamCoordinatorEdgeCases::test_multiple_suggestions_with_different_params PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorInit::test_init_with_default_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorInit::test_init_with_custom_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorInit::test_init_with_mode_controller PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorInit::test_init_without_tool_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_registered_tool_default_allow PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_unregistered_tool_default_allow PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_unregistered_tool_strict_mode PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_unregistered_tool_no_default_allow PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_with_session_enabled_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_with_mode_controller_disallowed PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_with_mode_controller_allow_all PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_layer_priority_mode_first PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_layer_priority_session_second PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_layer_priority_registry_third PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_with_context_none PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_empty_tool_name PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorCheckAccess::test_check_access_case_sensitive PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIsToolEnabled::test_is_tool_enabled_allowed PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIsToolEnabled::test_is_tool_enabled_disallowed_by_mode PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIsToolEnabled::test_is_tool_enabled_with_context PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetEnabledTools::test_get_enabled_tools_all_available PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetEnabledTools::test_get_enabled_tools_session_restricted PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetEnabledTools::test_get_enabled_tools_mode_allow_all PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetEnabledTools::test_get_enabled_tools_empty_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetEnabledTools::test_get_enabled_tools_with_context PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetAvailableTools::test_get_available_tools_returns_set PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetAvailableTools::test_get_available_tools_empty_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetAvailableTools::test_get_available_tools_delegates_to_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorGetAvailableTools::test_get_available_tools_returns_copy PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_updates_session_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_empty_set PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_propagates_to_tool_selector PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_no_tool_selector PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_overwrites_previous PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetEnabledTools::test_set_enabled_tools_with_duplicate_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorClearSessionRestrictions::test_clear_session_restrictions_resets_to_none PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorClearSessionRestrictions::test_clear_session_restrictions_when_already_none PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorClearSessionRestrictions::test_clear_session_restrictions_after_multiple_sets PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetModeController::test_set_mode_controller_updates_controller PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetModeController::test_set_mode_controller_overwrites_previous PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorSetModeController::test_set_mode_controller_to_none PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorBuildContext::test_build_context_without_mode_controller PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorBuildContext::test_build_context_with_mode_controller PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorBuildContext::test_build_context_with_session_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorBuildContext::test_build_context_missing_mode_attributes PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorFactory::test_factory_with_defaults PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorFactory::test_factory_with_default_allow_all_false PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorFactory::test_factory_with_mode_controller PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorFactory::test_factory_creates_configured_coordinator PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestAccessDecisionDataclass::test_access_decision_creation PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestAccessDecisionDataclass::test_access_decision_defaults PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestAccessDecisionDataclass::test_access_decision_immutability PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessContextDataclass::test_context_creation_with_all_fields PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessContextDataclass::test_context_defaults PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessContextDataclass::test_context_empty_disallowed_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessConfigDataclass::test_config_defaults PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessConfigDataclass::test_config_custom_values PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessConfigDataclass::test_config_to_dict PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessConfigDataclass::test_config_validate PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_build_mode_allows_all_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_plan_mode_restricts_dangerous_tools PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_session_restrictions_override_mode PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_mode_switching_changes_access PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_access_decision_reasons_provided PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_multiple_coordinators_independent_state PASSED [  4%]
tests/unit/agent/coordinators/test_tool_access_coordinator.py::TestToolAccessCoordinatorIntegration::test_clear_restrictions_restores_mode_behavior PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_canonical_name_direct PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_with_result_for_canonical_name PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_unknown_tool_returns_itself PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_with_result_for_unknown_tool PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_legacy_file_operation_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_legacy_search_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_legacy_web_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_legacy_execution_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_legacy_git_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_with_result_for_legacy_name PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_all_legacy_mappings_are_valid PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_is_shell_alias_for_shell_variants PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_is_shell_alias_for_non_shell_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_is_legacy_name_for_known_legacy PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_is_legacy_name_for_canonical_names PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_alias_to_full_shell_when_enabled PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_with_result_for_full_shell PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_to_readonly_when_full_disabled PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_with_result_for_readonly PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_when_both_disabled PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_shell_readonly_directly PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_uses_registry_for_shell_check PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_checks_readonly_when_full_disabled PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolve_with_registry_disabled PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_set_access_check_updates_resolver PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_set_prefer_readonly_updates_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_set_prefer_readonly_false PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_config_prefer_readonly_initialization PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_add_legacy_mapping PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_add_legacy_mapping_updates_class PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_add_legacy_mapping_with_existing_key PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_create_tool_alias_resolver_default PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_create_tool_alias_resolver_with_prefer_readonly PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_create_tool_alias_resolver_with_access_check PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_create_tool_alias_resolver_with_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_create_tool_alias_resolver_with_all_parameters PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_get_canonical_name_for_known_tool PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_get_canonical_name_fallback_on_exception PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_complete_resolution_flow_legacy_then_shell PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolution_with_result_contains_all_fields PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_multiple_resolvers_independent_state PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolver::test_resolver_with_custom_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_empty_string PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_with_special_characters PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_case_sensitivity PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_unicode_tool_name PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_is_shell_alias_empty_string PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_is_legacy_name_empty_string PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_add_legacy_mapping_empty_strings PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_with_none_access_check PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_resolve_with_none_registry PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_set_access_check_to_none PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasResolverEdgeCases::test_factory_function_with_none_parameters PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestResolutionResult::test_resolution_result_creation PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestResolutionResult::test_resolution_result_default_is_legacy PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestResolutionResult::test_resolution_result_immutability_attempt PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasConfig::test_config_default_values PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasConfig::test_config_custom_values PASSED [  4%]
tests/unit/agent/coordinators/test_tool_alias_resolver.py::TestToolAliasConfig::test_config_inherits_base_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConfig::test_default_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConfig::test_custom_config PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_initial_budget PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_tool_calls_used_tracking PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_property PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_with_multiplier PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_enforcement PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_reset PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_status PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_budget_status_after_calls PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_set_budget PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_max_budget_enforcement PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinator::test_disable_budget_tracking PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestBudgetStatus::test_budget_status_creation PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestBudgetStatus::test_budget_status_exhausted PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestBudgetManagerIntegration::test_coordinator_delegates_to_budget_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestBudgetManagerIntegration::test_coordinator_fallback_without_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorBudgetSetter::test_budget_setter_without_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorBudgetSetter::test_budget_setter_with_negative_value PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorBudgetSetter::test_budget_setter_with_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorBudgetUsed::test_budget_used_without_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorBudgetUsed::test_budget_used_with_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorMultiplier::test_budget_multiplier_property PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorMultiplier::test_set_multiplier_updates_budget PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorMultiplier::test_set_multiplier_tracks_history PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorMultiplier::test_set_multiplier_with_fraction PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorMultiplier::test_set_multiplier_with_large_value PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorGetRemaining::test_get_remaining_budget_without_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorGetRemaining::test_get_remaining_budget_with_manager PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorGetRemaining::test_get_remaining_budget_when_exhausted PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorGetRemaining::test_get_remaining_budget_clamps_to_zero PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_with_custom_amount PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_with_zero_amount PASSED [  4%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_with_negative_amount PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_tracks_total_consumed_in_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_with_warning_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_multiple_warnings PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_warning_without_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorConsume::test_consume_with_manager PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorReset::test_reset_without_new_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorReset::test_reset_with_new_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorReset::test_reset_with_manager PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorReset::test_reset_increments_reset_count PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorStats::test_get_stats_returns_current_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorStats::test_get_stats_includes_current_budget_used PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorStats::test_clear_stats_resets_all_statistics PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorStats::test_clear_stats_does_not_affect_budget_state PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorStats::test_warning_count_increments PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorFactory::test_factory_with_default_params PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorFactory::test_factory_with_custom_params PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorFactory::test_factory_with_budget_manager PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorIntegration::test_full_budget_lifecycle PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorIntegration::test_budget_exhaustion_detection PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorIntegration::test_utilization_calculation PASSED [  5%]
tests/unit/agent/coordinators/test_tool_budget_coordinator.py::TestToolBudgetCoordinatorIntegration::test_utilization_with_zero_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_initialization PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_initialization_with_console PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_check_tool_calling_capability_supported PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_check_tool_calling_capability_not_supported PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_check_tool_calling_capability_no_provider PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_check_tool_calling_capability_empty_provider PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_log_capability_warning_first_time PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_log_capability_warning_subsequent_times PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_log_capability_warning_warn_once_disabled PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_supported_models PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_supported_models_with_exception PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_capability_info_full PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_capability_info_minimal PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_capability_info_with_exception PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_should_use_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_validate_capability_tool_calling_supported PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_validate_capability_tool_calling_not_supported PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_validate_capability_unknown_capability PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_validate_capability_no_provider PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_capable_models_for_tool_calling PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestToolCapabilityCoordinator::test_get_capable_models_for_other_capability PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestCreateToolCapabilityCoordinator::test_factory_with_defaults PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestCreateToolCapabilityCoordinator::test_factory_with_console PASSED [  5%]
tests/unit/agent/coordinators/test_tool_capability_coordinator.py::TestCreateToolCapabilityCoordinator::test_factory_with_warn_once_false PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorInit::test_initialization_with_defaults PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorInit::test_initialization_with_custom_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorInit::test_initialization_creates_specialized_coordinators PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorInit::test_initialization_with_optional_dependencies PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorInit::test_initialization_with_callbacks PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_budget_property_delegates_to_budget_coordinator PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_budget_setter_delegates_to_budget_coordinator PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_budget_used_property PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_get_remaining_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_consume_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_consume_budget_default_amount PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_reset_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_reset_budget_with_custom_value PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_set_budget_multiplier PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_is_budget_exhausted PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorBudgetManagement::test_execution_count_property PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolAccess::test_get_enabled_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolAccess::test_set_enabled_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolAccess::test_is_tool_enabled PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolAccess::test_get_available_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolAccess::test_set_enabled_tools_propagates_to_selector PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorAliasResolution::test_resolve_tool_alias PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorAliasResolution::test_resolve_shell_alias PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_select_tools_delegates_to_selector PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_select_tools_with_max_tools_override PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_select_tools_without_selector PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_select_tools_calls_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_get_selection_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_get_selection_stats_empty PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorToolSelection::test_clear_selection_history PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_calls_delegates_to_pipeline PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_calls_consumes_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_calls_with_context PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_with_retry_success PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_with_retry_cache_hit PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_with_retry_failure PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_with_retry_attempts PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorExecution::test_execute_tool_with_retry_exception PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_empty_list PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_invalid_structure PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_missing_name PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_disabled_tool PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_budget_exhausted PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_string_arguments PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorHandleToolCalls::test_handle_tool_calls_with_formatter PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorParsing::test_parse_tool_calls_without_adapter PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorParsing::test_normalize_tool_arguments_without_normalizer PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorStatistics::test_get_execution_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorStatistics::test_get_tool_usage_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorStatistics::test_clear_failed_signatures PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorDependencyInjection::test_set_mode_controller PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorDependencyInjection::test_set_tool_planner PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorDependencyInjection::test_set_orchestrator_reference PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorFactory::test_create_tool_coordinator PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorEdgeCases::test_build_tool_access_context_without_mode_controller PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorEdgeCases::test_build_tool_access_context_with_mode_controller PASSED [  5%]
tests/unit/agent/coordinators/test_tool_coordinator.py::TestToolCoordinatorEdgeCases::test_select_tools_exception_handling PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionConfig::test_default_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionConfig::test_custom_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolCallResult::test_successful_result PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolCallResult::test_failed_result PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolCallResult::test_cached_result PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolCallResult::test_skipped_result PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_default_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_custom_initial_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_get_success_rate_empty PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_get_success_rate_all_success PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_get_success_rate_mixed PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_get_avg_execution_time_empty PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionStats::test_get_avg_execution_time PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestExecutionContext::test_default_context PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestExecutionContext::test_context_with_values PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolAccessDecision::test_allowed_decision PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolAccessDecision::test_denied_decision_with_reason PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_minimal PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_with_cache PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_with_sanitizer_and_formatter PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_with_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_with_callbacks PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorInit::test_init_with_tool_access_checker PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_empty_tool_calls PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_single_tool_call_success PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_multiple_tool_calls PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_tool_calls_with_context PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_tool_calls_budget_exhausted PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_tool_calls_invalid_structure PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorHandleToolCalls::test_handle_tool_calls_missing_name PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorValidation::test_validate_invalid_tool_name PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorValidation::test_validate_tool_access_denied PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorValidation::test_validate_tool_not_enabled PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorRetryLogic::test_retry_on_transient_error PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorRetryLogic::test_no_retry_on_permanent_error PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorRetryLogic::test_retry_exhausted PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorRetryLogic::test_retry_disabled PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCache::test_cache_hit PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCache::test_cache_miss PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCache::test_cache_invalidation_on_write_file PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCache::test_cache_invalidation_on_execute_bash PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_stats_track_successful_calls PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_stats_track_failed_calls PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_stats_track_budget_consumption PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_stats_track_execution_times PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_stats_track_failed_signatures PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_reset_stats PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_reset_stats_with_custom_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_clear_failed_signatures PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_consume_budget PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorStatistics::test_consume_budget_triggers_warning_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCallbacks::test_on_tool_start_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCallbacks::test_on_tool_complete_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorCallbacks::test_on_budget_warning_callback PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorArgumentNormalization::test_normalize_json_string_arguments PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorArgumentNormalization::test_normalize_dict_arguments PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorArgumentNormalization::test_normalize_none_arguments PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorArgumentNormalization::test_adapter_normalization_applied PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorResultFormatting::test_format_tool_output_default PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorResultFormatting::test_format_tool_output_custom_formatter PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorFailedSignatureTracking::test_skip_repeated_failing_call PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorFailedSignatureTracking::test_different_arguments_not_skipped PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorFailedSignatureTracking::test_successful_call_clears_signature PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorFactory::test_create_tool_execution_coordinator PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorFactory::test_create_tool_execution_coordinator_with_cache PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorEdgeCases::test_handle_exception_during_execution PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorEdgeCases::test_mixed_success_and_failure PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorEdgeCases::test_concurrent_execution PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorEdgeCases::test_get_execution_stats_returns_copy PASSED [  5%]
tests/unit/agent/coordinators/test_tool_execution_coordinator.py::TestToolExecutionCoordinatorEdgeCases::test_tool_name_resolution PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_initialization PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_initialization_with_all_components PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_successful_tool_execution PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_with_cache_hit PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_retry_on_failure PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_non_retryable_error PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_max_attempts_reached PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_timeout_error PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_connection_error PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_tool_execution_with_task_completion PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_cache_invalidation_on_write PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_cache_namespace_clear_on_bash PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_calculate_backoff PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_get_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestToolRetryCoordinator::test_update_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestCreateToolRetryCoordinator::test_factory_with_defaults PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestCreateToolRetryCoordinator::test_factory_with_custom_config PASSED [  5%]
tests/unit/agent/coordinators/test_tool_retry_coordinator.py::TestCreateToolRetryCoordinator::test_factory_with_all_components PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorInit::test_init_with_tool_registry PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorInit::test_init_stores_registry_reference PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorInit::test_keyword_sets_are_defined PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorInit::test_tool_patterns_are_defined PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_empty_query_returns_none PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_whitespace_query_returns_none PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_none_query_returns_none PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_semantic_search_indicators PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_file_pattern_indicators PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_web_search_indicators PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_code_search_defaults_to_grep PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_generic_query_returns_none PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_case_insensitive_matching PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_with_context_parameter PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestGetRecommendedSearchTool::test_multiple_indicators_priority PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_routes_to_recommended_tool_if_available PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_falls_back_to_grep_if_recommended_unavailable PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_falls_back_to_ls_if_grep_unavailable PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_returns_first_available_tool_as_last_resort PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_returns_grep_as_default_when_no_tools_available PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_with_multiple_available_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestRouteSearchQuery::test_with_custom_tool_names PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_empty_prompt_returns_empty_set PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_none_prompt_returns_empty_set PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_grep_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_ls_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_read_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_write_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_web_search_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_semantic_search_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_code_search_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_bash_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_detect_shell_mention PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_multiple_tools_in_one_prompt PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_case_insensitive_detection PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_filters_by_available_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_no_filtering_when_available_tools_none PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_word_boundary_matching PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestDetectMentionedTools::test_partial_tool_names PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_empty_task_returns_analysis PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_none_task_returns_analysis PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_analysis_keywords_detected PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_action_keywords_detected PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_creation_keywords_detected PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_creation_takes_priority_over_action PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_action_takes_priority_over_analysis PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_case_insensitive_classification PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_multiple_keywords_same_category PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_mixed_keywords_selects_dominant PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskKeywords::test_conversation_history_parameter_accepted PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_without_context_delegates_to_keyword_classification PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_with_executing_stage_and_action_keywords PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_with_recent_write_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_with_recent_non_write_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_analysis_task_not_affected_by_recent_tools PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_stage_name_case_insensitive PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestClassifyTaskWithContext::test_context_with_all_fields PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_empty_message_returns_false PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_whitespace_message_returns_false PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_explicit_tool_mention_returns_true PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_tool_keywords_return_true PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_question_without_tool_keywords_returns_false PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_question_with_tool_keywords_returns_true PASSED [  5%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_case_insensitive_keyword_matching PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_model_supports_tools_parameter PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_generic_message_without_keywords_returns_false PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_message_with_multiple_keywords PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestShouldUseTools::test_imperative_commands PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_empty_prompt_returns_empty_set PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_none_prompt_returns_empty_set PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_extract_unix_file_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_extract_windows_file_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_extract_relative_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_extract_files_with_extensions PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_filters_long_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_requires_path_separator_or_extension PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_quoted_file_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_multiple_files_in_prompt PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredFiles::test_files_with_directories PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_empty_prompt_returns_empty_set PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_none_prompt_returns_empty_set PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_save_to_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_write_to_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_output_to_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_store_in_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_export_as_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_create_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_generate_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_extract_produce_pattern PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_case_insensitive_matching PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_multiple_outputs_in_prompt PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_quoted_outputs PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestExtractRequiredOutputs::test_output_with_path PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorIntegration::test_complete_tool_selection_workflow PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorIntegration::test_context_aware_selection PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorIntegration::test_search_and_extraction_workflow PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_unicode_in_queries PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_special_characters_in_file_paths PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_very_long_query PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_mixed_tool_mentions PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_nested_keywords PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_ambiguous_queries PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_empty_available_tools_set PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_single_available_tool PASSED [  6%]
tests/unit/agent/coordinators/test_tool_selection_coordinator.py::TestToolSelectionCoordinatorEdgeCases::test_mixed_case_stage_names PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_validation_result_initialization PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_validation_result_with_errors PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_add_error_updates_validity PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_add_warning_preserves_validity PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_add_multiple_errors PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationResult::test_add_multiple_warnings PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_initialization_with_defaults PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_quality_threshold_default PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_quality_threshold_custom PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_quality_threshold_exact PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_grounding_threshold_default PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_grounding_threshold_custom PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_meets_grounding_threshold_exact PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestIntelligentValidationResult::test_all_fields_populated PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestToolCallValidationResult::test_initialization_with_defaults PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestToolCallValidationResult::test_initialization_with_values PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestContextValidationResult::test_initialization_with_defaults PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestContextValidationResult::test_initialization_with_values PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorConfig::test_default_configuration PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorConfig::test_custom_configuration PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_config_property PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_config_property_custom PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_intelligent_integration_property PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_context_manager_property PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_response_coordinator_property PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_success PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_below_threshold PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_short_response PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_empty_response PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_whitespace_only PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_disabled_integration PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_disabled_in_config PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_integration_returns_none PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_exception_handled PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_partial_data PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_intelligent_response_custom_min_length PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_call_structure_valid_dict PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_call_structure_missing_name PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_call_structure_not_dict PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_call_structure_list PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_call_structure_none PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_name_valid PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_name_empty PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_name_with_coordinator PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_name_without_coordinator PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_tool_name_invalid_characters PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_none PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_empty_list PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_valid PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_filters_invalid_structure PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_filters_invalid_names PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_with_response_coordinator PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_response_coordinator_exception PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_and_filter_tool_calls_disabled_in_config PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_no_manager PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_disabled_in_config PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_no_overflow PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_with_overflow PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_zero_max PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_check_context_overflow_exception PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_get_max_context_chars_with_manager PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_get_max_context_chars_without_manager PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_get_max_context_chars_exception PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_with_metrics_coordinator PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_with_metrics_coordinator_is_cancelled_method PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_with_cancel_event PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_metrics_coordinator_exception PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_cancel_event_exception PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_is_cancelled_no_cancel_mechanisms PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_query_valid PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_query_empty PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_query_none PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_query_not_string PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_query_long_warning PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_task_type_valid PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_task_type_empty PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_task_type_unknown PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_task_type_case_insensitive PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_task_type_all_known_types PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_all_valid PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_invalid_query PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_with_warnings PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_context_overflow PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_cancelled PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_validate_request_multiple_issues PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_coordinator_initialization_logging PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinator::test_coordinator_with_all_dependencies PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_validate_tool_name_with_unicode PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_validate_query_with_unicode PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_validate_tool_call_with_nested_dict PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_validate_and_filter_tool_calls_all_filtered PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_validation_result_metadata_operations PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_intelligent_validation_result_threshold_methods PASSED [  6%]
tests/unit/agent/coordinators/test_validation_coordinator.py::TestValidationCoordinatorEdgeCases::test_context_validation_result_utilization_calculation PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_initialization_with_workflow_registry PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_workflow_registry_property PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_register_default_workflows_calls_discovery PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_register_default_workflows_returns_count PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_register_default_workflows_with_zero_workflows PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_register_default_workflows_with_discovery_error PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_register_default_workflows_with_real_registry PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_list_workflows_returns_empty_list_when_no_workflows PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_list_workflows_returns_workflow_names PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_list_workflows_with_single_workflow PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_list_workflows_with_many_workflows PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_list_workflows_returns_new_list_each_time PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_has_workflow_returns_true_when_workflow_exists PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_has_workflow_returns_false_when_workflow_not_exists PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_has_workflow_with_empty_registry PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_has_workflow_with_multiple_workflows PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_has_workflow_case_sensitive PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_get_workflow_count_returns_zero_when_empty PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_get_workflow_count_returns_correct_count PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_get_workflow_count_with_single_workflow PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_get_workflow_count_with_many_workflows PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinator::test_get_workflow_count_changes_after_registration PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorIntegration::test_full_workflow_registration_lifecycle PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorIntegration::test_multiple_workflow_registration_and_listing PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorIntegration::test_workflow_operations_with_real_registry PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_workflow_registry_with_special_characters_in_names PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_workflow_names_with_unicode PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_list_workflows_returns_copy_not_reference PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_register_default_workflows_multiple_calls PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_has_workflow_with_empty_string PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_list_workflows_with_empty_registry_keys PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_register_default_workflows_with_exception_during_registration PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorEdgeCases::test_workflow_coordinator_with_mocked_registry_property_access PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorWithRealWorkflows::test_coordinator_with_real_workflow_registration PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorWithRealWorkflows::test_coordinator_workflow_access_via_registry PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorWithRealWorkflows::test_duplicate_workflow_registration_prevented PASSED [  6%]
tests/unit/agent/coordinators/test_workflow_coordinator.py::TestWorkflowCoordinatorWithRealWorkflows::test_coordinator_after_workflow_removal_simulation PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestTaskOutcome::test_create_outcome_success PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestTaskOutcome::test_create_outcome_failure PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestTaskOutcome::test_outcome_to_dict PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestTaskOutcome::test_outcome_from_dict PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestProficiencyTracker::test_initialization PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestProficiencyTracker::test_initialization_custom_window PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestProficiencyTracker::test_ensure_tables PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_success PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_failure PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_with_quality_score PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_with_duration PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_with_cost PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_multiple_outcomes_batch PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_updates_proficiency PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_updates_task_success_rate PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_invalidates_cache PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestRecordOutcome::test_record_outcome_with_errors PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_proficiency_new_tool PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_proficiency_existing_tool PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_proficiency_caching PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_proficiency_invalidation PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_top_proficiencies PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_weaknesses_below_threshold PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_weaknesses_empty PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_weaknesses_high_threshold PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_task_success_rate_new_task PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetProficiency::test_get_task_success_rate_existing_task PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_update_proficiency_incremental PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_update_proficiency_clamps_to_zero PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_update_proficiency_clamps_to_one PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_detect_trend_improving PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_detect_trend_declining PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_detect_trend_stable PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_detect_trend_insufficient_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_get_improvement_trajectory PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_export_training_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestImprovementTracking::test_export_training_data_empty PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestMovingAverageMetrics::test_get_moving_average_metrics PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestMovingAverageMetrics::test_get_moving_average_metrics_insufficient_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestMovingAverageMetrics::test_compute_moving_average PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestMovingAverageMetrics::test_compute_moving_average_insufficient_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestStatisticsAndExport::test_get_statistics_summary PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestStatisticsAndExport::test_analyze_performance_patterns PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestTrendDirection::test_trend_direction_values PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestProficiencyScore::test_proficiency_score_to_dict PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestSuggestion::test_suggestion_to_dict PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestProficiencyMetrics::test_proficiency_metrics_to_dict PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestUtilityMethods::test_get_all_tools PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestUtilityMethods::test_get_all_tasks PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestUtilityMethods::test_reset_tool PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestUtilityMethods::test_reset_all PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestExportMetrics::test_export_metrics_empty PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestExportMetrics::test_export_metrics_with_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestExportMetrics::test_export_metrics_top_performing_tools PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestExportMetrics::test_export_metrics_improvement_opportunities PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestSuggestToolForTask::test_suggest_tool_for_task_no_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestSuggestToolForTask::test_suggest_tool_for_task_with_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestSuggestToolForTask::test_suggest_tool_for_task_minimum_executions PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetImprovementSuggestions::test_get_improvement_suggestions_no_data PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetImprovementSuggestions::test_get_improvement_suggestions_low_success_rate PASSED [  6%]
tests/unit/agent/improvement/test_proficiency_tracker.py::TestGetImprovementSuggestions::test_get_improvement_suggestions_declining_trend PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_creation_with_defaults PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_creation_with_values PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_to_text_conversion PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_to_text_empty_fields PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_compute_effective_importance PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisode::test_episode_repr PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodeMemory::test_episode_memory_creation PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodeMemory::test_episode_memory_with_custom_metadata PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodeMemory::test_episode_memory_update_access PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryStats::test_memory_stats_creation PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryStats::test_memory_stats_default_values PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_memory_index_creation PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_add_embedding PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_remove_embedding PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_get_embedding PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_get_embedding_not_found PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_index_metadata PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_index_actions PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_index_outcomes PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_index_timestamp PASSED [  6%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_remove_from_indexes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_query_by_metadata PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_query_by_action PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_query_by_outcome PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_query_by_timerange PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestMemoryIndex::test_find_similar PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryInit::test_initialization_with_defaults PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryInit::test_initialization_with_custom_max PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryInit::test_initialization_creates_index PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_single_episode PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_episode_generates_embedding PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_multiple_episodes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_episode_with_metadata PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_duplicate_episode_id PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_episode_indexes_correctly PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_store_episode_embedding_failure PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_episode_eviction_when_max_reached PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryStore::test_eviction_removes_from_index PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_relevant_by_semantic_similarity PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_recent_episodes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_by_outcome PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_by_action PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_by_metadata PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_with_k_limit PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_with_min_similarity PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_with_context_filter PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_empty_database PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_no_relevant_episodes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_updates_access_count PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_updates_last_accessed PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRecall::test_recall_ranking_by_relevance PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryConsolidation::test_consolidate_memories PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryConsolidation::test_consolidate_empty_episodes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryConsolidation::test_consolidate_with_custom_function PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryConsolidation::test_consolidate_extracts_successful_actions PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryConsolidation::test_consolidate_extracts_common_outcomes PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_get_memory_statistics PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_get_memory_statistics_empty PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_clear_old_memories PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_clear_old_keeps_high_importance PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_apply_temporal_decay PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryManagement::test_clear_all_memories PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRetrieval::test_get_episode_by_id PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRetrieval::test_get_episode_not_found PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestEpisodicMemoryRetrieval::test_get_episode_updates_access_stats PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestCreateEpisodicMemory::test_factory_creates_instance PASSED [  7%]
tests/unit/agent/memory/test_episodic_memory.py::TestCreateEpisodicMemory::test_factory_with_custom_params PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_init_with_openai_provider PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_init_with_anthropic_provider PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_init_with_custom_model PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_get_default_model_for_unknown_provider PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_is_audio_capable_openai PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioAgentInit::test_is_audio_capable_anthropic PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioValidation::test_validate_audio_file_mp3 PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioValidation::test_validate_audio_file_wav PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioValidation::test_validate_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAudioValidation::test_validate_audio_file_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_openai_basic PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_with_language PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_with_timestamps PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_non_openai_provider PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestTranscribeAudio::test_transcribe_audio_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAnalyzeAudio::test_analyze_audio_basic PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAnalyzeAudio::test_analyze_audio_wav PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAnalyzeAudio::test_analyze_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestAnalyzeAudio::test_analyze_audio_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestExtractSpeakerDiarization::test_extract_speaker_diarization_basic PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestExtractSpeakerDiarization::test_extract_speaker_diarization_with_min_length PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestExtractSpeakerDiarization::test_extract_speaker_diarization_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDetectLanguage::test_detect_language_openai PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDetectLanguage::test_detect_language_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDetectLanguage::test_detect_language_non_openai_provider PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestSummarizeAudio::test_summarize_audio_basic PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestSummarizeAudio::test_summarize_audio_with_custom_max_length PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestSummarizeAudio::test_summarize_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestSummarizeAudio::test_summarize_audio_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_speech_segment_valid PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_speech_segment_invalid_start_time PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_speech_segment_invalid_end_time PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_speech_segment_invalid_confidence PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_transcription_valid PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_transcription_invalid_confidence PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_transcription_invalid_duration PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_audio_analysis_valid PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_audio_analysis_invalid_duration PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestDataClasses::test_audio_analysis_invalid_speech_ratio PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestIntegrationScenarios::test_full_audio_workflow PASSED [  7%]
tests/unit/agent/multimodal/test_audio_agent.py::TestIntegrationScenarios::test_different_audio_formats PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageAnalysis::test_analyze_image_basic_description PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageAnalysis::test_analyze_image_with_custom_query PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageAnalysis::test_analyze_image_extracts_metadata PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageAnalysis::test_analyze_image_handles_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageAnalysis::test_analyze_image_invalid_format_raises_error PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentPlotExtraction::test_extract_plot_data_returns_chart_type PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentPlotExtraction::test_extract_plot_data_includes_raw_response PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentPlotExtraction::test_extract_plot_data_handles_errors PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentObjectDetection::test_detect_objects_method_exists PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentObjectDetection::test_detect_objects_with_valid_image PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentObjectDetection::test_detect_objects_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentOCR::test_ocr_extract_text_basic PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentOCR::test_ocr_extract_text_with_language_hint PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageComparison::test_compare_images_basic PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestVisionAgentImageComparison::test_compare_images_both_missing PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentTranscription::test_transcribe_audio_basic PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentTranscription::test_transcribe_audio_with_language PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentTranscription::test_transcribe_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentTranscription::test_transcribe_audio_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentAnalysis::test_analyze_audio_returns_metadata PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentAnalysis::test_analyze_audio_wav_format PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentAnalysis::test_analyze_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentDiarization::test_extract_speech_segments_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentDiarization::test_extract_speaker_diarization_method_exists PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentDiarization::test_extract_speaker_diarization_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentLanguageDetection::test_detect_language_openai PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentLanguageDetection::test_detect_language_non_openai PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentSummarization::test_summarize_audio_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestAudioAgentSummarization::test_generate_audio_summary_method_exists PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestDataValidation::test_detected_object_validation PASSED [  7%]
tests/unit/agent/multimodal/test_multimodal_agents.py::TestDataValidation::test_speech_segment_validation PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_init_with_provider PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_init_with_custom_model PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_init_with_openai_provider PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_get_default_model_for_unknown_provider PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_is_vision_capable_anthropic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_is_vision_capable_openai PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestVisionAgentInit::test_is_vision_capable_unknown PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestImageEncoding::test_encode_image_png PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestImageEncoding::test_encode_image_jpg PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestImageEncoding::test_encode_image_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestImageEncoding::test_encode_image_unsupported_format PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestImageEncoding::test_create_vision_message_anthropic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImage::test_analyze_image_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImage::test_analyze_image_with_custom_query PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImage::test_analyze_image_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImage::test_analyze_image_invalid_format PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImage::test_analyze_image_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractPlotData::test_extract_plot_data_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractPlotData::test_extract_plot_data_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractPlotData::test_extract_plot_data_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectObjects::test_detect_objects_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectObjects::test_detect_objects_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectObjects::test_detect_objects_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestCompareImages::test_compare_images_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestCompareImages::test_compare_images_first_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestCompareImages::test_compare_images_second_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestCompareImages::test_compare_images_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_descriptive PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_concise PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_creative PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_accessibility PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestGenerateCaption::test_generate_caption_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestOCRExtractText::test_ocr_extraction_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestOCRExtractText::test_ocr_extraction_with_language PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestOCRExtractText::test_ocr_extraction_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestOCRExtractText::test_ocr_extraction_api_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_detected_object_valid PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_detected_object_invalid_confidence PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_detected_object_invalid_bbox PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_image_analysis_creation PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_plot_data_creation PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDataClasses::test_image_comparison_creation PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestIntegrationScenarios::test_full_vision_workflow PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestIntegrationScenarios::test_different_image_formats PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestBatchProcessImages::test_batch_process_analyze PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestBatchProcessImages::test_batch_process_caption PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestBatchProcessImages::test_batch_process_ocr PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestBatchProcessImages::test_batch_process_invalid_operation PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestBatchProcessImages::test_batch_process_handles_errors PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImageQuality::test_analyze_image_quality_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImageQuality::test_analyze_image_quality_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestAnalyzeImageQuality::test_analyze_image_quality_parse_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractTextFromDocument::test_extract_text_with_structure PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractTextFromDocument::test_extract_text_without_structure PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractTextFromDocument::test_extract_text_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectFacesDetailed::test_detect_faces_with_attributes PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectFacesDetailed::test_detect_faces_without_attributes PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectFacesDetailed::test_detect_faces_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestDetectFacesDetailed::test_detect_faces_parse_error PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractColors::test_extract_colors_basic PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractColors::test_extract_colors_limit PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractColors::test_extract_colors_file_not_found PASSED [  7%]
tests/unit/agent/multimodal/test_vision_agent.py::TestExtractColors::test_extract_colors_parse_error PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_load_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_load_persona_not_found PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_adapt_persona_basic PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_context_aware_adaptation_security PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_context_aware_adaptation_urgency PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_context_aware_adaptation_user_preference PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_adapted_persona_expertise_addition PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_create_custom_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_create_custom_persona_with_id PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_create_custom_persona_missing_traits PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_create_custom_persona_with_constraints PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_get_suitable_personas_by_task PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_get_suitable_personas_with_min_score PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_update_persona_from_feedback_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_update_persona_from_feedback_nonexistent PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_export_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_export_persona_not_found PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_import_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManager::test_import_persona_missing_fields PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaDataclass::test_persona_matches_expertise_perfect PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaDataclass::test_persona_matches_expertise_partial PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaDataclass::test_persona_matches_expertise_none PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaDataclass::test_persona_to_dict PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaConstraints::test_constraints_defaults PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaConstraints::test_constraints_custom PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaConstraints::test_constraints_invalid_response_length PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaConstraints::test_constraints_invalid_explanation_depth PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestAdaptedPersona::test_adapted_persona_property_inheritance PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestAdaptedPersona::test_adapted_persona_personality_override PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestAdaptedPersona::test_adapted_persona_expertise_addition PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestAdaptedPersona::test_adapted_persona_generate_system_prompt PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestFeedback::test_feedback_valid_rating PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestFeedback::test_feedback_rating_too_low PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestFeedback::test_feedback_rating_too_high PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestFeedback::test_feedback_boundary_values PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerCaching::test_adaptation_caching PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerCaching::test_cache_invalidation_on_feedback PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerEventPublishing::test_load_persona_publishes_event PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerEventPublishing::test_adapt_persona_publishes_event PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerEventPublishing::test_create_custom_persona_publishes_event PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_adapt_persona_with_multiple_contexts PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_get_suitable_personas_empty_repository PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_get_suitable_personas_ranking PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_update_persona_without_improvements PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_import_persona_with_prompt_templates PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_create_custom_persona_with_prompt_templates PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_adapted_persona_constraints_merging PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_multiple_personalities_for_different_tasks PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_persona_repository_integration PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_adapt_persona_caching_with_different_contexts PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_dynamic_traits_calculation PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_expertise_extraction_from_task PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_feedback_with_constraint_updates PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerAdvanced::test_export_import_roundtrip PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_basic PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_constraints PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_insufficient_count PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_with_backstories PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_with_prompt_templates PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerMerge::test_merge_personas_communication_style_voting PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerValidation::test_validate_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerValidation::test_validate_persona_missing_id PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerValidation::test_validate_persona_missing_name PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerValidation::test_validate_persona_conflicting_constraints PASSED [  7%]
tests/unit/agent/personas/test_persona_manager.py::TestPersonaManagerValidation::test_validate_persona_multiple_conflicting_tools PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_save_new_persona PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_save_existing_persona_versioning PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_persona_success PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_persona_not_found PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_list_all_personas PASSED [  7%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_delete_persona_success PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_delete_persona_not_found PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_exists_persona PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_version_history PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_version_history_empty PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_specific_version PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaRepository::test_get_specific_version_not_found PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_valid_persona PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_missing_id PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_missing_name PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_missing_description PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_conflicting_tools PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaValidation::test_validate_invalid_max_tool_calls PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaConflictDetection::test_no_conflict_same_version PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaConflictDetection::test_conflict_personality_change_without_version_bump PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaConflictDetection::test_no_conflict_with_version_bump PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaExport::test_export_to_yaml PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaExport::test_export_to_yaml_not_found PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaExport::test_export_to_json PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaExport::test_export_to_json_not_found PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaExport::test_export_all_to_yaml PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_from_yaml PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_from_yaml_invalid PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_from_json PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_from_json_invalid PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_all_from_yaml PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_with_constraints PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaImport::test_import_with_prompt_templates PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaFileStorage::test_save_to_storage PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaFileStorage::test_load_from_storage PASSED [  8%]
tests/unit/agent/personas/test_persona_repository.py::TestPersonaVersion::test_version_entry_creation PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_simple_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_complex_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_with_cache PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_cache_bypass PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_with_context PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_invalid_json_response PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_missing_subtasks_field PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskDecomposition::test_decompose_json_extraction_from_text PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_after_completion FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_with_failures FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_multiple_completed PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_cannot_proceed PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_invalid_task_id PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_event_emission PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_ready FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_after_completion FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_sorted_by_complexity FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_no_ready_tasks PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_simple_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_complex_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_with_context PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_clamps_to_range PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_confidence_calculation PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestComplexityEstimation::test_estimate_complexity_estimated_steps PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_valid_graph PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_with_cycles PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_missing_dependency FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_warnings_orphaned_tasks FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_no_dependencies_warning FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestCacheManagement::test_clear_cache PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestCacheManagement::test_get_cache_stats PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestLLMIntegration::test_uses_orchestrator_when_available PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestLLMIntegration::test_falls_back_to_provider_manager PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestLLMIntegration::test_no_llm_provider_raises_error PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_empty_task_list PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_task_id_auto_generation PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_empty_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_validate_empty_graph PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_multi_level_decomposition PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_decomposition_with_multiple_dependencies PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_blocking_propagation FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_partial_failure FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_next_tasks_priority_ordering FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_parallel_tasks FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_respects_dependencies FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_unknown_task PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_keyword_combinations PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_large_file_count PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_large_codebase PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_multiple_domains PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_validate_plan_with_complex_dependencies PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_validate_plan_self_cycle PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_validate_plan_multiple_missing_deps PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_decompose_event_emission PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_decompose_failure_event PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_cache_hit_emits_event PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_custom_decomposition_prompt PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_decompose_without_orchestrator PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_with_in_progress_tasks FAILED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_blocked_task_not_marked_ready PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_get_cache_stats_with_entries PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_all_keywords PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_min_score PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_estimate_complexity_max_score PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_decompose_malformed_json_fails_gracefully PASSED [  8%]
tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_next_tasks_returns_copy PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestPresentationProtocol::test_emoji_adapter_implements_protocol PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestPresentationProtocol::test_null_adapter_implements_protocol PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestPresentationProtocol::test_create_presentation_adapter_default PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestPresentationProtocol::test_create_presentation_adapter_null PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_success PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_error PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_warning PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_info PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_running PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_unknown_raises PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_force_emoji PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_force_text PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_icon_without_color PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_format_status PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_format_tool_name PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_emojis_enabled_true PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestEmojiPresentationAdapter::test_emojis_enabled_false PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_emojis_enabled_always_false PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_success PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_error PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_warning PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_info PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_running PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_pending PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_done PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_arrow_right PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_unknown_raises PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_ignores_force_emoji PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_icon_ignores_with_color PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_format_status PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestNullPresentationAdapter::test_format_tool_name_no_styling PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[success] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[error] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[warning] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[info] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[running] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[pending] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[done] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[arrow_right] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[arrow_left] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[bullet] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[file] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[folder] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[sparkle] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[search] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[chart] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[target] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[rocket] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[bolt] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[bulb] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[note] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[refresh] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[risk_high] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[risk_critical] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[unknown] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[skipped] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[blocked] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[thinking] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[gear] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[clipboard] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[stop] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[clock] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[stop_sign] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_low] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_medium] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_high] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_critical] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_info] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[level_unknown] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_emoji_adapter_supports_icon[person] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[success] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[error] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[warning] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[info] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[running] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[pending] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[done] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[arrow_right] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[arrow_left] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[bullet] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[file] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[folder] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[sparkle] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[search] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[chart] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[target] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[rocket] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[bolt] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[bulb] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[note] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[refresh] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[risk_high] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[risk_critical] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[unknown] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[skipped] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[blocked] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[thinking] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[gear] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[clipboard] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[stop] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[clock] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[stop_sign] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_low] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_medium] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_high] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_critical] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_info] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[level_unknown] PASSED [  8%]
tests/unit/agent/presentation/test_presentation_adapters.py::TestAllIconNames::test_null_adapter_supports_icon[person] PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_init PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_provider_success PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_provider_with_health_check PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_provider_health_check_fails PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_provider_failure PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_model_success PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_model_failure PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_get_switch_history PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_get_current_state PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_with_callback PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_validate_switch_request_valid PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_validate_switch_request_invalid PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinator::test_switch_with_post_switch_hooks PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinatorIntegration::test_full_switch_lifecycle PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinatorIntegration::test_switch_with_fallback_on_failure PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinatorErrorHandling::test_switch_handles_exception PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinatorErrorHandling::test_switch_handles_health_check_exception PASSED [  8%]
tests/unit/agent/provider_switch_coordinator/test_provider_switch_coordinator.py::TestProviderSwitchCoordinatorErrorHandling::test_switch_with_retry_on_transient_error PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_protocol_compliance PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_register_single_backend PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_register_multiple_backends_same_type PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_register_backend_multiple_types PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_route_search_to_highest_priority_backend PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_route_search_fallback_on_unavailable PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_route_search_no_backend_error PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_route_search_all_backends_unavailable PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_search_result_metadata PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_search_with_filters PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_different_search_types PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_backend_priority_updates PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_empty_results PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_query_timing_measurement PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_context_metadata_propagation PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_multiple_concurrent_searches PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_backend_exception_fallback PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_get_available_backends PASSED [  8%]
tests/unit/agent/search/test_backend_search_router.py::TestBackendSearchRouter::test_get_backends_for_type PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestAvailableTool::test_to_dict PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestAvailableTool::test_from_base_tool PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestAvailableTool::test_from_base_tool_with_metadata PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolSignature::test_matches_signature_identical PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolSignature::test_matches_signature_partial PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolSignature::test_matches_signature_no_match PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_add_tool PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_add_duplicate_tool PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_remove_tool PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_remove_nonexistent_tool PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_get_tool_names PASSED [  8%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkill::test_to_dict PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestMCPTool::test_to_available_tool PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillCapabilities::test_to_dict PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillCapabilities::test_from_tool PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_all_tools PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_by_category PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_exclude_disabled PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_with_context PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_empty_registry PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_registry_without_list_tools PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_handles_errors PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_tools_publishes_event PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_mcp_tools PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestToolDiscovery::test_discover_mcp_tools_caching PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_single_tool_skill PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_multi_tool_skill PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_with_dependencies PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_empty_tools_raises_error PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_auto_generates_tags PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_with_metadata PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_validates_tools_copy PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_publishes_event PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_with_custom_tags PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillComposition::test_compose_skill_circular_dependencies PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_by_semantic_relevance PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_by_capability_match PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_with_past_performance PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_empty_tool_list PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_with_context PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_respects_limit PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_respects_min_score PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_with_selector_fallback PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_without_selector PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillRanking::test_rank_preserves_score_ordering PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryIntegration::test_full_discovery_workflow PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryIntegration::test_mcp_tool_integration PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryIntegration::test_skill_registration_lifecycle PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryIntegration::test_performance_benchmark PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryIntegration::test_error_handling_integration PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryEngineAdditional::test_register_skill_updates_existing PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryEngineAdditional::test_skill_tool_management PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryEngineAdditional::test_get_tool_signatures PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryEngineAdditional::test_skill_timestamp_updates PASSED [  9%]
tests/unit/agent/skills/test_skill_discovery.py::TestSkillDiscoveryEngineAdditional::test_event_bus_interface_compatibility PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_init PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_process_streaming_response_success PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_process_streaming_response_empty PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_process_streaming_response_error_handling PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_aggregate_chunks PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_dispatch_streaming_events PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_format_streaming_output PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinator::test_handle_streaming_completion PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinatorIntegration::test_full_streaming_lifecycle PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinatorIntegration::test_error_recovery_in_streaming PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinatorPerformance::test_large_stream_handling PASSED [  9%]
tests/unit/agent/streaming/test_streaming_coordinator.py::TestStreamingCoordinatorPerformance::test_concurrent_stream_handling PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextProtocol::test_protocol_is_runtime_checkable PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextProtocol::test_protocol_rejects_incomplete_implementation PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextProtocol::test_protocol_exported_in_subagents_module PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextProtocol::test_protocol_exported_in_protocols_module PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_implements_protocol PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_settings PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_provider_name PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_model PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_tool_registry PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_temperature PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextAdapter::test_adapter_exported_in_subagents_module PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextUsage::test_can_use_as_type_hint PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestSubAgentContextUsage::test_mock_substitution_for_testing PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocol::test_protocol_is_runtime_checkable PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocol::test_protocol_rejects_incomplete_implementation PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocol::test_protocol_exported_in_all PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocol::test_can_use_as_type_hint PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_execute_returns_result PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_aexecute_returns_result PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_validate_arguments_valid_tool PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_validate_arguments_invalid_tool PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_execute_with_context PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestToolExecutorProtocolImplementation::test_tracks_executed_tools PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestProtocolIntegration::test_subagent_context_with_tool_executor PASSED [  9%]
tests/unit/agent/subagents/test_protocols.py::TestProtocolIntegration::test_adapter_pattern_for_dependency_injection PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextProtocol::test_protocol_is_runtime_checkable PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextProtocol::test_protocol_rejects_incomplete_implementation PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextProtocol::test_protocol_exported_in_subagents_module PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextProtocol::test_protocol_exported_in_protocols_module PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_implements_protocol PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_settings PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_provider_name PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_model PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_tool_registry PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_delegates_temperature PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextAdapter::test_adapter_exported_in_subagents_module PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextUsage::test_can_use_as_type_hint PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestSubAgentContextUsage::test_mock_substitution_for_testing PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocol::test_protocol_is_runtime_checkable PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocol::test_protocol_rejects_incomplete_implementation PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocol::test_protocol_exported_in_all PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocol::test_can_use_as_type_hint PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_execute_returns_result PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_aexecute_returns_result PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_validate_arguments_valid_tool PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_validate_arguments_invalid_tool PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_execute_with_context PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestToolExecutorProtocolImplementation::test_tracks_executed_tools PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestProtocolIntegration::test_subagent_context_with_tool_executor PASSED [  9%]
tests/unit/agent/subagents/test_subagent_protocols.py::TestProtocolIntegration::test_adapter_pattern_for_dependency_injection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestActionIntent::test_intent_values PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentClassification::test_classification_creation PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_display_only_detection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_write_allowed_detection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_read_only_detection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_ambiguous_detection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_default_intent_display_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_custom_default_intent PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_write_overrides_display_when_strong PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_confidence_scoring PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_is_write_authorized PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_custom_display_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_custom_write_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_custom_detector_function PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_safe_actions_for_each_intent PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_prompt_guard_assignment PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_case_insensitive_matching PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentDetector::test_invalid_regex_pattern_handling PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctions::test_detect_intent PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctions::test_is_write_authorized_function PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctions::test_get_prompt_guard PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctions::test_get_safe_tools PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSafeActionsMapping::test_all_intents_have_safe_actions PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSafeActionsMapping::test_read_only_actions PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSafeActionsMapping::test_write_allowed_actions PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestPromptGuards::test_all_intents_have_prompt_guards PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestPromptGuards::test_write_allowed_has_empty_guard PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestPromptGuards::test_display_only_has_guard PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestAlias::test_alias_works PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestEdgeCases::test_empty_message PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestEdgeCases::test_very_long_message PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestEdgeCases::test_special_characters PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestEdgeCases::test_unicode_message PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestEdgeCases::test_multiple_signals_accumulate PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_analyze_then_fix PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_find_and_fix PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_fix_bugs PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_fix_issue_in PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_apply_fix PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_make_changes PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_refactor_improve PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_create_dockerfile PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_create_pipeline PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_implement_feature PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_add_feature_to PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_setup_configure PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_write_tests PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestCompoundWriteSignals::test_compound_overrides_read_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestWeakWriteSignals::test_weak_write_becomes_ambiguous PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestWeakWriteSignals::test_edit_without_file_extension PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestWeakWriteSignals::test_weak_custom_write_signal_becomes_ambiguous PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestScorePatterns::test_score_patterns_empty_patterns PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestScorePatterns::test_score_patterns_no_match PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestScorePatterns::test_score_patterns_single_match PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestScorePatterns::test_score_patterns_multiple_matches PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestScorePatterns::test_score_patterns_accumulates_weights PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_custom_detector_returns_result PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_custom_detector_returns_none PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_multiple_custom_detectors PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_compound_write_highest_precedence PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_strong_write_over_display PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_read_only_over_display PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_display_only_when_only_display_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_default_intent_when_no_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestDetectMethodBranches::test_confidence_capped_at_1 PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_display_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_write_allowed PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_read_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_intersection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_empty_input PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestGetSafeToolsFunction::test_get_safe_tools_code_search_mapping PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestInitializationCoverage::test_init_with_all_custom_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestInitializationCoverage::test_init_custom_display_signals_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestInitializationCoverage::test_init_custom_write_signals_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestInitializationCoverage::test_init_empty_custom_detectors PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestPatternCompilationErrors::test_multiple_invalid_patterns PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestPatternCompilationErrors::test_all_patterns_invalid PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestToolCategories::test_write_tools_constant PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestToolCategories::test_read_only_tools_constant PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestToolCategories::test_generation_tools_constant PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestToolCategories::test_intent_blocked_tools_mapping PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIsWriteAuthorizedMethod::test_is_write_authorized_method_true PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIsWriteAuthorizedMethod::test_is_write_authorized_method_false PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIsWriteAuthorizedMethod::test_is_write_authorized_method_ambiguous PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctionsCoverage::test_detect_intent_returns_classification PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctionsCoverage::test_is_write_authorized_function_compound_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctionsCoverage::test_get_prompt_guard_for_all_intents PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestConvenienceFunctionsCoverage::test_get_safe_tools_with_git_tools PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentClassificationDataclass::test_classification_with_empty_matched_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestIntentClassificationDataclass::test_classification_safe_actions_copy PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_write_tools_blocked_by_default PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_generation_tools_blocked_for_read_only PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_safe_by_default_intent PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_prompt_guards_prevent_unauthorized_writes PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_explicit_write_authorization_required PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_write_authorization_confidence_threshold PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_no_write_permission_without_clear_signal PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_compound_write_signals_require_explicit_fix PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_all_intents_have_safe_actions_defined PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_read_only_most_restrictive PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityCriticalPaths::test_prompt_guards_exist_for_restrictive_intents PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_attempted_bypass_with_whitespace PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_attempted_bypass_with_line_breaks PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_attempted_bypass_with_special_chars PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_no_false_positive_write_authorization PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_context_aware_write_detection PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestSecurityEdgeCases::test_case_variations_detected_consistently PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestAuditTrailLogging::test_classification_contains_decision_metadata PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestAuditTrailLogging::test_high_confidence_decisions_have_signals PASSED [  9%]
tests/unit/agent/test_action_authorizer.py::TestAuditTrailLogging::test_all_signals_logged_in_classification PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestAgentMode::test_agent_mode_values PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestAgentMode::test_agent_mode_from_string PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestTransitionTrigger::test_transition_trigger_values PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeState::test_mode_state_creation PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeState::test_mode_state_to_state_key PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeState::test_discretize_ratio_buckets PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeState::test_discretize_quality_buckets PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeAction::test_mode_action_creation PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeAction::test_mode_action_with_budget_adjustment PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModeAction::test_mode_action_repr PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_initialization PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_get_q_value_default PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_update_q_value PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_update_q_value_with_next_state PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_get_all_actions PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_record_transition PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_update_task_stats_first_sample PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_update_task_stats_success_efficient PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_update_task_stats_failure_increases_budget PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_get_task_stats_default PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQLearningStore::test_get_min_budget_for_task PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestAdaptiveModeControllerInit::test_basic_initialization PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestAdaptiveModeControllerInit::test_initialization_with_provider PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_default PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_anthropic PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_openai PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_google PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_xai PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_deepseek PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderNormalization::test_normalize_provider_local PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_get_iteration_thresholds_default PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_get_iteration_thresholds_anthropic PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_get_iteration_thresholds_deepseek PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_get_quality_thresholds_default PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_get_quality_thresholds_with_provider_adapter PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestProviderThresholds::test_set_provider PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestValidTransitions::test_explore_transitions PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestValidTransitions::test_plan_transitions PASSED [  9%]
tests/unit/agent/test_adaptive_mode_controller.py::TestValidTransitions::test_build_transitions PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestValidTransitions::test_review_transitions PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestValidTransitions::test_complete_no_transitions PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestGetRecommendedAction::test_get_recommended_action_basic PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestGetRecommendedAction::test_get_recommended_action_invalid_mode PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestGetRecommendedAction::test_get_recommended_action_updates_current_state PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestGetRecommendedAction::test_get_recommended_action_high_quality_completion PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestGetRecommendedAction::test_get_recommended_action_budget_exhausted PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestRecordOutcome::test_record_outcome_success PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestRecordOutcome::test_record_outcome_failure PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestRecordOutcome::test_record_outcome_without_state PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestRecordOutcome::test_record_outcome_with_mode_transition_learner PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestCalculateReward::test_calculate_reward_full_success PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestCalculateReward::test_calculate_reward_failure PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestShouldContinue::test_should_continue_normal PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestShouldContinue::test_should_continue_tool_budget_exhausted PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestShouldContinue::test_should_continue_iteration_budget_exhausted PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestShouldContinue::test_should_continue_high_quality PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestLoopDetection::test_check_loop_detection_no_loop PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestLoopDetection::test_check_loop_detection_stuck PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestLoopDetection::test_check_loop_detection_resets_on_tool_call PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestLoopDetection::test_reset_loop_tracking PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestOptimalToolBudget::test_get_optimal_tool_budget_default PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestOptimalToolBudget::test_get_optimal_tool_budget_learned PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestOptimalToolBudget::test_get_optimal_tool_budget_with_learner PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestSessionManagement::test_get_session_stats PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestSessionManagement::test_reset_session PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestSessionManagement::test_adjust_exploration_rate PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestSessionManagement::test_decay_exploration_rate PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestTransitionEvent::test_transition_event_creation PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestModuleLevelFunction::test_get_mode_controller_function PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestInferTrigger::test_infer_trigger_quality_threshold PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestInferTrigger::test_infer_trigger_budget_low PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestInferTrigger::test_infer_trigger_error_recovery PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQToConfidence::test_q_to_confidence_positive PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQToConfidence::test_q_to_confidence_negative PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestQToConfidence::test_q_to_confidence_zero PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestHeuristicBonus::test_heuristic_bonus_complete_high_quality PASSED [ 10%]
tests/unit/agent/test_adaptive_mode_controller.py::TestHeuristicBonus::test_heuristic_bonus_early_mode_switch PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestAdapterConfig::test_default_values PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestAdapterConfig::test_custom_values PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_init_hooks_callbacks PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_init_with_config PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_reset PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_on_tool_start_records_call PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_on_tool_start_with_file_edit_snapshots PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_on_tool_complete_updates_result PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_completion_detector_exists PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_inject_task_context PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_generate_combined_patch PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_execute_task_basic PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestVictorAgentAdapter::test_execute_task_max_turns_limit PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestCreateVictorAgentCallback::test_creates_callable PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestCreateVictorAgentCallback::test_callback_delegates_to_adapter PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestFileEditCapture::test_capture_file_create PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestFileEditCapture::test_capture_file_modify PASSED [ 10%]
tests/unit/agent/test_agent_adapter.py::TestFileEditCapture::test_diff_generation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestChatCommand::test_creation_with_defaults PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestChatCommand::test_creation_with_values PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestExecuteToolCommand::test_creation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestStartSessionCommand::test_creation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestEndSessionCommand::test_creation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionQuery::test_creation_with_defaults PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionQuery::test_creation_with_values PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetConversationHistoryQuery::test_creation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionMetricsQuery::test_creation PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionEvents::test_session_started_event PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionEvents::test_chat_message_sent_event PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionEvents::test_chat_response_received_event PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionEvents::test_tool_executed_event PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionEvents::test_session_ended_event PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_handle_session_started PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_handle_chat_messages PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_handle_tool_executed PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_handle_session_ended PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_get_active_sessions PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestSessionProjection::test_get_session_metrics PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestStartSessionHandler::test_start_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestChatHandler::test_chat_message PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestExecuteToolHandler::test_execute_tool PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestExecuteToolHandler::test_execute_tool_dry_run PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestEndSessionHandler::test_end_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestEndSessionHandler::test_end_nonexistent_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionHandler::test_get_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionHandler::test_get_session_with_history PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetSessionHandler::test_get_nonexistent_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestGetConversationHistoryHandler::test_get_history PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestAgentCommandBus::test_start_and_end_session PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestAgentCommandBus::test_chat_flow PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestAgentCommandBus::test_tool_execution_flow PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestAgentCommandBus::test_get_events PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestAgentCommandBus::test_full_workflow PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestCQRSEventSourcingIntegration::test_event_replay_rebuilds_state PASSED [ 10%]
tests/unit/agent/test_agent_commands.py::TestCQRSEventSourcingIntegration::test_concurrent_sessions PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuildOptions::test_default_values PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuildOptions::test_custom_values PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_create_builder PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_from_options PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_provider_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_model_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_temperature_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_temperature_validation PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_max_tokens_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_max_tokens_validation PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_tools_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_thinking_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_airgapped_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_profile_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_workspace_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_config_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_system_prompt_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_with_observability_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_session_id_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_with_cqrs_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_metadata_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_full_chain PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilder::test_get_options_returns_copy PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_default PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_minimal PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_high_budget PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_airgapped PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_coding PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_preset_research PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderPresets::test_multiple_presets PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderToolPresets::test_default_tools PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderToolPresets::test_minimal_tools PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderToolPresets::test_full_tools PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderToolPresets::test_airgapped_tools PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderStateHooks::test_on_enter_stage PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderStateHooks::test_on_exit_stage PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderStateHooks::test_on_transition PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBuilderStateHooks::test_multiple_hooks PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_session_creation PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_session_with_id PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_session_with_metadata PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_send_first_turn PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_send_subsequent_turns PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_send_with_context PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_stream PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_turns_tracking PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_pause_resume PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_pause_only_from_active PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_resume_only_from_paused PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_close PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_send_after_close_raises PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_reset PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_context_manager PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSession::test_repr PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSessionHistory::test_history_empty PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentSessionHistory::test_history_with_messages PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBridgeConfiguration::test_default_config PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestBridgeConfiguration::test_custom_config PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_bridge_creation PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_bridge_with_config PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_connect_without_cqrs PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_connect_already_connected_raises PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_disconnect PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_disconnect_when_not_connected PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_get_session_info_not_connected PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_get_conversation_history_not_connected PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_get_metrics_not_connected PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_context_manager PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridge::test_repr PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBridgeWithCQRS::test_connect_with_cqrs PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestFactoryFunctions::test_create_builder PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestFactoryFunctions::test_create_session_context_manager PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestFactoryFunctions::test_create_bridge_context_manager PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionContext::test_session_context_creation PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionContext::test_session_context_default_metadata PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderIntegration::test_build_with_mock_create PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderIntegration::test_build_with_cqrs_enabled PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_builder_creation_without_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_builder_creation_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_from_container_factory PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_with_container_method PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_from_options_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_add_tool_filter PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_add_multiple_tool_filters PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_create_builder_function_without_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_create_builder_function_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_get_tool_configurator_without_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_get_tool_configurator_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_get_event_registry_without_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_get_event_registry_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_build_stores_container_reference PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_build_with_tool_filters_uses_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderContainerIntegration::test_build_with_tool_filters_fallback PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderChaining::test_with_container_returns_builder PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderChaining::test_add_tool_filter_returns_builder PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestAgentBuilderChaining::test_full_chain_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionMetrics::test_metrics_default_values PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionMetrics::test_metrics_update_successful_turn PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionMetrics::test_metrics_update_failed_turn PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionMetrics::test_metrics_update_multiple_turns PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionMetrics::test_metrics_to_dict PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleHooks::test_hooks_default_none PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleHooks::test_hooks_with_callbacks PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_session_with_hooks PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_session_metrics_property PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_session_scope_property_without_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_session_scope_property_with_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_start_hook_called_on_first_send PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_start_hook_called_once PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_turn_start_hook_called PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_turn_end_hook_called PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_error_hook_called_on_exception PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_pause_hook_called PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_pause_hook_not_called_if_not_active PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_resume_hook_called PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_resume_hook_not_called_if_not_paused PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_on_close_hook_called_with_metrics PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_close_disposes_scoped_container PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_close_idempotent PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_reset_invokes_close PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_reset_resets_metrics PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_reset_recreates_scope PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_metrics_updated_after_send PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleManagement::test_hook_errors_logged_not_raised PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleIntegration::test_full_lifecycle_flow PASSED [ 10%]
tests/unit/agent/test_agent_components.py::TestSessionLifecycleIntegration::test_context_manager_lifecycle PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_init_defaults PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_init_with_system_prompt PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_init_with_max_history PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_add_message PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_add_user_message PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_add_assistant_message PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_add_assistant_message_with_tool_calls PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_add_tool_result PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_ensure_system_prompt PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_ensure_system_prompt_only_once PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_get_messages_for_provider PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_clear PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_trim_history PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_trim_history_preserves_system PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_get_last_user_message PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_get_last_user_message_empty PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_get_last_assistant_message PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_get_last_assistant_message_empty PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_message_count PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_to_dict PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_from_dict PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_system_prompt_setter PASSED [ 10%]
tests/unit/agent/test_agent_conversation.py::TestMessageHistory::test_messages_returns_copy PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewareContext::test_basic_creation PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewareContext::test_set_and_get PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewareContext::test_get_default PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewareContext::test_elapsed_ms PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewareContext::test_cancel PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddleware::test_custom_middleware PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddleware::test_middleware_short_circuit PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_empty_pipeline PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_single_middleware PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_middleware_order PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_cancelled_context_rejected PASSED [ 10%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_use_if_condition_true PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_use_if_condition_false PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestMiddlewarePipeline::test_freeze_prevents_modification PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestLoggingMiddleware::test_logs_request PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestTimingMiddleware::test_records_timing PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestErrorHandlingMiddleware::test_custom_handler PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestErrorHandlingMiddleware::test_default_handler PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestErrorHandlingMiddleware::test_reraise_unhandled PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestRetryMiddleware::test_retries_on_failure PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestRetryMiddleware::test_max_retries_exceeded PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestTimeoutMiddleware::test_completes_within_timeout PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestTimeoutMiddleware::test_raises_on_timeout PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestCachingMiddleware::test_caches_response PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestCachingMiddleware::test_no_cache_on_none_key PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestValidationMiddleware::test_valid_request PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestValidationMiddleware::test_invalid_request PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestMetricsMiddleware::test_tracks_metrics PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestMetricsMiddleware::test_tracks_errors PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_with_logging PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_with_timing PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_with_error_handling PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_with_retry PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_with_timeout PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestPipelineBuilder::test_build_complete_pipeline PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestFactoryFunctions::test_create_default_pipeline PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestFactoryFunctions::test_create_resilient_pipeline PASSED [ 11%]
tests/unit/agent/test_agent_middleware.py::TestFactoryFunctions::test_default_pipeline_executes PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_handler_creation PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_result_creation PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_result_with_message PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_result_with_metadata PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_result_with_fallback_tool PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestErrorRecoveryHandler::test_recovery_result_with_modified_args PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_creation PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_deduplicate_identical_blocks PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_preserve_unique_content PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_with_code_blocks PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_with_mixed_content PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestOutputDeduplicator::test_deduplicator_empty_content PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestStreamingDeduplicator::test_streaming_deduplicator_creation PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestStreamingDeduplicator::test_streaming_deduplicator_process_chunk PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestStreamingDeduplicator::test_streaming_deduplicator_accumulate_chunks PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestStreamingDeduplicator::test_streaming_deduplicator_with_tool_calls PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestStreamingDeduplicator::test_streaming_deduplicator_reset PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestDeduplicatorIntegration::test_deduplicator_with_real_response PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestDeduplicatorIntegration::test_streaming_deduplicator_with_real_chunks PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestDeduplicatorIntegration::test_deduplicator_preserves_formatting PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestObservabilityIntegration::test_observability_event_recording PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestObservabilityIntegration::test_observability_metrics_collection PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestObservabilityIntegration::test_observability_with_custom_events PASSED [ 11%]
tests/unit/agent/test_agent_modules_coverage.py::TestObservabilityIntegration::test_observability_error_tracking PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_is_cloud_provider_returns_true_for_cloud PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_is_local_provider_returns_true_for_local PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_is_cloud_provider_case_insensitive PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_has_native_tool_support_for_qwen PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_has_native_tool_support_for_llama PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_has_native_tool_support_for_mistral PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_no_native_tool_support_for_other_models PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_returns_string PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_cloud_prompt_mentions_tools PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_with_adapter_uses_hints PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_ollama_prompt_native_support PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_ollama_prompt_no_native_support PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_ollama_prompt_qwen3_includes_thinking PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_lmstudio_prompt_native_support PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_vllm_prompt PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilder::test_build_default_prompt PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestBuildSystemPromptFunction::test_convenience_function_returns_string PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestBuildSystemPromptFunction::test_convenience_function_with_adapter PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestProviderConstants::test_cloud_providers_set PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestProviderConstants::test_local_providers_set PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_for_vllm_provider PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_for_lmstudio_provider PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_for_ollama_provider PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_for_unknown_provider PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_lmstudio_prompt_no_native_support PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_with_adapter_no_hints_no_caps PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_deepseek_prompt PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_xai_prompt PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_cloud_prompt_delegates_to_deepseek PASSED [ 11%]
tests/unit/agent/test_agent_prompt_builder.py::TestSystemPromptBuilderEdgeCases::test_build_cloud_prompt_delegates_to_xai PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestEvalToolCall::test_default_values PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestEvalToolCall::test_with_result PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestEvalToolCall::test_failed_call PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEdit::test_create_action PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEdit::test_modify_action PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEdit::test_delete_action PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_default_values PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_duration_calculation PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_with_tool_calls PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_with_file_edits PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_total_turns_property PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_to_dict PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticExecutionTrace::test_to_dict_empty_trace PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticTaskResult::test_success_result PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticTaskResult::test_failure_result PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticTaskResult::test_calculate_overall_score PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticMetrics::test_default_metrics PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticMetrics::test_pass_rate PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticMetrics::test_averages PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticMetrics::test_to_dict PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestPatchApplicationValidator::test_validation_type PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestPatchApplicationValidator::test_empty_patch_with_file_edits PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestPatchApplicationValidator::test_empty_patch_no_edits PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEditValidator::test_validation_type PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEditValidator::test_single_file_edit PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestFileEditValidator::test_no_file_edits PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestToolUsageValidator::test_validation_type PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestToolUsageValidator::test_expected_tools_dict PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestToolUsageValidator::test_with_file_edit_tools PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestToolUsageValidator::test_with_no_tool_calls PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestToolUsageValidator::test_without_file_edit_tools PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestTestPassingValidator::test_validation_type PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestTestPassingValidator::test_no_test_runner_detected PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestTestPassingValidator::test_with_mocked_test_runner PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestAgenticValidationType::test_validation_types PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestValidatorAbstractClass::test_custom_validator PASSED [ 11%]
tests/unit/agent/test_agentic_harness.py::TestValidatorAbstractClass::test_custom_validator_execution PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentCapabilities::test_create_capabilities PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentCapabilities::test_allows_tool PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentCapabilities::test_serialization PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConstraints::test_create_constraints PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConstraints::test_default_constraints PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConstraints::test_serialization PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_create_agent_spec PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_agent_id_generation PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_with_capabilities PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_with_constraints PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_serialization PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentSpec::test_from_dict_shorthand PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPipeline::test_create_pipeline PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPipeline::test_execute_pipeline PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPipeline::test_pipeline_serialization PASSED [ 11%]
tests/unit/agent/test_agents.py::TestParallel::test_create_parallel PASSED [ 11%]
tests/unit/agent/test_agents.py::TestParallel::test_execute_parallel PASSED [ 11%]
tests/unit/agent/test_agents.py::TestHierarchical::test_create_hierarchical PASSED [ 11%]
tests/unit/agent/test_agents.py::TestHierarchical::test_execute_hierarchical PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPresets::test_researcher_preset PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPresets::test_coder_preset PASSED   [ 11%]
tests/unit/agent/test_agents.py::TestPresets::test_reviewer_preset PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPresets::test_get_preset_agent PASSED [ 11%]
tests/unit/agent/test_agents.py::TestPresets::test_list_preset_agents PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConfig::test_load_from_dict_simple PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConfig::test_load_with_preset_extension PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConfig::test_load_with_ensemble PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentConfig::test_load_from_yaml PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentResult::test_create_result PASSED [ 11%]
tests/unit/agent/test_agents.py::TestAgentResult::test_failed_result PASSED [ 11%]
tests/unit/agent/test_agents.py::TestEnsembleResult::test_aggregate_stats PASSED [ 11%]
tests/unit/agent/test_agents.py::TestModelPreference::test_model_preferences PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestChangeType::test_all_types_exist PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestCommitResult::test_success_result PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestCommitResult::test_failure_result PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_is_git_repo PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_has_changes_no_changes PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_has_changes_with_changes PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_get_changed_files PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_stage_files PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_generate_commit_message_conventional PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_generate_commit_message_auto_detect_feat PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_generate_commit_message_auto_detect_fix PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_generate_commit_message_auto_detect_test PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_generate_commit_message_truncates_long PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_commit_changes_success PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_commit_changes_no_files PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_commit_changes_auto_stage PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_undo_last_commit PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_get_last_commit_info PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestAutoCommitter::test_is_last_commit_by_victor PASSED [ 11%]
tests/unit/agent/test_auto_commit.py::TestGlobalAutoCommitter::test_get_auto_committer_singleton PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestAgentStatus::test_status_values PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestAgentStatus::test_status_is_string_enum PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestToolCallRecord::test_create_minimal PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestToolCallRecord::test_create_complete PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgent::test_create_minimal PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgent::test_to_dict PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgent::test_to_dict_with_tool_calls PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgent::test_to_dict_truncates_output PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_init PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_set_event_callback PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_start_agent PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_start_agent_generates_name PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_start_agent_max_concurrent PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_cancel_agent PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_cancel_agent_not_found PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_cancel_completed_agent PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_get_agent PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_get_agent_status PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_get_agent_status_dict PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_list_agents PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_list_agents_filter_status PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_list_agents_limit PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_clear_completed PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_emit_event_with_callback PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_emit_event_without_callback PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestBackgroundAgentManager::test_emit_event_callback_error PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestGlobalFunctions::test_get_agent_manager_uninitialized PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestGlobalFunctions::test_init_agent_manager PASSED [ 11%]
tests/unit/agent/test_background_agent.py::TestGlobalFunctions::test_init_agent_manager_with_callback PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_recognizes_write_file PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_recognizes_shell PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_recognizes_edit PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_rejects_read_file PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_case_insensitive PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIsWriteTool::test_write_tools_set PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetState::test_default_values PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetState::test_with_values PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetStatus::test_default_values PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetStatus::test_remaining_property PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetStatus::test_remaining_never_negative PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerInit::test_initializes_all_budget_types PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerInit::test_default_multipliers PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerInit::test_custom_config_applied PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerInit::test_callback_not_set PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetStatus::test_returns_correct_type PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetStatus::test_current_starts_at_zero PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetStatus::test_is_exhausted_false_initially PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetStatus::test_reflects_multipliers PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerConsume::test_consume_increases_current PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerConsume::test_consume_custom_amount PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerConsume::test_returns_true_when_available PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerConsume::test_returns_false_when_exhausted PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerConsume::test_calls_on_exhausted_callback PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerIsExhausted::test_false_when_available PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerIsExhausted::test_true_when_exhausted PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_set_model_multiplier PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_model_multiplier_clamped_min PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_model_multiplier_clamped_max PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_set_mode_multiplier PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_mode_multiplier_clamped_min PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_mode_multiplier_clamped_max PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_set_productivity_multiplier PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_productivity_multiplier_clamped_min PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerMultipliers::test_productivity_multiplier_clamped_max PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerEffectiveMax::test_effective_max_with_multipliers PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerEffectiveMax::test_effective_max_minimum_one PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerReset::test_reset_all_budgets PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerReset::test_reset_specific_budget PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetPromptBudgetInfo::test_returns_dict PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetPromptBudgetInfo::test_contains_tool_budget_info PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetPromptBudgetInfo::test_contains_exploration_info PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetPromptBudgetInfo::test_contains_action_info PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetPromptBudgetInfo::test_reflects_usage PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIBudgetManagerProtocol::test_manager_implements_protocol PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestIBudgetManagerProtocol::test_protocol_has_required_methods PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetType::test_has_required_types PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetType::test_values_are_strings PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerIntegration::test_exploration_action_separation PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerIntegration::test_multiplier_affects_exhaustion PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerIntegration::test_reset_preserves_multipliers PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_record_read_tool PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_record_write_tool PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_record_shell_tool PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_explicit_is_write_operation PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_updates_last_tool PASSED [ 11%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerRecordToolCall::test_returns_false_when_exhausted PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerSetBaseBudget::test_set_base_budget PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerSetBaseBudget::test_base_budget_minimum_one PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerSetBaseBudget::test_affects_effective_max PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerSetOnExhausted::test_set_callback PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerSetOnExhausted::test_callback_replaces_previous PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerUpdateFromMode::test_uses_mixin_multiplier PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetDiagnostics::test_returns_dict PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetDiagnostics::test_contains_multipliers PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetDiagnostics::test_contains_budgets PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetDiagnostics::test_budget_details PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerGetDiagnostics::test_combined_multiplier_calculation PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestCreateBudgetManager::test_creates_with_defaults PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestCreateBudgetManager::test_creates_with_custom_config PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestCreateBudgetManager::test_applies_multipliers PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerEdgeCases::test_unknown_budget_type_consume PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerEdgeCases::test_get_status_unknown_type PASSED [ 12%]
tests/unit/agent/test_budget_manager.py::TestBudgetManagerEdgeCases::test_calculate_effective_max_unknown_type PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestOrchestratorCapability::test_create_capability_with_setter PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestOrchestratorCapability::test_create_capability_with_getter PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestOrchestratorCapability::test_create_capability_with_attribute PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestOrchestratorCapability::test_capability_requires_access_method PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestOrchestratorCapability::test_all_capability_types PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_default_version_is_1_0 PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_create_capability_with_custom_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_invalid_version_format_raises_error PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_invalid_version_single_number PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_invalid_version_three_parts PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_is_compatible_with_same_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_is_compatible_with_lower_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_is_compatible_with_lower_minor PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_is_not_compatible_with_higher_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_version_comparison_semantic PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityVersioning::test_deprecated_capability PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_has_capability_returns_true_for_registered PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_has_capability_returns_false_for_unknown PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_returns_capability PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_returns_none_for_unknown PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capabilities_returns_all PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capabilities_by_type PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_invoke_capability_calls_setter PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_invoke_capability_raises_for_unknown PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_invoke_capability_raises_for_no_setter PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_value_returns_value PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_value_raises_for_unknown PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_version_returns_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_get_capability_version_returns_none_for_unknown PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_has_capability_with_min_version_check PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_invoke_capability_with_compatible_version PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityRegistryMixin::test_invoke_capability_with_incompatible_version_raises PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityIntegration::test_enabled_tools_capability_end_to_end PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityIntegration::test_vertical_context_capability_end_to_end PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityIntegration::test_custom_prompt_capability_end_to_end PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityIntegration::test_rl_hooks_capability PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestCapabilityIntegration::test_team_specs_capability PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestProtocolConformance::test_mock_orchestrator_conforms_to_protocol PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestProtocolConformance::test_isinstance_check PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_check_capability_with_protocol PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_check_capability_with_fallback PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_invoke_capability_with_protocol PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_invoke_capability_with_fallback PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_check_capability_with_version_requirement PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_invoke_capability_with_version_requirement PASSED [ 12%]
tests/unit/agent/test_capability_registry.py::TestVerticalIntegrationHelpers::test_invoke_capability_with_incompatible_version PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestChangeType::test_change_types_exist PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChange::test_create_file_change PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChange::test_modify_file_change PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChange::test_rename_file_change PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestChangeGroup::test_create_change_group PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChangeHistory::test_begin_change_group PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChangeHistory::test_record_change PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChangeHistory::test_commit_change_group PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChangeHistory::test_can_undo_empty PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestFileChangeHistory::test_can_redo_empty PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_undo_file_create PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_redo_file_create PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_undo_file_modify PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_undo_file_delete PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_multiple_undo PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestUndoRedo::test_undo_clears_redo_on_new_change PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestGetChangeTracker::test_get_change_tracker_returns_same_instance PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestGetChangeTracker::test_reset_change_tracker PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestHistory::test_get_history_empty PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestHistory::test_get_history_with_changes PASSED [ 12%]
tests/unit/agent/test_change_tracker.py::TestHistory::test_get_history_limit PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_init_default_state PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_successful_call PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_opens_after_failures PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_open_rejects_calls PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_half_open_after_timeout PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_half_open_closes_on_success PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_half_open_opens_on_failure PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_excluded_exceptions PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_decorator_usage PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_context_manager_success PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_context_manager_failure PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_reset PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreaker::test_get_stats PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerRegistry::test_get_or_create PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerRegistry::test_get PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerRegistry::test_reset_all PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerRegistry::test_get_all_stats PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_should_attempt_recovery_no_last_failure PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_half_open_max_calls_exceeded PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_transition_to_same_state_no_change PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_execute_with_args_and_kwargs PASSED [ 12%]
tests/unit/agent/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_success_in_closed_resets_failure_count PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionConfig::test_default_config PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionConfig::test_default_code_tools PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionConfig::test_default_code_argument_names PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionConfig::test_custom_config PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionMiddleware::test_should_validate_code_executor PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionMiddleware::test_should_validate_write_file PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionMiddleware::test_should_not_validate_read_file PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionMiddleware::test_should_not_validate_random_tool PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCodeCorrectionMiddleware::test_should_not_validate_when_disabled PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_with_code PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_with_content PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_with_source PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_empty_string PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_whitespace_only PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_no_code PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFindCodeArgument::test_find_code_argument_non_string PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_valid_python_code PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_no_code_argument PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_with_markdown_cleanup PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_syntax_error PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_with_language_hint PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestValidateAndFix::test_validate_python_tool_uses_python_language PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestApplyCorrection::test_apply_correction_when_corrected PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestApplyCorrection::test_apply_correction_when_not_corrected PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFormatValidationError::test_format_valid_result PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFormatValidationError::test_format_syntax_error PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFormatValidationError::test_format_import_error PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestFormatValidationError::test_format_multiple_errors PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestGetRetryPrompt::test_get_retry_prompt_with_feedback PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestGetRetryPrompt::test_get_retry_prompt_without_feedback PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCorrectionResult::test_correction_result_creation PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestCorrectionResult::test_correction_result_with_feedback PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestMetricsCollection::test_metrics_collected_on_validation PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestMetricsCollection::test_metrics_track_language PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestGlobalMiddleware::test_get_middleware_returns_instance PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestGlobalMiddleware::test_get_middleware_is_singleton PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestGlobalMiddleware::test_reset_middleware_creates_new_instance PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestLazyCorrectorLoading::test_corrector_not_loaded_on_init PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestLazyCorrectorLoading::test_corrector_loaded_on_access PASSED [ 12%]
tests/unit/agent/test_code_correction_middleware.py::TestLazyCorrectorLoading::test_corrector_loaded_only_once PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_basic_component_access PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_component_access_returns_correct_instance PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_nonexistent_component_raises_attribute_error PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_uninitialized_component_raises_attribute_error PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_component_setter PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_has_component PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_get_component_names PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_custom_component_registration PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_attribute_error_for_unregistered_attributes PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_type_annotations_preserved PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_excluded_attributes_not_handled PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_component_mapping_dict PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorMixin::test_none_component_handling PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorIntegration::test_multiple_components_coexist PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorIntegration::test_component_access_does_not_create_attributes PASSED [ 12%]
tests/unit/agent/test_component_accessor.py::TestComponentAccessorIntegration::test_setter_updates_private_attribute PASSED [ 12%]
tests/unit/agent/test_config_workflow_builder.py::test_config_workflow_builder_wires_components PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestParsedCommand::test_basic_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextItem::test_success_item PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextItem::test_error_item PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_file_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_url_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_folder_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_problems_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_multiple_commands PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_case_insensitive PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_parse_no_commands PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_strip_commands PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestContextCommandParser::test_strip_multiple_commands PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestURLResolver::test_invalid_scheme PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestURLResolver::test_adds_https_scheme PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFileResolver::test_file_not_found PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFileResolver::test_read_file PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFileResolver::test_relative_path PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFileResolver::test_file_too_large PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFileResolver::test_not_a_file PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFolderResolver::test_folder_not_found PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFolderResolver::test_read_folder PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFolderResolver::test_ignores_pycache PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFolderResolver::test_includes_readme_preview PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestFolderResolver::test_not_a_folder PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestProblemsResolver::test_no_problems PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestProblemsResolver::test_with_diagnostics PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestProblemsResolver::test_with_workspace_errors PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestResolveContextCommands::test_resolve_file_command PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestResolveContextCommands::test_resolve_multiple_commands PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestCreateDefaultParser::test_create_default_parser PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestCreateDefaultParser::test_register_custom_resolver PASSED [ 12%]
tests/unit/agent/test_context_command_parser.py::TestCreateDefaultParser::test_custom_resolver_used PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCompactorConfig::test_default_values PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCompactorConfig::test_custom_values PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCompactionAction::test_action_taken_true PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCompactionAction::test_action_taken_false PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCompactionAction::test_action_taken_truncation PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestContextCompactorInit::test_default_initialization PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestContextCompactorInit::test_custom_config PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompact::test_should_not_compact_low_utilization PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompact::test_should_compact_at_threshold PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompact::test_should_compact_on_overflow PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompact::test_proactive_disabled PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompact::test_no_action_low_utilization PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompact::test_compaction_at_threshold PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompact::test_forced_compaction PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompact::test_statistics_updated PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_no_truncation_needed PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_truncation_by_chars PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_truncation_by_lines PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_truncation_disabled PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_head_truncation_strategy PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_tail_truncation_strategy PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncateToolResult::test_smart_truncation_preserves_errors PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTokenEstimation::test_estimate_tokens_json PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTokenEstimation::test_estimate_tokens_mixed PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTokenEstimation::test_estimate_tokens_unknown_type PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTokenEstimation::test_estimate_message_tokens_json PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestStatistics::test_get_statistics PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestStatistics::test_reset_statistics PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestFactoryFunction::test_create_context_compactor PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestEdgeCases::test_empty_content_truncation PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestEdgeCases::test_single_line_content PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestEdgeCases::test_very_long_single_line PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestParallelReadBudget::test_to_prompt_hint PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestParallelReadBudget::test_calculate_parallel_read_budget_default PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestParallelReadBudget::test_calculate_parallel_read_budget_custom PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestParallelReadBudget::test_calculate_parallel_read_budget_minimum_chars PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_is_pinned_requirement_positive PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_is_pinned_requirement_negative PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_pinned PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_system PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_error_content PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_user_question PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_user_statement PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_assistant PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestMessagePriorityAssignment::test_assign_priority_unknown_role PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompactWithRL::test_check_and_compact_with_rl_learner PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestCheckAndCompactWithRL::test_check_and_compact_rl_exception_handled PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestRecordTaskOutcome::test_record_task_outcome_success PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestRecordTaskOutcome::test_record_task_outcome_no_action PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestRecordTaskOutcome::test_record_task_outcome_disabled PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestRecordTaskOutcome::test_record_task_outcome_exception_handled PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompactMethod::test_should_compact_overflow_takes_precedence PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestShouldCompactMethod::test_should_compact_proactive_disabled_no_overflow PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_both_truncation_strategy PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_smart_truncation_single_line_large PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_smart_truncation_preserves_file_paths PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_smart_truncation_with_code_blocks PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_head_truncation_char_limit PASSED [ 12%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_tail_truncation_char_limit PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestTruncationStrategies::test_truncation_disabled_returns_original PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestStatisticsMethods::test_get_compaction_history PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestStatisticsMethods::test_get_statistics_all_fields PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_check_and_compact_async PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_check_and_compact_async_updates_stats PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_should_compact_async PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_truncate_tool_result_async PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_get_async_statistics PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_start_and_stop_background_compaction PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestAsyncMethods::test_background_compaction_already_running PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestFactoryFunctionAdvanced::test_create_context_compactor_all_params PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestFactoryFunctionAdvanced::test_create_context_compactor_with_pruning_learner PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestEnsureAsyncState::test_ensure_async_state_initializes_once PASSED [ 13%]
tests/unit/agent/test_context_compactor.py::TestResetStatistics::test_reset_statistics_clears_all_counters PASSED [ 13%]
tests/unit/agent/test_context_intelligence_builder.py::test_context_intelligence_builder_wires_components PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerConfig::test_default_config PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerConfig::test_custom_config PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerConfig::test_partial_config PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerInit::test_init_with_required_params PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerInit::test_init_with_all_params PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerInit::test_config_property PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerInit::test_provider_name_property PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerInit::test_model_property PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerContextWindow::test_get_model_context_window_success PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerContextWindow::test_get_model_context_window_fallback_on_exception PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerContextWindow::test_get_model_context_window_custom_default PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_from_settings PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_settings_zero_ignored PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_settings_none_ignored PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_from_config PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_calculated_from_model PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_default_calculation PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMaxContextChars::test_get_max_context_chars_no_settings_attribute PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_no_risk PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_at_risk PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_with_custom_max PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_logs_to_debug_logger PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_no_debug_logger PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerOverflowDetection::test_check_context_overflow_logs_warning_on_risk PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerCompaction::test_handle_compaction_no_compactor PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerCompaction::test_handle_compaction_no_action_taken PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerCompaction::test_handle_compaction_action_taken_no_messages_removed PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerCompaction::test_handle_compaction_messages_removed PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerCompaction::test_handle_compaction_overflow_trigger PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestContextManagerMetrics::test_get_context_metrics PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestCreateContextManager::test_create_with_defaults PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestCreateContextManager::test_create_with_custom_config PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestCreateContextManager::test_create_with_all_dependencies PASSED [ 13%]
tests/unit/agent/test_context_manager.py::TestCreateContextManager::test_create_without_optional_dependencies PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderType::test_enum_values PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderConfig::test_default_values PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderConfig::test_custom_values PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderConfig::test_get_frequency_for_provider_with_override PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderConfig::test_get_frequency_for_provider_without_override PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextState::test_default_values PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextState::test_custom_values PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_init_default PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_init_with_provider PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_init_with_custom_configs PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_reset PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_observed_files PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_executed_tool PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_tool_calls PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_tool_budget PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_task_complexity PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_update_state_task_hint PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestContextReminderManager::test_add_observed_file PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_disabled_reminder PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_missing_config PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_task_hint_only_once PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_task_hint_not_set PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_budget_reminder_when_low PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_budget_reminder_when_high PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_budget_reminder_when_exhausted PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestShouldInjectReminder::test_frequency_based_injection PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_evidence_reminder_with_files PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_evidence_reminder_no_files PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_evidence_reminder_many_files PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_budget_reminder_critical PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_budget_reminder_low PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_budget_reminder_plenty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_task_hint PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_task_hint_empty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_progress_reminder PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_progress_reminder_empty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestReminderFormatters::test_format_grounding_reminder PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetReminder::test_get_reminder_not_needed PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetReminder::test_get_reminder_custom_formatter PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetReminder::test_get_reminder_updates_history PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetReminder::test_get_reminder_no_repeat PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetConsolidatedReminder::test_consolidated_reminder_empty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetConsolidatedReminder::test_consolidated_reminder_single PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetConsolidatedReminder::test_consolidated_reminder_multiple PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetConsolidatedReminder::test_consolidated_reminder_force PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetConsolidatedReminder::test_consolidated_reminder_updates_tracking PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetMinimalReminder::test_minimal_reminder_empty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetMinimalReminder::test_minimal_reminder_low_budget PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetMinimalReminder::test_minimal_reminder_files_read PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetMinimalReminder::test_minimal_reminder_both PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestConfigureForProvider::test_configure_cloud_provider PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestConfigureForProvider::test_configure_local_provider PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetStats::test_stats_initial PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestGetStats::test_stats_after_activity PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestConvenienceFunctions::test_create_reminder_manager PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestConvenienceFunctions::test_get_evidence_reminder PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestConvenienceFunctions::test_get_evidence_reminder_empty PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestEdgeCases::test_provider_case_insensitive PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestEdgeCases::test_custom_formatter_none_return PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestEdgeCases::test_budget_exactly_at_threshold PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestEdgeCases::test_progress_shows_recent_tools PASSED [ 13%]
tests/unit/agent/test_context_reminder.py::TestEdgeCases::test_evidence_files_sorted PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestTaskCompletionDetection::test_finish_when_all_files_read PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestTaskCompletionDetection::test_continue_when_files_missing PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestTaskCompletionDetection::test_finish_when_output_requirements_met PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestCumulativeInterventionTracking::test_synthesis_nudge_on_cumulative_threshold PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestCumulativeInterventionTracking::test_force_synthesis_on_excessive_interventions PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestCumulativeInterventionTracking::test_no_intervention_on_low_count PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestPinnedPromptSection::test_pinned_requirements_survive_compaction PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestPinnedPromptSection::test_pinned_priority_highest PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestPinnedPromptSection::test_is_pinned_requirement_detects_patterns PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestPinnedPromptSection::test_non_pinned_content_normal_priority PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestFileReadDedup::test_duplicate_read_returns_cached PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestFileReadDedup::test_read_allowed_after_ttl PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestFileReadDedup::test_record_file_read_updates_timestamp PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestBestEffortFinalize::test_finalize_after_max_grounding_retries PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestBestEffortFinalize::test_retry_on_first_grounding_failure PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestBestEffortFinalize::test_reset_counter_on_success PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestMiddlewareChainWiring::test_middleware_chain_called_during_execution PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestMiddlewareChainWiring::test_middleware_can_block_execution PASSED [ 13%]
tests/unit/agent/test_continuation_loop_fix.py::TestVerticalIntegrationObservability::test_vertical_applied_event_emitted PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_detects_call_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_detects_use_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_detects_execute_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_detects_parenthesis_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_detects_the_tool_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_resolves_aliases PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_no_duplicates PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_returns_empty_for_no_matches PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_case_insensitive PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_run_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_invoke_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_perform_pattern PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetectMentionedTools::test_multiple_tools PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestContinuationStrategyInit::test_init_with_event_bus PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestContinuationStrategyInit::test_init_without_event_bus PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_finish_when_summary_already_requested PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_request_summary_on_stuck_loop PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_force_tool_execution_on_hallucinated_calls PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_return_to_user_for_asking_input_one_shot PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_continue_asking_input_auto_respond PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_return_to_user_max_asking_input PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_finish_on_completion_intent PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_prompt_tool_call_for_analysis_task PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_prompt_tool_call_for_action_task PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_request_summary_max_continuation_prompts PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestDetermineContinuationAction::test_finish_default PASSED [ 13%]
tests/unit/agent/test_continuation_strategy.py::TestRLCoordinator::test_uses_rl_recommendations PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestCheckpointMetadata::test_create_metadata PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestCheckpointMetadata::test_metadata_serialization PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestStateSerializer::test_serialize_simple_state PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestStateSerializer::test_serialize_with_datetime PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestStateSerializer::test_serialize_with_sets PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestStateSerializer::test_compression PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestMemoryCheckpointBackend::test_save_and_load PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestMemoryCheckpointBackend::test_list_checkpoints PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestMemoryCheckpointBackend::test_delete_checkpoint PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestConversationCheckpointManager::test_save_and_restore PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestConversationCheckpointManager::test_fork_from_checkpoint PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestConversationCheckpointManager::test_diff_checkpoints PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestConversationCheckpointManager::test_auto_checkpoint PASSED [ 13%]
tests/unit/agent/test_conversation_checkpoints.py::TestConversationCheckpointManager::test_timeline PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestContextMetrics::test_utilization_zero_max PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestContextMetrics::test_utilization_normal PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestContextMetrics::test_utilization_capped_at_one PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationConfig::test_default_config PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationConfig::test_custom_config PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_init_empty PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_add_user_message PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_add_assistant_message PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_add_assistant_with_tool_calls PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_add_tool_result PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_system_prompt_added_once PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_get_context_metrics PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_context_overflow_detection PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_reset PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_compact_history PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_get_last_user_message PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_get_last_assistant_message PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_on_context_overflow_callback PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_to_dict PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_from_messages PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_add_message_backward_compat PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_stage_tracking PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestConversationController::test_get_stage_recommended_tools PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestCompactionStrategy::test_compaction_strategy_values PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestMessageImportance::test_message_importance_creation PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_smart_compact_history_simple_strategy PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_smart_compact_history_tiered_strategy PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_smart_compact_preserves_system_message PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_score_messages_recency_boost PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_generate_compaction_summary PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_extract_key_topics PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_compaction_summaries_tracking PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_set_embedding_service PASSED [ 13%]
tests/unit/agent/test_conversation_controller.py::TestSmartCompaction::test_config_compaction_defaults PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingSearchResult::test_creation PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingSearchResult::test_repr PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_initialization PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_lazy_embedding_on_search PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_skip_short_messages PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_search_with_session_filter PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_search_with_exclude_ids PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_delete_session PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_get_stats PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_close PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_similarity_threshold PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_rebuild PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationEmbeddingStore::test_compact PASSED [ 13%]
tests/unit/agent/test_conversation_embedding_store.py::TestConversationStoreIntegration::test_conversation_store_with_embedding_store PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportFormat::test_format_values PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestConversationMessage::test_create_message PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestConversationMessage::test_message_with_tool_calls PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestConversationExport::test_create_export PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestMarkdownExport::test_basic_export PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestMarkdownExport::test_includes_metadata PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestMarkdownExport::test_excludes_metadata PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestMarkdownExport::test_includes_tool_calls PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestMarkdownExport::test_excludes_tool_calls PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestJSONExport::test_basic_export PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestJSONExport::test_includes_metadata PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestJSONExport::test_message_structure PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestJSONExport::test_tool_calls_in_json PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestHTMLExport::test_basic_export PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestHTMLExport::test_has_styling PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestHTMLExport::test_escapes_html PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestTextExport::test_basic_export PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestTextExport::test_includes_timestamps PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportToFile::test_export_to_markdown PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportToFile::test_export_to_json PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportToFile::test_export_to_html PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportToFile::test_auto_detect_format PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestExportToFile::test_creates_directories PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestFromMessageList::test_basic_conversion PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestFromMessageList::test_with_metadata PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestFromMessageList::test_with_timestamps PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestGlobalExporter::test_get_exporter_returns_instance PASSED [ 13%]
tests/unit/agent/test_conversation_export.py::TestGlobalExporter::test_get_exporter_singleton PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerConfig::test_default_config PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerConfig::test_custom_config PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerInit::test_init_minimal PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerInit::test_init_with_provider_model PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerInit::test_init_with_system_prompt PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerInit::test_init_with_config PASSED [ 13%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerInit::test_init_with_controller PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_add_user_message PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_add_assistant_message PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_add_assistant_message_with_tool_calls PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_add_tool_result PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_add_message_generic PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_messages_property PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_message_count PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_get_last_user_message PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerMessages::test_get_last_assistant_message PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerContext::test_get_context_metrics PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerContext::test_check_context_overflow_false PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerContext::test_handle_compaction PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerContext::test_get_memory_context_no_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerStage::test_stage_property PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerStage::test_get_stage_recommended_tools PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerSession::test_session_id_none_without_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerSession::test_get_recent_sessions_empty_without_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerSession::test_recover_session_fails_without_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerSession::test_get_session_stats_without_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_session_created_with_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_message_persisted_to_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_get_recent_sessions_delegates_to_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_recover_session_success PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_recover_session_not_found PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_get_session_stats_with_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerWithStore::test_get_memory_context_with_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerEmbeddings::test_initialize_embedding_store_disabled PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerEmbeddings::test_search_similar_messages_without_store PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerLifecycle::test_reset PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerLifecycle::test_set_system_prompt PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerLifecycle::test_to_dict PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestConversationManagerLifecycle::test_close PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestCreateConversationManager::test_create_basic PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestCreateConversationManager::test_create_with_system_prompt PASSED [ 14%]
tests/unit/agent/test_conversation_manager.py::TestCreateConversationManager::test_create_without_persistence PASSED [ 14%]
tests/unit/agent/test_conversation_pipeline_builder.py::test_conversation_pipeline_builder_wires_components PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStage::test_all_stages_defined PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestStageToolMapping::test_all_stages_have_mappings PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestStageToolMapping::test_initial_stage_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestStageToolMapping::test_execution_stage_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestStageKeywords::test_all_stages_have_keywords PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestStageKeywords::test_execution_keywords PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_default_init PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_custom_init PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_record_tool_execution PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_record_read_file_updates_observed PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_record_write_file_updates_modified PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_record_edit_file_updates_modified PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_last_tools_limit PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateDataclass::test_record_message_increments_count PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_init PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_reset PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_get_stage PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_get_stage_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_record_tool_execution PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_record_message PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_get_state_summary PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_detect_stage_from_content_execution PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_detect_stage_from_content_no_match PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_detect_stage_from_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachine::test_detect_stage_from_tools_empty PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineTransitions::test_maybe_transition PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineTransitions::test_transition_with_confidence PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_to_dict PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_from_dict PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_from_dict_empty PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_machine_to_dict PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_machine_from_dict PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateSerialization::test_state_machine_from_dict_empty PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRoundTrip::test_state_roundtrip PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRoundTrip::test_machine_roundtrip PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_get_tools_for_stage_uses_registry PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_get_stage_tools_returns_registry_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_get_tools_for_stage_includes_registry_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_get_stage_tools_from_registry PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_detect_stage_from_tools_uses_helper PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_should_include_tool_with_registry_tools PASSED [ 14%]
tests/unit/agent/test_conversation_state.py::TestConversationStateMachineRegistryIntegration::test_get_tool_priority_boost_with_registry PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_history_tracking_enabled_by_default PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_history_tracking_can_be_disabled PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_max_history_size_default PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_max_history_size_custom PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_empty_history_on_creation PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_transition_count_starts_at_zero PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_transition_records_history PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_multiple_transitions PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_history_enforces_max_size PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_disabled_history_tracking PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_reset_clears_history PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionHistoryTracking::test_transition_history_returns_copy PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionsSummary::test_empty_summary PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionsSummary::test_summary_with_transitions PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestTransitionsSummary::test_summary_stage_counts PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestHistoryRecordContents::test_record_contains_all_fields PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestHistoryRecordContents::test_record_message_count PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestHistoryRecordContents::test_record_tool_count PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestHistoryRecordContents::test_record_datetime_format PASSED [ 14%]
tests/unit/agent/test_conversation_state_history.py::TestIntegrationWithHooks::test_history_recorded_with_hooks PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestTokenUsageConversions::test_token_usage_to_dict_with_none PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestTokenUsageConversions::test_token_usage_to_dict_with_dict PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestTokenUsageConversions::test_token_usage_to_dict_with_dict_missing_total PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestTokenUsageConversions::test_token_usage_to_dict_with_object PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestTokenUsageConversions::test_token_usage_to_dict_with_object_missing_total PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestValidationResultConversions::test_validation_result_to_dict_with_none PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestValidationResultConversions::test_validation_result_to_dict_with_object PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestValidationResultConversions::test_validation_result_to_dict_with_errors PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestValidationResultConversions::test_validation_result_to_dict_without_warnings_attribute PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestMessageConversions::test_message_to_dict_with_none PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestMessageConversions::test_message_to_dict_with_dict PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestMessageConversions::test_message_to_dict_with_object PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestMessageConversions::test_message_to_dict_with_additional_fields PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestStreamMetricsConversions::test_stream_metrics_to_dict_with_none PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestStreamMetricsConversions::test_stream_metrics_to_dict_with_dict PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestStreamMetricsConversions::test_stream_metrics_to_dict_with_object PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestStreamMetricsConversions::test_stream_metrics_to_dict_with_optional_fields PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestToolResultConversions::test_tool_result_to_dict_with_none PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestToolResultConversions::test_tool_result_to_dict_with_dict PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestToolResultConversions::test_tool_result_to_dict_with_object PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestToolResultConversions::test_tool_result_to_dict_with_error PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestEdgeCases::test_token_usage_to_dict_with_zero_values PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestEdgeCases::test_validation_result_to_dict_empty_lists PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestEdgeCases::test_message_to_dict_empty_content PASSED [ 14%]
tests/unit/agent/test_conversions.py::TestEdgeCases::test_tool_result_to_dict_success_false_without_error PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_initialization_with_no_components PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_initialization_with_components PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_send_rl_reward_signal_with_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_send_rl_reward_signal_without_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_send_rl_reward_signal_with_exception PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_get_checkpoint_state_with_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_get_checkpoint_state_without_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_get_checkpoint_state_with_exception PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_apply_checkpoint_state_with_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_apply_checkpoint_state_without_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_apply_checkpoint_state_with_empty_state PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_apply_checkpoint_state_with_exception PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_record_intelligent_outcome_with_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_record_intelligent_outcome_without_coordinator PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_record_intelligent_outcome_with_exception PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_full_checkpoint_flow PASSED [ 14%]
tests/unit/agent/test_coordinator_adapter.py::TestCoordinatorAdapter::test_properties PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationContext::test_init_with_minimal_params PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationContext::test_init_with_all_params PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationContext::test_to_dict PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestFrameworkStrategy::test_create_agent_success PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestFrameworkStrategy::test_create_agent_applies_overrides PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestFrameworkStrategy::test_create_agent_with_mode_override PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestFrameworkStrategy::test_supports_observability PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestFrameworkStrategy::test_supports_verticals PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestLegacyStrategy::test_create_agent_success PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestLegacyStrategy::test_supports_observability PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestLegacyStrategy::test_supports_verticals PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationFactory::test_create_agent_with_default_strategy PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationFactory::test_create_agent_with_explicit_strategy PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationFactory::test_init_with_custom_default_strategy PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationFactory::test_create_context_from_cli_args PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestAgentCreationFactory::test_create_context_from_cli_args_with_none_values PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestStrategyInterface::test_cannot_instantiate_abstract_strategy PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestStrategyInterface::test_strategy_requires_create_agent PASSED [ 14%]
tests/unit/agent/test_creation_strategies.py::TestStrategyLogging::test_framework_strategy_logs_creation PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationPriority::test_all_priorities_defined PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationStatus::test_all_statuses_defined PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_minimal_request PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_full_request PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_empty_task_raises PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_whitespace_task_raises PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_zero_budget_raises PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_negative_deadline_raises PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_to_dict PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationRequest::test_from_dict PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_success_response PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_failure_response PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_rejected_factory PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_pending_factory PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_to_dict PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationResponse::test_from_dict PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestRoleMapping::test_all_roles_mapped PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestRoleMapping::test_aliases_mapped PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_initialization PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_custom_max_concurrent PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_get_active_count PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_resolve_role_from_suggestion PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_resolve_role_from_keywords PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_validate_request_empty_task PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_validate_request_excessive_budget PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandler::test_build_delegate_context PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_tool_metadata PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_parameters_schema PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_required_parameters PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_execute_success PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_execute_rejection PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegateTool::test_execute_async_mode PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_handle_validates_request PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_handle_rejects_max_concurrent PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_handle_rejects_unknown_role PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_cancel_returns_false_for_unknown PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_cancel_cancels_active_task PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_get_status_returns_none_for_unknown PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_get_status_returns_dict_for_known PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_wait_for_completion_unknown_delegation PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_wait_for_completion_no_task PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerAsyncMethods::test_set_completion_callback PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerConvertResult::test_convert_successful_result PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerConvertResult::test_convert_failed_result PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestDelegationHandlerConvertResult::test_convert_extracts_discoveries PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestActiveDelegation::test_initialization PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestModuleExports::test_delegation_init_exports PASSED [ 14%]
tests/unit/agent/test_delegation.py::TestModuleExports::test_handler_exports PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedDecorator::test_deprecated_function_issues_warning PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedDecorator::test_deprecated_with_remove_version PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedDecorator::test_deprecated_with_reason PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedDecorator::test_deprecated_method PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedDecorator::test_deprecated_preserves_function_signature PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedProperty::test_deprecated_property_issues_warning PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedClass::test_deprecated_class_issues_warning_on_instantiation PASSED [ 14%]
tests/unit/agent/test_deprecated_decorator.py::TestDeprecatedClass::test_deprecated_class_no_warning_on_import PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_from_call_simple_arguments PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_from_call_empty_arguments PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_from_call_unhashable_values PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_from_call_with_unhashable_key PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_hash_consistency PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_hash_different_order PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_equality_same_signature PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_equality_different_tool PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_equality_different_arguments PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_equality_non_signature_object PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolCallSignature::test_signature_in_set PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestErrorType::test_error_type_values PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestErrorType::test_error_type_uniqueness PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_init_empty_state PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_file_not_found PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_permission_denied PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_module_not_found PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_import_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_command_not_found PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_is_a_directory_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_not_a_directory_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_permission_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_directory_not_empty PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_file_exists PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_permanent_read_only_filesystem PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_connection_refused PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_connection_timeout PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_network_unreachable PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_rate_limit PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_too_many_requests PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_service_unavailable PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_gateway_timeout PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_temporary_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_transient_try_again PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_retryable_syntax_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_retryable_unknown_error PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_case_insensitive PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_record_failure_permanent PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_record_failure_transient PASSED [ 14%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_record_failure_retryable PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_should_skip_not_recorded PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_should_skip_after_permanent_failure PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_should_skip_different_arguments PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_should_skip_different_tool PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_should_skip_after_transient_failure PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_get_skip_reason_no_skip PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_get_skip_reason_with_skip PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_get_skip_reason_no_skip_different_args PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_reset_clears_failures PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_failed_call_count_property PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_multiple_failures_same_signature PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_partial_pattern_match PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_permanent_patterns_take_precedence PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_classify_empty_string PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestToolErrorClassifier::test_signature_argument_order_independence PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestGlobalClassifier::test_get_error_classifier_singleton PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestGlobalClassifier::test_get_error_classifier_initialization PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestGlobalClassifier::test_reset_error_classifier PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestGlobalClassifier::test_global_classifier_persists PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestGlobalClassifier::test_reset_before_first_get PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_unicode_error_messages PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_very_long_error_message PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_special_characters_in_error PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_arguments_with_none_values PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_arguments_with_numeric_values PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_arguments_with_boolean_values PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_mixed_error_type_detection PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_signature_with_nested_arguments PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_concurrent_failure_recording PASSED [ 15%]
tests/unit/agent/test_error_classifier.py::TestEdgeCases::test_should_skip_allows_different_permutations PASSED [ 15%]
tests/unit/agent/test_finalization_builder.py::test_finalization_builder_wires_dependencies PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingIssue::test_creation PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_add_issue_reduces_confidence PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_severity_affects_confidence_penalty PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_empty_issues PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_file_not_found PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_symbol_not_found PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_code_mismatch PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_fabricated_content PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_includes_suggestion PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_max_issues PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestVerificationResult::test_generate_feedback_prompt_prioritizes_severity PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_extract_file_references PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_extract_code_snippets PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_extract_symbols PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_verify_existing_file_paths PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_verify_nonexistent_file_paths PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_verify_code_snippet_matches PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_verify_fabricated_code_snippet PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_grounding_threshold PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_strict_mode_fails_on_any_issue PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_verify_with_context_files PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_clear_cache PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_empty_response PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestGroundingVerifier::test_path_with_incorrect_directory PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_exact_match PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_whitespace_tolerance PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_partial_match PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_no_match PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_looks_fabricated_with_todo PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_looks_fabricated_with_generic_name PASSED [ 15%]
tests/unit/agent/test_grounding_verifier.py::TestCodeMatching::test_not_fabricated_specific_code PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_no_filters PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_by_task_ids PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_by_language PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_by_category PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_by_difficulty PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_with_max_tasks PASSED [ 15%]
tests/unit/agent/test_harness.py::TestBaseBenchmarkRunner::test_filter_tasks_combined_filters PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_init_default PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_init_with_options PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_setup_creates_temp_dir PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_setup_sanitizes_task_id PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_setup_writes_context_code PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_setup_writes_test_code PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_cleanup_removes_temp_dir PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_cleanup_handles_already_deleted PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_apply_patch_without_setup PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_run_tests_without_setup PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_parse_test_output_pytest_format PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_parse_test_output_pytest_only_passed PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_parse_test_output_unittest_format PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironment::test_parse_test_output_unknown_format PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_init_default PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_init_with_runners PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_register_runner PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_get_runner_not_found PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_no_runner PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_sequential PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_with_progress_callback PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_parallel PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_handles_errors PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_with_failing_task PASSED [ 15%]
tests/unit/agent/test_harness.py::TestEvaluationHarness::test_run_evaluation_with_max_tasks PASSED [ 15%]
tests/unit/agent/test_harness.py::TestTaskEnvironmentIntegration::test_full_workflow_without_repo PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_simple PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_with_quotes PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_unix_style PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_windows_style PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_no_paths PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_empty_text PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_none_input PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_filters_false_positives PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestFilePathExtraction::test_extract_file_paths_duplicates PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_save_to PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_export_as PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_create_file PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_multiple_requirements PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_no_requirements PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_empty_text PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestOutputRequirementExtraction::test_extract_output_filters_short_strings PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_simple PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_truncates_long_args PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_truncates_long_output PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_with_dict_output PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_with_list_output PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestToolOutputFormatting::test_format_tool_output_custom_max_length PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_for_display_short_text PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_by_lines PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_by_chars PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_both_limits PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_empty_text PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestTruncateForDisplay::test_truncate_custom_indicator PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_removes_newlines PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_removes_tabs PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_removes_control_characters PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_normalizes_whitespace PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_truncates PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_empty_text PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestSanitizeStringForLog::test_sanitize_none_input PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestBuildToolCallSummary::test_build_summary_success PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestBuildToolCallSummary::test_build_summary_failure PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestBuildToolCallSummary::test_build_summary_with_duration PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestBuildToolCallSummary::test_build_summary_with_error PASSED [ 15%]
tests/unit/agent/test_helpers.py::TestBuildToolCallSummary::test_build_summary_with_duration_and_error PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLRequest::test_create_request PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLRequest::test_request_serialization PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLResponse::test_create_approved_response PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLResponse::test_create_rejected_response PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLResponse::test_response_serialization PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLNode::test_create_approval_node PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLNode::test_create_choice_node PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLNode::test_node_serialization PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLNode::test_create_request_from_context PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLNode::test_validate_response PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLExecutor::test_execute_approval_approved PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLExecutor::test_execute_approval_rejected PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLExecutor::test_execute_timeout_abort PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLExecutor::test_execute_timeout_continue PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestHITLExecutor::test_execute_with_validation_failure PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestWorkflowBuilderHITL::test_add_hitl_approval PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestWorkflowBuilderHITL::test_add_hitl_choice PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestWorkflowBuilderHITL::test_add_hitl_review PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestWorkflowBuilderHITL::test_add_hitl_confirmation PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestSafetyCheckerHITLIntegration::test_create_hitl_confirmation_callback PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestSafetyCheckerHITLIntegration::test_hitl_callback_approved PASSED [ 15%]
tests/unit/agent/test_hitl.py::TestSafetyCheckerHITLIntegration::test_hitl_callback_rejected PASSED [ 15%]
tests/unit/agent/test_intelligent_integration_builder.py::test_intelligent_integration_builder_wires_components PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestRequestContext::test_request_context_creation PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestRequestContext::test_request_context_with_optional_fields PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestResponseResult::test_response_result_creation PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestResponseResult::test_response_result_with_grounding_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineStats::test_pipeline_stats_defaults PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineStats::test_pipeline_stats_with_profile PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineInit::test_init_basic PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineInit::test_init_without_project_root PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineInit::test_deduplication_enabled_for_xai PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineInit::test_deduplication_disabled_for_anthropic PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineCreateFactory::test_create_with_profile_name PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPipelineCreateFactory::test_create_without_profile_name PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyPromptBuilder::test_get_prompt_builder_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyModeController::test_get_mode_controller_with_rl_coordinator PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyModeController::test_get_mode_controller_coordinator_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyModeController::test_get_mode_controller_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProviderQualityThresholds::test_get_provider_quality_thresholds_from_adapter PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProviderQualityThresholds::test_get_provider_quality_thresholds_from_controller PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProviderQualityThresholds::test_get_provider_quality_thresholds_default PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyQualityScorer::test_get_quality_scorer_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyGroundingVerifier::test_get_grounding_verifier_with_rl_learner PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyGroundingVerifier::test_get_grounding_verifier_no_project_root PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyGroundingVerifier::test_get_grounding_verifier_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestLazyResilientExecutor::test_get_resilient_executor_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_get_output_deduplicator PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_should_enable_deduplication PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_should_not_enable_deduplication PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_deduplicate_response_disabled PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_deduplicate_response_enabled PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestOutputDeduplicator::test_deduplicate_empty_response PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestGroundingEventEmission::test_emit_grounding_event_success PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestGroundingEventEmission::test_emit_grounding_event_no_hooks PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestGroundingEventEmission::test_emit_grounding_event_failure PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPrepareRequest::test_prepare_request_basic PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPrepareRequest::test_prepare_request_budget_increase PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestPrepareRequest::test_prepare_request_without_components PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_basic PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_with_deduplication PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_with_quality_scoring PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_grounding_failure_retry PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_grounding_failure_finalize PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_resets_grounding_on_success PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestProcessResponse::test_process_response_without_prepare PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestObserverPattern::test_notify_observers PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestObserverPattern::test_observer_error_handled PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestObserverPattern::test_add_observer PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestObserverPattern::test_remove_observer PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestObserverPattern::test_remove_nonexistent_observer PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestExecuteWithResilience::test_execute_without_resilience PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestExecuteWithResilience::test_execute_with_resilience_success PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestExecuteWithResilience::test_execute_with_resilience_circuit_trip PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestShouldContinue::test_should_continue_with_controller PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestShouldContinue::test_should_continue_tool_budget_exhausted PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestShouldContinue::test_should_continue_iteration_budget_exhausted PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestShouldContinue::test_should_continue_high_quality PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestShouldContinue::test_should_continue_normal PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_get_stats PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_get_stats_no_components PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_reset_session PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_reset_session_without_controller PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_get_learning_summary PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestStatsAndSession::test_get_learning_summary_no_requests PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestModuleFunctions::test_get_pipeline PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestModuleFunctions::test_get_pipeline_different_keys PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestModuleFunctions::test_clear_pipeline_cache PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline.py::TestConstants::test_providers_with_repetition_issues PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_initialization_with_no_components PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_initialization_with_components PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_prepare_intelligent_request_with_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_prepare_intelligent_request_without_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_prepare_intelligent_request_with_exception PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_validate_intelligent_response_with_result PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_validate_intelligent_response_returns_none PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_validate_intelligent_response_without_coordinator PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_validate_intelligent_response_with_exception PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_should_continue_intelligent_with_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_should_continue_intelligent_without_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_should_continue_intelligent_with_exception PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_record_intelligent_outcome_with_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_record_intelligent_outcome_without_integration PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_record_intelligent_outcome_with_exception PASSED [ 15%]
tests/unit/agent/test_intelligent_pipeline_adapter.py::TestIntelligentPipelineAdapter::test_full_integration_flow PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_creation PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_update_from_interaction PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_multiple_updates_use_exponential_average PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_get_recommended_strategy_minimal PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_get_recommended_strategy_strict PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileMetrics::test_get_recommended_strategy_adaptive_when_insufficient_data PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestContextFragment::test_relevance_score_calculation PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestContextFragment::test_recency_affects_relevance PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestContextFragment::test_success_affects_relevance PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileLearningStore::test_save_and_load_metrics PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileLearningStore::test_load_returns_new_metrics_if_not_found PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestProfileLearningStore::test_record_interaction PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestEmbeddingScheduler::test_initial_state_is_cold PASSED [ 15%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestEmbeddingScheduler::test_invalidate_resets_state PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_creation PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_build_prompt_cloud_provider PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_build_prompt_local_provider PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_build_prompt_includes_task_hint PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_build_prompt_includes_mode_hint PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_record_feedback_updates_metrics PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_get_profile_stats PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_reset_learning PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestIntelligentPromptBuilder::test_observer_notification PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestPromptStrategySelection::test_cloud_provider_gets_minimal_strategy PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestPromptStrategySelection::test_native_tool_model_gets_structured_strategy PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestPromptStrategySelection::test_non_native_tool_model_gets_strict_strategy PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestPromptGeneration::test_prompt_includes_grounding_rules PASSED [ 16%]
tests/unit/agent/test_intelligent_prompt_builder.py::TestPromptGeneration::test_prompt_with_continuation_context PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_set_vertical_context_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_set_tiered_tool_config_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_set_workspace_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_get_tool_usage_stats_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_get_token_usage_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_get_conversation_stage_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinWarnings::test_get_observed_files_issues_warning PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_set_vertical_context_still_works PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_tool_usage_stats_returns_correct_data PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_token_usage_returns_correct_data PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_reset_token_usage_works PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_tool_calls_count_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_tool_budget_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_iteration_count_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_max_iterations_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_current_provider_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_current_model_returns_correct_value PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_available_tools_returns_correct_tools PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_is_tool_enabled_delegates_to_coordinator PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_system_prompt_returns_prompt PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_set_system_prompt_sets_prompt PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_append_to_system_prompt_works PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_messages_returns_correct_format PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinBackwardCompatibility::test_get_message_count_returns_correct_count PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinCategories::test_vertical_configuration_methods_all_issue_warnings PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinCategories::test_metrics_methods_all_issue_warnings PASSED [ 16%]
tests/unit/agent/test_legacy_api.py::TestLegacyAPIMixinCategories::test_removal_version_in_all_warnings PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_init PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_reset_conversation PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_reset_conversation_with_all_components PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_reset_conversation_without_usage_analytics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_graceful_shutdown_success PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_graceful_shutdown_with_analytics_failure PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_graceful_shutdown_without_usage_analytics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_shutdown PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_shutdown_with_provider_error PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_shutdown_without_background_tasks PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_get_session_stats PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_recover_session_success PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_recover_session_not_found PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_recover_session_without_memory_manager PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_initialize_session_basic PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_initialize_session_without_analytics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_initialize_session_without_metrics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_initialize_session_with_various_configs PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_cleanup_session_basic PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_cleanup_session_without_analytics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_cleanup_session_without_metrics PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_cleanup_session_without_compactor PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_cleanup_session_metadata PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_initialize_then_cleanup_session_cycle PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_get_session_status PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManager::test_get_session_status_without_message_count PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManagerIntegration::test_full_lifecycle PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManagerIntegration::test_reset_recover_shutdown_cycle PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManagerErrorHandling::test_graceful_shutdown_handles_exception PASSED [ 16%]
tests/unit/agent/test_lifecycle_manager.py::TestLifecycleManagerErrorHandling::test_shutdown_handles_all_component_errors PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInit::test_init_defaults PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInit::test_init_custom_values PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInit::test_init_client_info PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbacks::test_on_connect_callback PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbacks::test_on_disconnect_callback PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbacks::test_on_health_change_callback PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientRefreshTools::test_refresh_tools_not_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientRefreshTools::test_refresh_tools_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientRefreshTools::test_refresh_tools_no_response PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientRefreshResources::test_refresh_resources_not_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientRefreshResources::test_refresh_resources_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallTool::test_call_tool_not_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallTool::test_call_tool_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallTool::test_call_tool_error_response PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallTool::test_call_tool_no_response PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientReadResource::test_read_resource_not_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientReadResource::test_read_resource_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInitialize::test_initialize_no_process PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInitialize::test_initialize_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientInitialize::test_initialize_no_response PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientConnect::test_connect_stores_command PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientConnect::test_connect_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientConnect::test_connect_failure PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientDisconnect::test_disconnect PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientDisconnect::test_disconnect_with_reason PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientDisconnect::test_disconnect_cancels_health_task PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientPing::test_ping_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientPing::test_ping_failure PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientPing::test_ping_exception PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_get_tool_by_name_found PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_get_tool_by_name_not_found PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_get_resource_by_uri_found PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_get_resource_by_uri_not_found PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_get_status PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientHelpers::test_reset_connection PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbackRegistration::test_on_connect PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbackRegistration::test_on_disconnect PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientCallbackRegistration::test_on_health_change PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientReconnect::test_try_reconnect_no_command PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientReconnect::test_try_reconnect_max_attempts_exceeded PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_method_exists PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_closes_process PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_cancels_health_task PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_emits_disconnect_callback PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_handles_exception_gracefully PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_cleanup_is_idempotent PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientResourceManagement::test_close_is_alias_for_cleanup PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_without_command PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_cleanup_on_exit PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_cleanup_on_exception PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_with_command_success PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_with_command_failure_raises PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_context_manager_stores_command_for_reconnect PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientAsyncContextManager::test_init_with_command_parameter PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientDestructor::test_destructor_cleanup_on_garbage_collection PASSED [ 16%]
tests/unit/agent/test_mcp_client.py::TestMCPClientDestructor::test_destructor_safe_when_no_process PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConfig::test_default_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConfig::test_custom_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectResult::test_default_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectResult::test_custom_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPServerInfo::test_default_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPServerInfo::test_custom_values PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorInit::test_initialization_with_defaults PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorInit::test_initialization_with_custom_config PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorInit::test_initialization_with_task_callback PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorInit::test_set_task_callback PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConnect::test_connect_disabled_returns_empty_result PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConnect::test_connect_with_use_mcp_tools_setting PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConnect::test_connect_registers_mcp_command_from_settings PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConnect::test_connect_falls_back_to_legacy_client PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorConnect::test_connect_registers_bridge_tools PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorGetServerInfo::test_get_server_info_empty_when_no_registry PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorGetServerInfo::test_get_server_info_returns_server_details PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorGetSummary::test_get_summary_empty_when_no_servers PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorGetSummary::test_get_summary_returns_correct_structure PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorShutdown::test_shutdown_cancels_pending_tasks PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorShutdown::test_shutdown_shuts_down_mcp_registry PASSED [ 16%]
tests/unit/agent/test_mcp_connector.py::TestMCPConnectorShutdown::test_shutdown_handles_errors_gracefully PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_tool PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_tool_with_parameters PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_tool_call_result PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_tool_call_result_error PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_resource PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_server_info PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_capabilities PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_client_info PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_message_type_enum PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_parameter_type_enum PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_message PASSED [ 16%]
tests/unit/agent/test_mcp_protocol.py::TestMCPModels::test_mcp_resource_content PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestServerStatus::test_all_statuses_defined PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPServerConfig::test_minimal_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPServerConfig::test_full_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestServerEntry::test_default_entry PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryInit::test_default_init PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryInit::test_init_with_params PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_unregistered_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_disabled_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_success PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_failure PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_exception PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_disconnect PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_disconnect_unregistered PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_connect_all PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryConnect::test_disconnect_all PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryHealthCheck::test_health_check_unregistered PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryHealthCheck::test_health_check_not_connected PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryHealthCheck::test_health_check_success PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryHealthCheck::test_health_check_failure PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryHealthCheck::test_health_check_exception PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryReconnect::test_try_reconnect_unregistered PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryReconnect::test_try_reconnect_max_retries PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryStartStop::test_start PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryStartStop::test_stop PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryCallTool::test_call_tool_not_found PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryCallTool::test_call_tool_success PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryCallTool::test_custom_init PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryRegister::test_register_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryRegister::test_register_duplicate_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryUnregister::test_unregister_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryUnregister::test_unregister_nonexistent PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerAccess::test_get_server_entry_directly PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerAccess::test_get_nonexistent_server_entry PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerAccess::test_list_servers PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerAccess::test_list_servers_empty PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerStatus::test_get_server_status PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerStatus::test_get_status_nonexistent PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryServerStatus::test_get_registry_status PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryFiltering::test_get_tools_by_tag PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryFiltering::test_get_tools_by_tag_no_match PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryFiltering::test_get_tools_by_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryFiltering::test_get_tools_by_nonexistent_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryEvents::test_on_event_callback PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryEvents::test_emit_event PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryEvents::test_emit_event_callback_error_handled PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryToolMapping::test_register_tool_mapping PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryToolMapping::test_get_tool_from_mapping PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryToolMapping::test_tool_to_server_mapping PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryToolMapping::test_get_all_tools_empty PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistryToolMapping::test_get_all_resources_empty PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistrySummary::test_get_registry_status_full PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistrySummary::test_get_registry_status_empty PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistrySummary::test_reset_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry.py::TestMCPRegistrySummary::test_reset_nonexistent_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPServerConfig::test_minimal_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPServerConfig::test_full_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryDiscovery::test_discover_no_config_found PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryDiscovery::test_discover_from_env_variable PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryDiscovery::test_discover_from_project_local PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryDiscovery::test_discover_priority_order PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_register_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_unregister_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_unregister_nonexistent_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_list_servers PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_get_server_status_not_found PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryBasics::test_get_server_status PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryFromConfig::test_from_yaml_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryFromConfig::test_from_json_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryFromConfig::test_from_nonexistent_config PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryEvents::test_on_event_callback PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryEvents::test_reset_server PASSED [ 16%]
tests/unit/agent/test_mcp_registry_discovery.py::TestMCPRegistryEvents::test_reset_nonexistent_server PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerInit::test_init_defaults PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerInit::test_init_custom_values PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerInit::test_server_info PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerRegisterResource::test_register_resource PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerRegisterResource::test_register_multiple_resources PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerToolConversion::test_tool_to_mcp_dict_params PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerToolConversion::test_tool_to_mcp_list_params PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_initialize PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_ping PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_list_tools_not_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_list_tools_initialized PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_call_tool_success PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_call_tool_missing_name PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_list_resources PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_read_resource_success PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_read_resource_not_found PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_read_resource_missing_uri PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_unknown_method PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHandleMessage::test_handle_parse_error PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHelpers::test_create_response PASSED [ 16%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHelpers::test_create_error PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHelpers::test_get_server_info PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerHelpers::test_get_tool_definitions PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerCallToolErrors::test_call_tool_not_initialized PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerCallToolErrors::test_call_tool_execution_error PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerReadResource::test_read_resource_not_initialized PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerReadResource::test_read_resource_non_file_uri PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerReadResource::test_read_resource_file_error PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestCreateMCPServerFromOrchestrator::test_create_from_orchestrator PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerCreateWithDefaultTools::test_create_with_default_tools PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerMessageWithoutId::test_handle_message_generates_id PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerListResourcesNotInitialized::test_list_resources_not_initialized PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_write_response PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_write_response_connection_error PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_write_response_broken_pipe PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_cleanup_stdio PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_cleanup_stdio_handles_exception PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_stop_cleans_up_stdio PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_server_has_stdio_attributes PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerAsyncStdio::test_setup_async_stdio_failure_fallback PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerStdioFallback::test_fallback_handles_eof PASSED [ 17%]
tests/unit/agent/test_mcp_server.py::TestMCPServerStdioFallback::test_fallback_handles_timeout PASSED [ 17%]
tests/unit/agent/test_metrics_logging_builder.py::test_metrics_logging_builder_wires_components PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_empty_chain PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_empty_chain_process_before PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_empty_chain_process_after PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_add_middleware PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_priority_sorting PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_blocking_middleware PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_argument_modification PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_middleware_chain_order PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_after_chain_reverse_order PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_applicable_tools_filter PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_result_modification_in_after PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_early_termination_on_block PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_exception_handling PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChain::test_clear PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareAbortError::test_error_creation PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareAbortError::test_error_attributes PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_len_and_bool PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_get_middleware_info PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_process_tool_call_success PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_process_tool_call_blocking PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_process_tool_call_with_modification PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_process_tool_call_executor_error PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_remove_middleware PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestMiddlewareChainAdvanced::test_enabled_property PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestCreateMiddlewareChainFactory::test_create_empty_chain PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestCreateMiddlewareChainFactory::test_create_chain_with_middleware PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestCodingMiddlewareIntegration::test_coding_middleware_in_chain PASSED [ 17%]
tests/unit/agent/test_middleware_chain.py::TestCodingMiddlewareIntegration::test_git_safety_blocks_dangerous_commands PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfo::test_default_creation PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfo::test_post_init_sets_empty_sets PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfo::test_with_explicit_values PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfo::test_default_factory PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_mode_controller_returns_none_when_unavailable PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_current_mode_name_defaults_to_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_is_build_mode_false_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_is_plan_mode_false_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_is_explore_mode_false_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_exploration_multiplier_default PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_sandbox_dir_none_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_allow_sandbox_edits_false_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_is_tool_allowed_by_mode_defaults_true PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_get_tool_mode_priority_defaults_to_one PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_get_mode_info_returns_default PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinNoController::test_get_mode_system_prompt_empty_when_no_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_set_mode_controller PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_set_mode_controller_invalidates_cache PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_current_mode_name_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_current_mode_name_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_current_mode_name_explore PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_is_build_mode_true PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_is_build_mode_false_in_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_is_plan_mode PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_is_explore_mode PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_exploration_multiplier_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_exploration_multiplier_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_exploration_multiplier_explore PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_sandbox_dir_none_in_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_sandbox_dir_set_in_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_allow_sandbox_edits_false_in_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_allow_sandbox_edits_true_in_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_is_tool_allowed_by_mode PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeAwareMixinWithController::test_get_tool_mode_priority PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfoCaching::test_get_mode_info_caches_result PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfoCaching::test_get_mode_info_refresh_forces_reload PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeInfoCaching::test_get_mode_info_captures_all_fields PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeSystemPrompt::test_get_mode_system_prompt_build PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeSystemPrompt::test_get_mode_system_prompt_plan PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestModeSystemPrompt::test_get_mode_system_prompt_explore PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestCreateModeAwareMixin::test_creates_instance PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestCreateModeAwareMixin::test_instance_has_default_properties PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestIModeControllerProtocol::test_protocol_runtime_checkable PASSED [ 17%]
tests/unit/agent/test_mode_aware_mixin.py::TestIModeControllerProtocol::test_protocol_has_required_methods PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestMinimalBuiltinDefaults::test_cloud_providers_have_wildcard PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestMinimalBuiltinDefaults::test_local_providers_have_patterns PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestMinimalBuiltinDefaults::test_local_providers_have_same_patterns PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestExtractToolCapablePatterns::test_extracts_provider_level_patterns PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestExtractToolCapablePatterns::test_extracts_model_level_patterns PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestExtractToolCapablePatterns::test_skips_non_tool_capable_models PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestExtractToolCapablePatterns::test_handles_non_dict_values PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestFlattenYamlManifest::test_flattens_tiered_structure PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestFlattenYamlManifest::test_flattens_flat_list PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestFlattenYamlManifest::test_deduplicates_models PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestFlattenYamlManifest::test_skips_none_names PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_wildcard_matching PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_always_allow_providers PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_case_insensitive_matching PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_get_supported_models_unknown_provider PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_to_json PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_matches_exact_name PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_matches_prefix_wildcard PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_matches_suffix_wildcard PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_matches_contains_pattern_fallback PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_manifest_merge PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestToolCallingMatrix::test_substring_fallback_matching PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestLoadToolCapablePatternsFromYaml::test_loads_from_user_profiles PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestLoadToolCapablePatternsFromYaml::test_falls_back_to_defaults PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestLoadToolCapablePatternsFromYaml::test_handles_yaml_error PASSED [ 17%]
tests/unit/agent/test_model_capabilities_unit.py::TestLoadToolCapablePatternsFromYaml::test_handles_empty_model_capabilities PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestSwitchReason::test_switch_reasons PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelInfo::test_create_model_info PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelInfo::test_local_model_info PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitchEvent::test_create_switch_event PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_initial_state PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_set_current PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_switch_model PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_switch_records_history PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_switch_with_reason PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSwitcher::test_switch_by_id PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelRegistry::test_default_models_registered PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelRegistry::test_register_model PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelRegistry::test_find_model_by_display_name PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelRegistry::test_find_model_not_found PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelFiltering::test_filter_by_provider PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelFiltering::test_filter_local_only PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelFiltering::test_filter_by_capability PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestFallbackChain::test_set_fallback_chain PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestFallbackChain::test_get_fallback_at_end PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestFallbackChain::test_switch_to_fallback PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestCallbacks::test_register_callback PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestCallbacks::test_multiple_callbacks PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSuggestion::test_suggest_model_basic PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSuggestion::test_suggest_local_model PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSuggestion::test_suggest_with_context_size PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestModelSuggestion::test_get_model_for_task PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestStatus::test_get_status_initial PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestStatus::test_get_status_after_switch PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestGlobalSwitcher::test_get_model_switcher_singleton PASSED [ 17%]
tests/unit/agent/test_model_switcher.py::TestGlobalSwitcher::test_reset_model_switcher PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentMode::test_mode_values PASSED   [ 17%]
tests/unit/agent/test_modes.py::TestAgentMode::test_mode_from_string PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentMode::test_invalid_mode_raises PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeConfig::test_build_mode_config PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeConfig::test_plan_mode_config PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeConfig::test_explore_mode_config PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_initial_mode PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_custom_initial_mode PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_switch_mode PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_switch_to_same_mode PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_mode_history PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_previous_mode PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_previous_mode_no_history PASSED [ 17%]
tests/unit/agent/test_modes.py::TestAgentModeController::test_get_config PASSED [ 17%]
tests/unit/agent/test_modes.py::TestToolAllowance::test_build_mode_allows_all_tools PASSED [ 17%]
tests/unit/agent/test_modes.py::TestToolAllowance::test_plan_mode_restricts_tools PASSED [ 17%]
tests/unit/agent/test_modes.py::TestToolAllowance::test_explore_mode_restricts_tools PASSED [ 17%]
tests/unit/agent/test_modes.py::TestToolPriority::test_build_mode_priorities PASSED [ 17%]
tests/unit/agent/test_modes.py::TestToolPriority::test_plan_mode_priorities PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeCallbacks::test_register_callback PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeCallbacks::test_multiple_callbacks PASSED [ 17%]
tests/unit/agent/test_modes.py::TestModeStatus::test_get_status PASSED   [ 17%]
tests/unit/agent/test_modes.py::TestModeStatus::test_get_mode_list PASSED [ 17%]
tests/unit/agent/test_modes.py::TestGlobalModeController::test_get_mode_manager_singleton PASSED [ 17%]
tests/unit/agent/test_modes.py::TestGlobalModeController::test_reset_mode_manager PASSED [ 17%]
tests/unit/agent/test_modes.py::TestSystemPromptAddition::test_build_mode_prompt PASSED [ 17%]
tests/unit/agent/test_modes.py::TestSystemPromptAddition::test_plan_mode_prompt PASSED [ 17%]
tests/unit/agent/test_modes.py::TestSystemPromptAddition::test_explore_mode_prompt PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestStreamMetrics::test_finalize_stream_metrics PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestStreamMetrics::test_finalize_stream_metrics_no_metrics PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestStreamMetrics::test_get_last_stream_metrics PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestStreamMetrics::test_get_last_stream_metrics_no_metrics PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_preload_embeddings_no_selector PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_preload_embeddings_already_initialized PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_preload_embeddings_success PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_preload_embeddings_failure PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_start_embedding_preload_no_semantic PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestEmbeddingPreload::test_start_embedding_preload_already_started PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolDependencies::test_tool_dependencies_registered_on_init PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestConversationState::test_reset_conversation PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestConversationState::test_conversation_messages_property PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSelection::test_record_tool_selection_semantic PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSelection::test_record_tool_selection_keyword PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSelection::test_record_tool_selection_fallback PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSelection::test_get_tool_usage_stats PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestProviderChecks::test_is_cloud_provider PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestProviderChecks::test_is_local_provider PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestSystemPrompt::test_build_system_prompt_with_adapter PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestSystemPrompt::test_build_system_prompt_for_provider PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestConversationStage::test_get_conversation_stage PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestConversationStage::test_get_stage_recommended_tools PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallLogging::test_log_tool_call PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolExecution::test_record_tool_execution_success PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolExecution::test_record_tool_execution_failure PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolExecution::test_record_tool_execution_timing PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallParsing::test_parse_tool_calls_with_adapter_empty PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallParsing::test_parse_tool_calls_with_adapter_native PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestWorkflowRegistration::test_workflow_registry_initialized PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestWorkflowRegistration::test_workflow_registry_has_workflows PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallBudget::test_tool_calls_used_tracking PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallBudget::test_tool_budget PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCacheIntegration::test_orchestrator_has_tool_cache PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolCacheIntegration::test_orchestrator_with_tool_cache PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSupportChecks::test_should_use_tools PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSupportChecks::test_model_supports_tool_calls_no_provider PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSupportChecks::test_model_supports_tool_calls_supported PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolSupportChecks::test_model_supports_tool_calls_not_supported PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_request_cancellation PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_request_cancellation_no_event PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_is_streaming_true PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_is_streaming_false PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_check_cancellation_true PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_check_cancellation_false PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestCancellationSupport::test_check_cancellation_no_event PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestShutdown::test_shutdown_basic PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestShutdown::test_shutdown_with_semantic_selector PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestShutdown::test_shutdown_handles_provider_error PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestShutdown::test_shutdown_handles_code_manager_error PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestShutdown::test_shutdown_handles_selector_error PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestContextManager::test_aenter PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestContextManager::test_aexit_calls_shutdown PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_basic FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_with_tools FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_with_thinking FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestAddMessage::test_add_user_message PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestAddMessage::test_add_assistant_message PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestFromSettings::test_from_settings_profile_not_found PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestFromSettings::test_from_settings_success PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_plan_tools_empty_goals FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_plan_tools_with_goals FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_summary FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_review FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_documentation FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_security FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_metrics FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_no_match FAILED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolConfiguration::test_load_tool_configurations_empty PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestToolConfiguration::test_load_tool_configurations_exception PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_empty_list PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_not_a_dict PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_no_name PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_invalid_name PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_disabled_tool PASSED [ 17%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_budget_reached PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_json_string_arguments PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_none_arguments PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_repeated_failure_skip PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_success PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_failure PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleToolCalls::test_handle_tool_calls_read_file_tracking PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestClassifyTaskKeywords::test_classifies_action_task PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestClassifyTaskKeywords::test_classifies_analysis_task PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_apply_vertical_middleware_empty_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_apply_vertical_middleware_with_middleware PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_apply_vertical_safety_patterns_empty_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_apply_vertical_safety_patterns_with_patterns PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_get_middleware_chain_returns_none_if_not_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalExtensionSupport::test_get_middleware_chain_returns_chain_if_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestOrchestratorProperties::test_messages_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestOrchestratorProperties::test_tool_budget_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestOrchestratorProperties::test_model_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestOrchestratorProperties::test_provider_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_basic PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_with_parens PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_empty_text PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_no_tools PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_with_call_pattern PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolMentionDetection::test_detect_mentioned_tools_with_use_pattern PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_conversation_controller_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_tool_pipeline_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_streaming_controller_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_streaming_handler_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_task_analyzer_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestComponentAccessors::test_observability_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCallbacks::test_on_tool_start_callback PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCallbacks::test_on_tool_complete_callback PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCallbacks::test_on_streaming_session_complete PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCallbacks::test_send_rl_reward_signal PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextLimitCalculation::test_settings_override_takes_precedence PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextLimitCalculation::test_provider_context_window_fallback PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextLimitCalculation::test_context_window_exception_handling PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextLimitCalculation::test_context_window_with_mock_value PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoveryIntegration::test_recovery_integration_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservabilityIntegration::test_observability_enabled_by_default PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservabilityIntegration::test_observability_disabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservabilityIntegration::test_on_tool_start_with_observability PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservabilityIntegration::test_on_tool_complete_with_observability PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMetricsCollector::test_metrics_collector_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestUsageAnalytics::test_usage_analytics_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_keywords_analysis PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_keywords_action PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_keywords_execution PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_keywords_default PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_with_context_no_history PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskClassification::test_classify_task_with_context_with_history PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestApplyIntentGuard::test_applies_guard_for_message FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestApplyTaskGuidance::test_applies_guidance FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMessages::test_messages_property_returns_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMessages::test_conversation_controller_messages PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderCapabilities::test_tool_calling_caps PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderCapabilities::test_provider_name PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderCapabilities::test_thinking_enabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_has_timestamp PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_has_components PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_has_health_status PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_context_compactor_included PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_code_correction_included PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_safety_checker_included PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_auto_committer_included PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetOptimizationStatus::test_search_router_included PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFlushAnalytics::test_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFlushAnalytics::test_usage_analytics_key PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFlushAnalytics::test_sequence_tracker_key PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFlushAnalytics::test_tool_cache_key PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchProvider::test_switch_returns_bool_or_none PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchProvider::test_switch_to_invalid_provider_returns_none PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchProvider::test_switch_updates_provider_name PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchModel::test_switch_model_returns_bool PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentIntegration::test_returns_none_when_disabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentIntegration::test_lazy_initialization PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentIntegration::test_property_is_accessible PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResetConversation::test_reset_conversation_clears_messages PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetManagement::test_tool_budget_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetManagement::test_tool_calls_used_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestUnifiedTracker::test_unified_tracker_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSafetyChecker::test_safety_checker_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestAutoCommitter::test_auto_committer_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextCompactor::test_context_compactor_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolOutputFormatter::test_tool_output_formatter_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSequenceTracker::test_sequence_tracker_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoveryIntegrationExtended::test_recovery_integration_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoveryIntegrationExtended::test_recovery_handler_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetCurrentProviderInfo::test_returns_dict_with_required_keys PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMessageHistory::test_get_messages PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMessageHistory::test_add_and_get_messages PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMessageHistory::test_get_message_count PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetManagementExtended::test_tool_budget_attribute_read PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetManagementExtended::test_tool_budget_attribute_write PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetManagementExtended::test_increment_tool_calls PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolRegistrar::test_tool_registrar_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolRegistrar::test_registered_tools PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestParseToolCallsWithAdapter::test_parse_empty_content PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestParseToolCallsWithAdapter::test_parse_content_without_tool_calls PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderManager::test_provider_manager_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolPipeline::test_tool_pipeline_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingController::test_streaming_controller_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversationController::test_conversation_controller_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversationController::test_get_context_metrics PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTaskAnalyzer::test_task_analyzer_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservability::test_register_observability PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservability::test_get_observability_status PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderHealth::test_get_provider_health PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGracefulShutdown::test_graceful_shutdown_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_prepare_intelligent_request_no_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_prepare_intelligent_request_with_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_prepare_intelligent_request_error PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_validate_intelligent_response_no_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_validate_intelligent_response_empty_response PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_validate_intelligent_response_with_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_validate_intelligent_response_error PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_record_intelligent_outcome_no_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_record_intelligent_outcome_with_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntelligentPipelineIntegration::test_record_intelligent_outcome_error PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_code_request FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_analysis_request FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_debug_request FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancellation::test_request_cancellation PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancellation::test_check_cancellation PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancellation::test_check_cancellation_no_streaming PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancellation::test_request_cancellation_safe_no_streaming PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancellation::test_is_streaming PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleCancellation::test_handle_cancellation_not_cancelled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHandleCancellation::test_handle_cancellation_when_cancelled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResolveShellVariant::test_non_shell_alias_returns_unchanged PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResolveShellVariant::test_shell_alias_with_shell_enabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResolveShellVariant::test_shell_alias_with_only_readonly_enabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResolveShellVariant::test_shell_alias_with_neither_enabled PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestResolveShellVariant::test_various_shell_aliases PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetThinkingDisabledPrompt::test_no_prefix_returns_base_prompt PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetThinkingDisabledPrompt::test_with_prefix_prepends_to_prompt PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetThinkingDisabledPrompt::test_with_none_prefix PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMemorySessionId::test_returns_session_id_when_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMemorySessionId::test_returns_none_when_not_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetRecentSessions::test_returns_empty_when_no_memory_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetRecentSessions::test_returns_sessions_from_memory_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetRecentSessions::test_handles_exception_gracefully PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoverSession::test_returns_false_when_no_memory_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoverSession::test_returns_false_when_session_not_found PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoverSession::test_recovers_session_successfully PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoverSession::test_handles_exception_gracefully PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMemoryContext::test_falls_back_to_in_memory_when_no_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMemoryContext::test_falls_back_when_no_session_id PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMemoryContext::test_gets_context_from_memory_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMemoryContext::test_handles_exception_with_fallback PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetSessionStats::test_returns_disabled_when_no_memory_manager PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetSessionStats::test_returns_error_when_session_not_found PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetSessionStats::test_returns_full_stats PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetSessionStats::test_handles_exception_gracefully PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_returns_all_tools_when_no_intent FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_filters_write_tools_for_display_only FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_no_filtering_for_write_allowed FAILED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestLogToolCall::test_logs_tool_call PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecoveryHandler::test_recovery_handler_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCreateBackgroundTask::test_create_background_task PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCurrentProviderModel::test_current_provider PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCurrentProviderModel::test_current_model PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestShouldContinueIntelligent::test_returns_tuple PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestShouldContinueIntelligent::test_with_no_integration PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestApplyVerticalMiddleware::test_empty_middleware_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestApplyVerticalMiddleware::test_with_middleware PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCodeCorrectionMiddleware::test_code_correction_middleware_accessor PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMessages::test_messages_returns_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversation::test_conversation_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversation::test_conversation_has_message_methods PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderName::test_provider_name_returns_string PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolAdapter::test_tool_adapter_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallingCaps::test_tool_calling_caps_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestTools::test_tools_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSettings::test_settings_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestPromptBuilder::test_prompt_builder_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProjectContext::test_project_context_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSanitizer::test_sanitizer_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestBuildSystemPromptWithAdapter::test_returns_string PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetModelContextWindow::test_returns_positive_integer PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetModelContextWindow::test_returns_known_provider_default PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMaxContextChars::test_returns_positive_integer PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCheckContextOverflow::test_returns_boolean PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCheckContextOverflow::test_empty_context_no_overflow PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetContextMetrics::test_returns_context_metrics PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestDebugLogger::test_debug_logger_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestModel::test_model_returns_string PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProvider::test_provider_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntentClassifier::test_intent_classifier_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestAdaptiveModeController::test_mode_controller_on_pipeline PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolBudgetProperty::test_tool_budget_returns_int PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolCallsUsedProperty::test_tool_calls_used_returns_int PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetEnabledTools::test_returns_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetAvailableTools::test_returns_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIsToolEnabled::test_returns_bool PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestBackgroundTasks::test_background_tasks_is_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCancelEvent::test_cancel_event_can_be_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntentClassifierModule::test_intent_type_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIntentClassifierModule::test_intent_classifier_instance PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestVerticalMiddleware::test_vertical_middleware_attribute PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRouteSearchQuery::test_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRouteSearchQuery::test_handles_keyword_query PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetRecommendedSearchTool::test_returns_string PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecordToolExecution::test_records_successful_execution PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestRecordToolExecution::test_records_failed_execution PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSetEnabledTools::test_sets_enabled_tools PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetToolUsageStats::test_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetConversationStage::test_returns_stage PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetStageRecommendedTools::test_returns_set PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetLastStreamMetrics::test_returns_none_initially PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetStreamingMetricsSummary::test_returns_none_or_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetStreamingMetricsHistory::test_returns_list PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestGetMiddlewareChain::test_returns_middleware_or_none PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSearchRouter::test_search_router_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolExecutionTracker::test_track_tool_execution PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSystemPromptProperty::test_system_prompt_returns_string PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIterationCountMethods::test_get_iteration_count PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestIterationCountMethods::test_unified_tracker_has_iterations PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservedFilesMethods::test_get_observed_files PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestObservedFilesMethods::test_get_modified_files PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStageMethods::test_get_stage PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestFlushAnalyticsAsync::test_returns_dict PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHealthMonitoring::test_start_health_monitoring PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestHealthMonitoring::test_stop_health_monitoring PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestUsageLogger::test_usage_logger_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestPromptBuilderAttr::test_prompt_builder_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCheckContextOverflowMethod::test_returns_bool PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolCacheConfig::test_tool_cache_ttl PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolPipelineAttr::test_tool_pipeline_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversationControllerAttr::test_conversation_controller_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingControllerAttr::test_streaming_controller_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestProviderManagerAttr::test_provider_manager_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMetricsCollectorAttr::test_metrics_collector_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestToolRegistrarAttr::test_tool_registrar_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestDetermineContinuationActionExists::test_method_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchProviderMethod::test_switch_provider_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestSwitchProviderMethod::test_switch_provider_to_invalid_returns_falsy PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestContextMetrics::test_returns_context_metrics PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestModelContextWindow::test_returns_positive_int PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestMaxContextChars::test_returns_positive_int PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestAddSystemMessage::test_add_message_system PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestAddUserMessage::test_add_message_user PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestAddAssistantMessage::test_add_message_assistant PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestClearConversation::test_reset_conversation PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversationHistory::test_messages_property PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestConversationHistory::test_conversation_attribute PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerIntegration::test_streaming_handler_exists PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerIntegration::test_streaming_handler_has_check_time_limit PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerIntegration::test_streaming_handler_has_check_iteration_limit PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerIntegration::test_streaming_handler_has_should_continue_loop PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCheckTimeLimitWithHandler::test_returns_none_when_under_limit PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestCheckTimeLimitWithHandler::test_returns_chunk_when_over_limit PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerProperty::test_returns_streaming_handler PASSED [ 18%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerProperty::test_handler_has_message_adder PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestStreamingHandlerProperty::test_handler_has_settings PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_returns_false_when_progress_ok FAILED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_returns_true_when_stuck FAILED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_analysis_task_has_higher_threshold FAILED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestHandleForceCompletionWithHandler::test_returns_none_when_not_forcing PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestHandleForceCompletionWithHandler::test_returns_chunk_when_forcing PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestHandleForceCompletionWithHandler::test_uses_unified_tracker_for_stop_decision PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestRateLimitRetry::test_get_rate_limit_wait_time_with_retry_after PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestRateLimitRetry::test_get_rate_limit_wait_time_extracts_from_message PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestRateLimitRetry::test_get_rate_limit_wait_time_extracts_retry_after_pattern PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestRateLimitRetry::test_get_rate_limit_wait_time_exponential_backoff PASSED [ 19%]
tests/unit/agent/test_orchestrator_core.py::TestRateLimitRetry::test_get_rate_limit_wait_time_caps_at_300_seconds PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorFactory::test_factory_class_exists PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorImports::test_orchestrator_has_main_classes PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorImports::test_orchestrator_has_protocols PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorImports::test_orchestrator_has_coordinators PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorComponents::test_conversation_controller_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorComponents::test_tool_pipeline_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorComponents::test_state_coordinator_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorConfiguration::test_settings_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorConfiguration::test_settings_has_default_values PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorStateManagement::test_conversation_state_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorStateManagement::test_conversation_stage_values PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorIntegration::test_provider_manager_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorIntegration::test_tool_registry_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_coverage.py::TestOrchestratorIntegration::test_message_history_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestServiceProtocols::test_protocols_importable PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestServiceProtocols::test_protocol_is_runtime_checkable PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestServiceProtocols::test_tool_registry_protocol_methods PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_provider_creation PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_register_singleton_services FAILED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_register_scoped_services PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_singleton_same_instance FAILED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_scoped_services_different_per_scope PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_scoped_services_same_within_scope PASSED [ 19%]
tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_register_all_services FAILED [ 19%]

=========================== short test summary info ============================
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_simple_response
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_token_usage_tracking
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_tool_calls
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_empty_response_uses_completer
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_max_iterations_exceeded
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_thinking_enabled
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_with_context_compaction
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorChat::test_chat_tool_failure_uses_completer
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_completer_fails_uses_fallback
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_with_tool_failures_uses_format_message
FAILED tests/unit/agent/coordinators/test_chat_coordinator.py::TestChatCoordinatorEdgeCases::test_chat_provider_exception_propagates
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_after_completion
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanUpdate::test_update_plan_with_failures
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_ready
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_after_completion
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestTaskSuggestion::test_suggest_next_tasks_sorted_by_complexity
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_missing_dependency
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_warnings_orphaned_tasks
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestPlanValidation::test_validate_plan_no_dependencies_warning
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_blocking_propagation
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_partial_failure
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_next_tasks_priority_ordering
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_parallel_tasks
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_suggest_respects_dependencies
FAILED tests/unit/agent/planning/test_hierarchical_planner.py::TestEdgeCases::test_update_plan_with_in_progress_tasks
FAILED tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_basic
FAILED tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_with_tools
FAILED tests/unit/agent/test_orchestrator_core.py::TestChatMethod::test_chat_with_thinking
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_plan_tools_empty_goals
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_plan_tools_with_goals
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_summary
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_review
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_documentation
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_security
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_metrics
FAILED tests/unit/agent/test_orchestrator_core.py::TestToolPlanning::test_goal_hints_for_message_no_match
FAILED tests/unit/agent/test_orchestrator_core.py::TestApplyIntentGuard::test_applies_guard_for_message
FAILED tests/unit/agent/test_orchestrator_core.py::TestApplyTaskGuidance::test_applies_guidance
FAILED tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_code_request
FAILED tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_analysis_request
FAILED tests/unit/agent/test_orchestrator_core.py::TestGoalHints::test_goal_hints_for_debug_request
FAILED tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_returns_all_tools_when_no_intent
FAILED tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_filters_write_tools_for_display_only
FAILED tests/unit/agent/test_orchestrator_core.py::TestFilterToolsByIntent::test_no_filtering_for_write_allowed
FAILED tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_returns_false_when_progress_ok
FAILED tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_returns_true_when_stuck
FAILED tests/unit/agent/test_orchestrator_core.py::TestCheckProgressWithHandler::test_analysis_task_has_higher_threshold
FAILED tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_register_singleton_services
FAILED tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_singleton_same_instance
FAILED tests/unit/agent/test_orchestrator_di.py::TestOrchestratorServiceProvider::test_register_all_services
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 50 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
= 50 failed, 4817 passed, 3 skipped, 5 deselected, 1194 warnings in 531.13s (0:08:51) =
