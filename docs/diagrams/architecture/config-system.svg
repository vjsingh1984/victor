<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900" font-family="Arial, sans-serif">
  <defs>
    <!-- Gradients -->
    <linearGradient id="sourceGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E3F2FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#BBDEFB;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="loaderGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F3E5F5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E1BEE7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="validatorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F5E9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C8E6C9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="settingsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF3E0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFE0B2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="consumerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FCE4EC;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F8BBD0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="#ffffff"/>

  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" font-size="28" font-weight="bold" fill="#333">Configuration System</text>

  <!-- CONFIGURATION SOURCES -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="1300" height="150" rx="10" fill="url(#sourceGradient)" stroke="#1976D2" stroke-width="2" filter="url(#shadow)"/>
    <text x="20" y="30" font-size="14" font-weight="bold" fill="#1976D2">CONFIGURATION SOURCES</text>

    <!-- Environment Variables -->
    <g transform="translate(30, 50)">
      <rect x="0" y="0" width="280" height="80" rx="5" fill="#ffffff" stroke="#1976D2" stroke-width="1.5"/>
      <text x="140" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Environment Variables</text>
      <text x="140" y="45" text-anchor="middle" font-size="10" fill="#666">ANTHROPIC_API_KEY</text>
      <text x="140" y="60" text-anchor="middle" font-size="10" fill="#666">OPENAI_API_KEY</text>
      <text x="140" y="75" text-anchor="middle" font-size="10" fill="#666">VICTOR_LOG_LEVEL</text>
    </g>

    <!-- YAML Files -->
    <g transform="translate(340, 50)">
      <rect x="0" y="0" width="280" height="80" rx="5" fill="#ffffff" stroke="#1976D2" stroke-width="1.5"/>
      <text x="140" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">YAML Files</text>
      <text x="140" y="45" text-anchor="middle" font-size="10" fill="#666">~/.victor/profiles.yaml</text>
      <text x="140" y="60" text-anchor="middle" font-size="10" fill="#666">~/.victor/config.yaml</text>
      <text x="140" y="75" text-anchor="middle" font-size="10" fill="#666">~/.victor/mcp.yaml</text>
    </g>

    <!-- Project Context -->
    <g transform="translate(650, 50)">
      <rect x="0" y="0" width="280" height="80" rx="5" fill="#ffffff" stroke="#1976D2" stroke-width="1.5"/>
      <text x="140" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Project Context</text>
      <text x="140" y="45" text-anchor="middle" font-size="10" fill="#666">.victor.md</text>
      <text x="140" y="60" text-anchor="middle" font-size="10" fill="#666">CLAUDE.md</text>
      <text x="140" y="75" text-anchor="middle" font-size="10" fill="#666">Project-specific settings</text>
    </g>

    <!-- Defaults -->
    <g transform="translate(960, 50)">
      <rect x="0" y="0" width="280" height="80" rx="5" fill="#ffffff" stroke="#1976D2" stroke-width="1.5"/>
      <text x="140" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Default Values</text>
      <text x="140" y="45" text-anchor="middle" font-size="10" fill="#666">Built-in constants</text>
      <text x="140" y="60" text-anchor="middle" font-size="10" fill="#666">Fallback options</text>
      <text x="140" y="75" text-anchor="middle" font-size="10" fill="#666">Sensible defaults</text>
    </g>
  </g>

  <!-- Arrow -->
  <line x1="700" y1="230" x2="700" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- CONFIG LOADER -->
  <g transform="translate(300, 270)">
    <rect x="0" y="0" width="800" height="150" rx="10" fill="url(#loaderGradient)" stroke="#7B1FA2" stroke-width="2" filter="url(#shadow)"/>
    <text x="400" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#7B1FA2">CONFIG LOADER</text>

    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="300" height="70" rx="5" fill="#ffffff" stroke="#7B1FA2" stroke-width="1.5"/>
      <text x="150" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">load()</text>
      <text x="150" y="45" text-anchor="middle" font-size="10" fill="#666">Load from all sources</text>
      <text x="150" y="60" text-anchor="middle" font-size="10" fill="#666">Parse YAML, read env vars</text>
    </g>

    <g transform="translate(400, 50)">
      <rect x="0" y="0" width="350" height="70" rx="5" fill="#ffffff" stroke="#7B1FA2" stroke-width="1.5"/>
      <text x="175" y="20" text-anchor="middle" font-size="12" font-weight="bold" fill="#333">Priority Resolution</text>
      <text x="175" y="40" text-anchor="middle" font-size="9" fill="#666">1. Defaults</text>
      <text x="175" y="52" text-anchor="middle" font-size="9" fill="#666">2. Global Config → Profile Config → Project Context</text>
      <text x="175" y="64" text-anchor="middle" font-size="9" fill="#666">3. Environment Vars → CLI Flags (highest)</text>
    </g>
  </g>

  <!-- Arrow -->
  <line x1="700" y1="420" x2="700" y2="460" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- CONFIG VALIDATOR -->
  <g transform="translate(200, 460)">
    <rect x="0" y="0" width="1000" height="150" rx="10" fill="url(#validatorGradient)" stroke="#388E3C" stroke-width="2" filter="url(#shadow)"/>
    <text x="500" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#388E3C">CONFIG VALIDATOR</text>

    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="200" height="70" rx="5" fill="#ffffff" stroke="#388E3C" stroke-width="1.5"/>
      <text x="100" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">validate()</text>
      <text x="100" y="45" text-anchor="middle" font-size="10" fill="#666">YAML syntax check</text>
      <text x="100" y="60" text-anchor="middle" font-size="10" fill="#666">Required fields</text>
    </g>

    <g transform="translate(280, 50)">
      <rect x="0" y="0" width="250" height="70" rx="5" fill="#ffffff" stroke="#388E3C" stroke-width="1.5"/>
      <text x="125" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Schema Validation</text>
      <text x="125" y="45" text-anchor="middle" font-size="10" fill="#666">Type checking</text>
      <text x="125" y="60" text-anchor="middle" font-size="10" fill="#666">Value constraints</text>
    </g>

    <g transform="translate(560, 50)">
      <rect x="0" y="0" width="200" height="70" rx="5" fill="#ffffff" stroke="#388E3C" stroke-width="1.5"/>
      <text x="100" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Merge Configs</text>
      <text x="100" y="45" text-anchor="middle" font-size="10" fill="#666">Combine sources</text>
      <text x="100" y="60" text-anchor="middle" font-size="10" fill="#666">Resolve conflicts</text>
    </g>

    <g transform="translate(790, 50)">
      <rect x="0" y="0" width="160" height="70" rx="5" fill="#ffffff" stroke="#388E3C" stroke-width="1.5"/>
      <text x="80" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Apply Overrides</text>
      <text x="80" y="45" text-anchor="middle" font-size="10" fill="#666">Env vars take</text>
      <text x="80" y="60" text-anchor="middle" font-size="10" fill="#666">precedence</text>
    </g>
  </g>

  <!-- Arrow -->
  <line x1="700" y1="610" x2="700" y2="650" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- SETTINGS OBJECT -->
  <g transform="translate(100, 650)">
    <rect x="0" y="0" width="1200" height="120" rx="10" fill="url(#settingsGradient)" stroke="#F57C00" stroke-width="2" filter="url(#shadow)"/>
    <text x="600" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#F57C00">SETTINGS OBJECT</text>

    <g transform="translate(30, 45)">
      <rect x="0" y="0" width="180" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="90" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">ProviderSettings</text>
      <text x="90" y="38" text-anchor="middle" font-size="9" fill="#666">name, model, api_key</text>
    </g>

    <g transform="translate(225, 45)">
      <rect x="0" y="0" width="180" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="90" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">ToolSettings</text>
      <text x="90" y="38" text-anchor="middle" font-size="9" fill="#666">lazy_load, timeout</text>
    </g>

    <g transform="translate(420, 45)">
      <rect x="0" y="0" width="180" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="90" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">LoggingSettings</text>
      <text x="90" y="38" text-anchor="middle" font-size="9" fill="#666">level, format, file</text>
    </g>

    <g transform="translate(615, 45)">
      <rect x="0" y="0" width="180" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="90" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">CacheSettings</text>
      <text x="90" y="38" text-anchor="middle" font-size="9" fill="#666">enabled, ttl, backend</text>
    </g>

    <g transform="translate(810, 45)">
      <rect x="0" y="0" width="180" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="90" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">UISettings</text>
      <text x="90" y="38" text-anchor="middle" font-size="9" fill="#666">theme, editor, pager</text>
    </g>

    <g transform="translate(1005, 45)">
      <rect x="0" y="0" width="165" height="55" rx="5" fill="#ffffff" stroke="#F57C00" stroke-width="1.5"/>
      <text x="82" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">WorkflowSettings</text>
      <text x="82" y="38" text-anchor="middle" font-size="9" fill="#666">scheduling, etc.</text>
    </g>
  </g>

  <!-- Arrow -->
  <line x1="700" y1="770" x2="700" y2="810" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- CONFIG CONSUMERS -->
  <g transform="translate(50, 810)">
    <rect x="0" y="0" width="1300" height="70" rx="10" fill="url(#consumerGradient)" stroke="#C2185B" stroke-width="2" filter="url(#shadow)"/>
    <text x="650" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#C2185B">CONFIG CONSUMERS</text>

    <g transform="translate(50, 35)">
      <text x="60" y="15" text-anchor="middle" font-size="11" fill="#333">Agent Orchestrator</text>
      <text x="180" y="15" text-anchor="middle" font-size="11" fill="#333">Provider Manager</text>
      <text x="320" y="15" text-anchor="middle" font-size="11" fill="#333">Tool Pipeline</text>
      <text x="450" y="15" text-anchor="middle" font-size="11" fill="#333">Workflow Executor</text>
      <text x="600" y="15" text-anchor="middle" font-size="11" fill="#333">HTTP/MCP Server</text>
      <text x="760" y="15" text-anchor="middle" font-size="11" fill="#333">Verticals</text>
      <text x="860" y="15" text-anchor="middle" font-size="11" fill="#333">All Components</text>
    </g>
  </g>

  <!-- Priority Legend -->
  <g transform="translate(1050, 80)">
    <rect x="0" y="0" width="300" height="200" rx="10" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
    <text x="150" y="25" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">Priority Order</text>
    <text x="150" y="45" text-anchor="middle" font-size="10" fill="#666">(Low → High)</text>

    <g transform="translate(20, 60)">
      <text x="0" y="0" font-size="11" fill="#555">6. CLI Flags</text>
      <rect x="200" y="-8" width="15" height="15" fill="#1976D2"/>

      <text x="0" y="25" font-size="11" fill="#555">5. Environment Vars</text>
      <rect x="200" y="17" width="15" height="15" fill="#1565C0"/>

      <text x="0" y="50" font-size="11" fill="#555">4. Project Context</text>
      <rect x="200" y="42" width="15" height="15" fill="#42A5F5"/>

      <text x="0" y="75" font-size="11" fill="#555">3. Profile Config</text>
      <rect x="200" y="67" width="15" height="15" fill="#64B5F6"/>

      <text x="0" y="100" font-size="11" fill="#555">2. Global Config</text>
      <rect x="200" y="92" width="15" height="15" fill="#90CAF9"/>

      <text x="0" y="125" font-size="11" fill="#555">1. Defaults</text>
      <rect x="200" y="117" width="15" height="15" fill="#BBDEFB"/>
    </g>
  </g>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
</svg>