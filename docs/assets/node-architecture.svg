<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4F46E5"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="computeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#059669"/>
      <stop offset="100%" style="stop-color:#10B981"/>
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1F2937">Task Execution Architecture</text>

  <!-- Workflow Layer -->
  <rect x="50" y="60" width="700" height="80" rx="10" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="2"/>
  <text x="400" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#374151">Workflow Definition (YAML)</text>
  <text x="400" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#6B7280">Defines sequence of nodes, conditions, and parallel execution</text>

  <!-- Arrow down -->
  <line x1="400" y1="140" x2="400" y2="170" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Executor -->
  <rect x="250" y="180" width="300" height="50" rx="8" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2"/>
  <text x="400" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1E40AF">WorkflowExecutor</text>

  <!-- Split arrows -->
  <line x1="320" y1="230" x2="200" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="480" y1="230" x2="600" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- AgentNode Box -->
  <rect x="50" y="290" width="300" height="150" rx="12" fill="url(#agentGrad)" stroke="#4338CA" stroke-width="2"/>
  <text x="200" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">AgentNode</text>
  <text x="200" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E0E7FF">LLM-Powered Task Execution</text>

  <!-- AgentNode internals -->
  <rect x="70" y="360" width="120" height="35" rx="5" fill="white" fill-opacity="0.2" stroke="white" stroke-opacity="0.5"/>
  <text x="130" y="382" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">LLM Reasoning</text>

  <rect x="210" y="360" width="120" height="35" rx="5" fill="white" fill-opacity="0.2" stroke="white" stroke-opacity="0.5"/>
  <text x="270" y="382" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Tool Selection</text>

  <text x="200" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#E0E7FF">• Dynamic tool selection</text>
  <text x="200" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#E0E7FF">• Handles ambiguity</text>

  <!-- ComputeNode Box -->
  <rect x="450" y="290" width="300" height="150" rx="12" fill="url(#computeGrad)" stroke="#047857" stroke-width="2"/>
  <text x="600" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">ComputeNode</text>
  <text x="600" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#D1FAE5">Direct Tool Execution</text>

  <!-- ComputeNode internals -->
  <rect x="470" y="360" width="260" height="35" rx="5" fill="white" fill-opacity="0.2" stroke="white" stroke-opacity="0.5"/>
  <text x="600" y="382" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Sequential/Parallel Tool Calls</text>

  <text x="600" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#D1FAE5">• No LLM needed</text>
  <text x="600" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#D1FAE5">• Constraint enforcement</text>

  <!-- Arrows to Tool Registry -->
  <line x1="200" y1="440" x2="200" y2="480" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="440" x2="600" y2="480" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Tool Registry -->
  <rect x="100" y="490" width="600" height="60" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="400" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400E">Tool Registry</text>
  <text x="400" y="538" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#B45309">execute(tool_name, params) → ToolResult</text>

  <!-- Legend -->
  <rect x="50" y="565" width="15" height="15" rx="3" fill="url(#agentGrad)"/>
  <text x="72" y="577" font-family="Arial, sans-serif" font-size="11" fill="#374151">Requires LLM (expensive, intelligent)</text>

  <rect x="280" y="565" width="15" height="15" rx="3" fill="url(#computeGrad)"/>
  <text x="302" y="577" font-family="Arial, sans-serif" font-size="11" fill="#374151">No LLM (cheap, deterministic)</text>
</svg>
