[pytest]
# Pytest configuration for Victor AI
# See pyproject.toml for additional pytest settings

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Minimum version
minversion = 8.0

# Add options
addopts =
    # Strict markers and config
    --strict-markers
    --strict-config

    # Coverage (enabled by default)
    --cov=victor
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml

    # Verbose output
    -v

    # Show locals on tracebacks
    --showlocals

    # Capture output (can be disabled with -s)
    --capture=fd

    # Do not capture stderr/stdout (for debugging)
    # --capture=no

    # Fail on warnings during collection
    # -W error

# Asyncio mode
asyncio_mode = auto

# Markers
markers =
    integration: Integration tests (require external services)
    slow: Slow tests (deselect with '-m "not slow"')
    unit: Unit tests (fast, isolated)
    workflows: Workflow-related tests
    agents: Multi-agent tests
    hitl: Human-in-the-loop tests
    benchmark: Performance benchmarks
    summary: Summary/report generation tests
    regression: Regression tests
    smoke: Smoke tests (quick sanity checks)
    load_test: Load and scalability tests (require load testing infrastructure)

# Filter warnings
filterwarnings =
    # Ignore pytest collection warnings for classes starting with "Test"
    ignore:cannot collect test class.*because it has a __init__ constructor:pytest.PytestCollectionWarning

    # Ignore semaphore leak warnings (from dependencies)
    ignore:.*semaphore.*:ResourceWarning
    ignore:.*leaked.*semaphore.*:UserWarning
    ignore:.*resource_tracker.*:UserWarning

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = false
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Coverage settings (see pyproject.toml for full config)
[coverage:run]
source = victor
omit =
    */tests/*
    */__init__.py
    victor/ui/cli.py
    victor/ui/commands.py

[coverage:report]
precision = 2
show_missing = true
skip_covered = false
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod
